// v0.2.81
function e(e){return Object.keys(e).reduce(((t,n)=>{const o=e[n];var i;return t[n]=Object.assign({},o),r(o.value)&&(i=o.value,"[object Function]"!==Object.prototype.toString.call(i))&&!Array.isArray(o.value)&&(t[n].value=Object.assign({},o.value)),Array.isArray(o.value)&&(t[n].value=o.value.slice(0)),t}),{})}function t(e){if(e)try{return JSON.parse(e)}catch(t){return e}}function n(e,t,n){if(null==n||!1===n)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,"true"===r&&(r=""),e.setAttribute(t,r),Promise.resolve().then((()=>delete e.__updating[t]))}function r(e){return null!=e&&("object"==typeof e||"function"==typeof e)}let o;function i(r,i){const a=Object.keys(i);return class extends r{static get observedAttributes(){return a.map((e=>i[e].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(r,o){const i=e(o);return Object.keys(o).forEach((e=>{const o=i[e],a=r.getAttribute(o.attribute),s=r[e];a&&(o.value=o.parse?t(a):a),null!=s&&(o.value=Array.isArray(s)?s.slice(0):s),o.reflect&&n(r,o.attribute,o.value),Object.defineProperty(r,e,{get:()=>o.value,set(t){const r=o.value;o.value=t,o.reflect&&n(this,o.attribute,o.value);for(let n=0,o=this.__propertyChangedCallbacks.length;n<o;n++)this.__propertyChangedCallbacks[n](e,t,r)},enumerable:!0,configurable:!0})})),i}(this,i);const r=function(e){return Object.keys(e).reduce(((t,n)=>(t[n]=e[n].value,t)),{})}(this.props),a=this.Component,s=o;try{o=this,this.__initialized=!0,"function"==typeof(l=a)&&0===l.toString().indexOf("class")?new a(r,{element:this}):a(r,{element:this})}finally{o=s}var l}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let e=null;for(;e=this.__releaseCallbacks.pop();)e(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(e,n,r){if(this.__initialized&&!this.__updating[e]&&(e=this.lookupProp(e))in i){if(null==r&&!this[e])return;this[e]=i[e].parse?t(r):r}}lookupProp(e){if(i)return a.find((t=>e===t||e===i[t].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(e){this.__releaseCallbacks.push(e)}addPropertyChangedCallback(e){this.__propertyChangedCallbacks.push(e)}}}function a(e,t={},n={}){const{BaseElement:o=HTMLElement,extension:a}=n;return n=>{if(!e)throw new Error("tag is required to register a Component");let s=customElements.get(e);return s?(s.prototype.Component=n,s):(s=i(o,function(e){return e?Object.keys(e).reduce(((t,n)=>{const o=e[n];return t[n]=r(o)&&"value"in o?o:{value:o},t[n].attribute||(t[n].attribute=n.replace(/\.?([A-Z]+)/g,((e,t)=>"-"+t.toLowerCase())).replace("_","-").replace(/^-/,"")),t[n].parse="parse"in t[n]?t[n].parse:"string"!=typeof t[n].value,t}),{}):{}}(t)),s.prototype.Component=n,s.prototype.registeredTag=e,customElements.define(e,s,a),s)}}const s={context:void 0,registry:void 0},l=Symbol("solid-proxy"),c=Symbol("solid-track"),d={equals:(e,t)=>e===t};let u=B;const p=1,h=2,g={owned:null,cleanups:null,context:null,owner:null};var b=null;let f=null,m=null,y=null,v=null,w=0;function x(e,t){const n=m,r=b,o=0===e.length,i=o?g:{owned:null,cleanups:null,context:null,owner:void 0===t?r:t},a=o?e:()=>e((()=>T((()=>U(i)))));b=i,m=null;try{return M(a,!0)}finally{m=n,b=r}}function _(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},d,t):d).equals||void 0};return[P.bind(n),e=>("function"==typeof e&&(e=e(n.value)),R(n,e))]}function k(e,t,n){L(O(e,t,!1,p))}function $(e,t,n){u=z;const r=O(e,t,!1,p);n&&n.render||(r.user=!0),v?v.push(r):L(r)}function S(e,t,n){n=n?Object.assign({},d,n):d;const r=O(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,L(r),P.bind(r)}function T(e){if(null===m)return e();const t=m;m=null;try{return e()}finally{m=t}}function C(e){$((()=>T(e)))}function E(e){return null===b||(null===b.cleanups?b.cleanups=[e]:b.cleanups.push(e)),e}function A(){return b}function I(e){const t=S(e),n=S((()=>H(t())));return n.toArray=()=>{const e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function P(){if(this.sources&&this.state)if(this.state===p)L(this);else{const e=y;y=null,M((()=>j(this)),!1),y=e}if(m){const e=this.observers?this.observers.length:0;m.sources?(m.sources.push(this),m.sourceSlots.push(e)):(m.sources=[this],m.sourceSlots=[e]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])}return this.value}function R(e,t,n){let r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&M((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],r=f&&f.running;r&&f.disposed.has(n),(r?n.tState:n.state)||(n.pure?y.push(n):v.push(n),n.observers&&D(n)),r||(n.state=p)}if(y.length>1e6)throw y=[],new Error}),!1)),t}function L(e){if(!e.fn)return;U(e);const t=b,n=m,r=w;m=b=e,function(e,t,n){let r;try{r=e.fn(t)}catch(t){return e.pure&&(e.state=p,e.owned&&e.owned.forEach(U),e.owned=null),e.updatedAt=n+1,F(t)}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?R(e,r):e.value=r,e.updatedAt=n)}(e,e.value,r),m=n,b=t}function O(e,t,n,r=p,o){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:b,context:null,pure:n};return null===b||b!==g&&(b.owned?b.owned.push(i):b.owned=[i]),i}function N(e){if(0===e.state)return;if(e.state===h)return j(e);if(e.suspense&&T(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<w);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if((e=t[n]).state===p)L(e);else if(e.state===h){const n=y;y=null,M((()=>j(e,t[0])),!1),y=n}}function M(e,t){if(y)return e();let n=!1;t||(y=[]),v?n=!0:v=[],w++;try{const t=e();return function(e){y&&(B(y),y=null);if(e)return;const t=v;v=null,t.length&&M((()=>u(t)),!1)}(n),t}catch(e){n||(v=null),y=null,F(e)}}function B(e){for(let t=0;t<e.length;t++)N(e[t])}function z(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:N(r)}for(t=0;t<n;t++)N(e[t])}function j(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const e=r.state;e===p?r!==t&&(!r.updatedAt||r.updatedAt<w)&&N(r):e===h&&j(r,t)}}}function D(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=h,n.pure?y.push(n):v.push(n),n.observers&&D(n))}}function U(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)U(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function F(e,t=b){const n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function H(e){if("function"==typeof e&&!e.length)return H(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=H(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const q=Symbol("fallback");function G(e){for(let t=0;t<e.length;t++)e[t]()}function V(e,t){return T((()=>e(t||{})))}function W(){return!0}const Y={get:(e,t,n)=>t===l?n:e.get(t),has:(e,t)=>t===l||e.has(t),set:W,deleteProperty:W,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:W,deleteProperty:W}),ownKeys:e=>e.keys()};function K(e){return(e="function"==typeof e?e():e)?e:{}}function Z(){for(let e=0,t=this.length;e<t;++e){const t=this[e]();if(void 0!==t)return t}}function J(...e){let t=!1;for(let n=0;n<e.length;n++){const r=e[n];t=t||!!r&&l in r,e[n]="function"==typeof r?(t=!0,S(r)):r}if(t)return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=K(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in K(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(K(e[n])));return[...new Set(t)]}},Y);const n={},r={},o=new Set;for(let t=e.length-1;t>=0;t--){const i=e[t];if(!i)continue;const a=Object.getOwnPropertyNames(i);for(let e=0,t=a.length;e<t;e++){const t=a[e];if("__proto__"===t||"constructor"===t)continue;const s=Object.getOwnPropertyDescriptor(i,t);if(o.has(t)){const e=r[t];e?s.get?e.push(s.get.bind(i)):void 0!==s.value&&e.push((()=>s.value)):void 0===n[t]&&(n[t]=s.value)}else s.get?(o.add(t),Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:Z.bind(r[t]=[s.get.bind(i)])})):(void 0!==s.value&&o.add(t),n[t]=s.value)}}return n}function X(e,...t){if(l in e){const n=new Set(t.length>1?t.flat():t[0]),r=t.map((t=>new Proxy({get:n=>t.includes(n)?e[n]:void 0,has:n=>t.includes(n)&&n in e,keys:()=>t.filter((t=>t in e))},Y)));return r.push(new Proxy({get:t=>n.has(t)?void 0:e[t],has:t=>!n.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!n.has(e)))},Y)),r}const n={},r=t.map((()=>({})));for(const o of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,o),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let s=!1,l=0;for(const e of t)e.includes(o)&&(s=!0,a?r[l][o]=i.value:Object.defineProperty(r[l],o,i)),++l;s||(a?n[o]=i.value:Object.defineProperty(n,o,i))}return[...r,n]}let Q=0;const ee=e=>`Stale read from <${e}>.`;function te(e){const t="fallback"in e&&{fallback:()=>e.fallback};return S(function(e,t,n={}){let r=[],o=[],i=[],a=0,s=t.length>1?[]:null;return E((()=>G(i))),()=>{let l,d,u=e()||[];return u[c],T((()=>{let e,t,c,h,g,b,f,m,y,v=u.length;if(0===v)0!==a&&(G(i),i=[],r=[],o=[],a=0,s&&(s=[])),n.fallback&&(r=[q],o[0]=x((e=>(i[0]=e,n.fallback()))),a=1);else if(0===a){for(o=new Array(v),d=0;d<v;d++)r[d]=u[d],o[d]=x(p);a=v}else{for(c=new Array(v),h=new Array(v),s&&(g=new Array(v)),b=0,f=Math.min(a,v);b<f&&r[b]===u[b];b++);for(f=a-1,m=v-1;f>=b&&m>=b&&r[f]===u[m];f--,m--)c[m]=o[f],h[m]=i[f],s&&(g[m]=s[f]);for(e=new Map,t=new Array(m+1),d=m;d>=b;d--)y=u[d],l=e.get(y),t[d]=void 0===l?-1:l,e.set(y,d);for(l=b;l<=f;l++)y=r[l],d=e.get(y),void 0!==d&&-1!==d?(c[d]=o[l],h[d]=i[l],s&&(g[d]=s[l]),d=t[d],e.set(y,d)):i[l]();for(d=b;d<v;d++)d in c?(o[d]=c[d],i[d]=h[d],s&&(s[d]=g[d],s[d](d))):o[d]=x(p);o=o.slice(0,a=v),r=u.slice(0)}return o}));function p(e){if(i[d]=e,s){const[e,n]=_(d);return s[d]=n,t(u[d],e)}return t(u[d])}}}((()=>e.each),e.children,t||void 0))}function ne(e){const t=e.keyed,n=S((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return S((()=>{const r=n();if(r){const o=e.children;return"function"==typeof o&&o.length>0?T((()=>o(t?r:()=>{if(!T(n))throw ee("Show");return e.when}))):o}return e.fallback}),void 0,void 0)}function re(e){let t=!1;const n=I((()=>e.children)),r=S((()=>{let e=n();Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++){const r=e[n].when;if(r)return t=!!e[n].keyed,[n,r,e[n]]}return[-1]}),void 0,{equals:(e,n)=>e[0]===n[0]&&(t?e[1]===n[1]:!e[1]==!n[1])&&e[2]===n[2]});return S((()=>{const[n,o,i]=r();if(n<0)return e.fallback;const a=i.children;return"function"==typeof a&&a.length>0?T((()=>a(t?o:()=>{if(T(r)[0]!==n)throw ee("Match");return i.when}))):a}),void 0,void 0)}function oe(e){return e}const ie=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),ae=new Set(["innerHTML","textContent","innerText","children"]),se=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),le=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});const ce=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),de={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};const ue="_$DX_DELEGATE";function pe(e,t,n){let r;const o=()=>{const t=document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:t.content.firstChild},i=t?()=>T((()=>document.importNode(r||(r=o()),!0))):()=>(r||(r=o())).cloneNode(!0);return i.cloneNode=i,i}function he(e,t=window.document){const n=t[ue]||(t[ue]=new Set);for(let r=0,o=e.length;r<o;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,xe))}}function ge(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function be(e,t){null==t?e.removeAttribute("class"):e.className=t}function fe(e,t={},n,r){const o={};return r||k((()=>o.children=_e(e,t.children,o.children))),k((()=>t.ref&&t.ref(e))),k((()=>function(e,t,n,r,o={},i=!1){t||(t={});for(const r in o)if(!(r in t)){if("children"===r)continue;o[r]=we(e,r,null,o[r],n,i)}for(const a in t){if("children"===a){r||_e(e,t.children);continue}const s=t[a];o[a]=we(e,a,s,o[a],n,i)}}(e,t,n,!0,o,!0))),o}function me(e,t,n){return T((()=>e(t,n)))}function ye(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return _e(e,t,r,n);k((r=>_e(e,t(),r,n)),r)}function ve(e,t,n){const r=t.trim().split(/\s+/);for(let t=0,o=r.length;t<o;t++)e.classList.toggle(r[t],n)}function we(e,t,n,r,o,i){let a,s,l,c,d;if("style"===t)return function(e,t,n){if(!t)return n?ge(e,"style"):t;const r=e.style;if("string"==typeof t)return r.cssText=t;let o,i;for(i in"string"==typeof n&&(r.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[i]&&r.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(r.setProperty(i,o),n[i]=o);return n}(e,n,r);if("classList"===t)return function(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let i,a;for(i=0,a=o.length;i<a;i++){const r=o[i];r&&"undefined"!==r&&!t[r]&&(ve(e,r,!1),delete n[r])}for(i=0,a=r.length;i<a;i++){const o=r[i],a=!!t[o];o&&"undefined"!==o&&n[o]!==a&&a&&(ve(e,o,!0),n[o]=a)}return n}(e,n,r);if(n===r)return r;if("ref"===t)i||n(e);else if("on:"===t.slice(0,3)){const o=t.slice(3);r&&e.removeEventListener(o,r),n&&e.addEventListener(o,n)}else if("oncapture:"===t.slice(0,10)){const o=t.slice(10);r&&e.removeEventListener(o,r,!0),n&&e.addEventListener(o,n,!0)}else if("on"===t.slice(0,2)){const o=t.slice(2).toLowerCase(),i=ce.has(o);if(!i&&r){const t=Array.isArray(r)?r[0]:r;e.removeEventListener(o,t)}(i||n)&&(!function(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n)}(e,o,n,i),i&&he([o]))}else if("attr:"===t.slice(0,5))ge(e,t.slice(5),n);else if((d="prop:"===t.slice(0,5))||(l=ae.has(t))||!o&&((c=function(e,t){const n=le[e];return"object"==typeof n?n[t]?n.$:void 0:n}(t,e.tagName))||(s=ie.has(t)))||(a=e.nodeName.includes("-")))d&&(t=t.slice(5),s=!0),"class"===t||"className"===t?be(e,n):!a||s||l?e[c||t]=n:e[(u=t,u.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase())))]=n;else{const r=o&&t.indexOf(":")>-1&&de[t.split(":")[0]];r?function(e,t,n,r){null==r?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}(e,r,t,n):ge(e,se[t]||t,n)}var u;return n}function xe(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>n||document});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(void 0!==o?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function _e(e,t,n,r,o){for(;"function"==typeof n;)n=n();if(t===n)return n;const i=typeof t,a=void 0!==r;if(e=a&&n[0]&&n[0].parentNode||e,"string"===i||"number"===i)if("number"===i&&(t=t.toString()),a){let o=n[0];o&&3===o.nodeType?o.data=t:o=document.createTextNode(t),n=Se(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t;else if(null==t||"boolean"===i)n=Se(e,n,r);else{if("function"===i)return k((()=>{let o=t();for(;"function"==typeof o;)o=o();n=_e(e,o,n,r)})),()=>n;if(Array.isArray(t)){const i=[],s=n&&Array.isArray(n);if(ke(i,t,n,o))return k((()=>n=_e(e,i,n,r,!0))),()=>n;if(0===i.length){if(n=Se(e,n,r),a)return n}else s?0===n.length?$e(e,i,r):function(e,t,n){let r=n.length,o=t.length,i=r,a=0,s=0,l=t[o-1].nextSibling,c=null;for(;a<o||s<i;)if(t[a]!==n[s]){for(;t[o-1]===n[i-1];)o--,i--;if(o===a){const t=i<r?s?n[s-1].nextSibling:n[i-s]:l;for(;s<i;)e.insertBefore(n[s++],t)}else if(i===s)for(;a<o;)c&&c.has(t[a])||t[a].remove(),a++;else if(t[a]===n[i-1]&&n[s]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--i],r),t[o]=n[i]}else{if(!c){c=new Map;let e=s;for(;e<i;)c.set(n[e],e++)}const r=c.get(t[a]);if(null!=r)if(s<r&&r<i){let l,d=a,u=1;for(;++d<o&&d<i&&null!=(l=c.get(t[d]))&&l===r+u;)u++;if(u>r-s){const o=t[a];for(;s<r;)e.insertBefore(n[s++],o)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}else a++,s++}(e,n,i):(n&&Se(e),$e(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=Se(e,n,r,t);Se(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function ke(e,t,n,r){let o=!1;for(let i=0,a=t.length;i<a;i++){let a,s=t[i],l=n&&n[i];if(null==s||!0===s||!1===s);else if("object"==(a=typeof s)&&s.nodeType)e.push(s);else if(Array.isArray(s))o=ke(e,s,l)||o;else if("function"===a)if(r){for(;"function"==typeof s;)s=s();o=ke(e,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||o}else e.push(s),o=!0;else{const t=String(s);l&&3===l.nodeType&&l.data===t?e.push(l):e.push(document.createTextNode(t))}}return o}function $e(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Se(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const t=a.parentNode===e;r||i?t&&a.remove():t?e.replaceChild(o,a):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}const Te="http://www.w3.org/2000/svg";function Ce(e){const{useShadow:t}=e,n=document.createTextNode(""),r=A();let o;return $((()=>{o||(o=function(e,t){const n=b,r=m;b=e,m=null;try{return M(t,!0)}catch(e){F(e)}finally{b=n,m=r}}(r,(()=>S((()=>e.children)))));const i=e.mount||document.body;if(i instanceof HTMLHeadElement){const[e,t]=_(!1),n=()=>t(!0);x((t=>ye(i,(()=>e()?t():o()),null))),E(n)}else{const r=function(e,t=!1){return t?document.createElementNS(Te,e):document.createElement(e)}(e.isSVG?"g":"div",e.isSVG),a=t&&r.attachShadow?r.attachShadow({mode:"open"}):r;Object.defineProperty(r,"_$host",{get:()=>n.parentNode,configurable:!0}),ye(a,o),i.appendChild(r),e.ref&&e.ref(r),E((()=>i.removeChild(r)))}}),void 0,{render:!!!s.context}),n}function Ee(e){return(t,n)=>{const{element:r}=n;return x((o=>{const i=function(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const[o,i]=_(e[t[r]]);Object.defineProperty(n,t[r],{get:o,set(e){i((()=>e))}})}return n}(t);r.addPropertyChangedCallback(((e,t)=>i[e]=t)),r.addReleaseCallback((()=>{r.renderRoot.textContent="",o()}));const a=e(i,n);return ye(r.renderRoot,a)}),function(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&(!t.assignedSlot||!t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}(r))}}function Ae(e,t,n){return 2===arguments.length&&(n=t,t={}),a(e,t)(Ee(n))}const Ie={typebot:void 0,onNewInputBlock:void 0,onAnswer:void 0,onEnd:void 0,onInit:void 0,onNewLogs:void 0,isPreview:void 0,startFrom:void 0,prefilledVariables:void 0,apiHost:void 0,resultId:void 0},Pe={...Ie,onClose:void 0,onOpen:void 0,theme:void 0,autoShowDelay:void 0,isOpen:void 0,defaultOpen:void 0},Re={...Ie,onClose:void 0,onOpen:void 0,theme:void 0,previewMessage:void 0,onPreviewMessageClick:void 0,autoShowDelay:void 0};var Le='/*! tailwindcss v3.3.3 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.-right-1{right:-4px}.-right-2{right:-8px}.-top-2{top:-8px}.bottom-5{bottom:20px}.left-0{left:0}.left-5{left:20px}.right-0{right:0}.right-5{right:20px}.top-0{top:0}.z-10{z-index:10}.z-20{z-index:20}.m-2{margin:8px}.m-auto{margin:auto}.mx-4{margin-left:16px;margin-right:16px}.my-2{margin-bottom:8px;margin-top:8px}.-mr-1{margin-right:-4px}.-mt-1{margin-top:-4px}.mb-3{margin-bottom:12px}.ml-2{margin-left:8px}.mt-1{margin-top:4px}.mt-4{margin-top:16px}.\\!block{display:block!important}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-10{height:40px}.h-2{height:8px}.h-2\\.5{height:10px}.h-3{height:12px}.h-4{height:16px}.h-5{height:20px}.h-6{height:24px}.h-8{height:32px}.h-9{height:36px}.h-\\[80vh\\]{height:80vh}.h-full{height:100%}.max-h-80{max-height:320px}.max-h-\\[464px\\]{max-height:464px}.min-h-full{min-height:100%}.w-10{width:40px}.w-2{width:8px}.w-3{width:12px}.w-4{width:16px}.w-5{width:20px}.w-6{width:24px}.w-8{width:32px}.w-\\[60\\%\\]{width:60%}.w-full{width:100%}.min-w-0{min-width:0}.max-w-\\[256px\\]{max-width:256px}.max-w-full{max-width:100%}.max-w-lg{max-width:512px}.max-w-xs{max-width:320px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}.animate-ping{animation:ping 1s cubic-bezier(0,0,.2,1) infinite}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:4px}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-6{gap:24px}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.text-ellipsis{text-overflow:ellipsis}.whitespace-pre-wrap{white-space:pre-wrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.rounded-md{border-radius:6px}.border{border-width:1px}.border-2{border-width:2px}.border-dashed{border-style:dashed}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219/var(--tw-border-opacity))}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-opacity-50{--tw-bg-opacity:0.5}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-1{padding:4px}.p-2{padding:8px}.p-4{padding:16px}.px-1{padding-left:4px;padding-right:4px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.px-8{padding-left:32px;padding-right:32px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-4{padding-bottom:16px;padding-top:16px}.py-6{padding-bottom:24px;padding-top:24px}.pb-0{padding-bottom:0}.pl-2{padding-left:8px}.pl-4{padding-left:16px}.pr-1{padding-right:4px}.pr-2{padding-right:8px}.pr-4{padding-right:16px}.pt-10{padding-top:40px}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-2xl{font-size:24px;line-height:32px}.text-4xl{font-size:36px;line-height:40px}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-normal{font-weight:400}.font-semibold{font-weight:600}.italic{font-style:italic}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.shadow,.shadow-md{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.blur{--tw-blur:blur(8px)}.blur,.brightness-150{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.brightness-150{--tw-brightness:brightness(1.5)}.brightness-200{--tw-brightness:brightness(2)}.brightness-200,.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--typebot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(2.5)}50%{transform:translateY(-2.5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}a{text-decoration:underline}ol,ul{margin-inline-end:0;margin-inline-start:0;padding-inline-start:40px}ol{list-style-type:decimal}ul{list-style-type:disc}li:not(:last-child){margin-bottom:8px}pre{word-wrap:break-word;max-height:100%;max-width:100%;overflow:auto;overflow-wrap:break-word;white-space:pre-wrap}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:var(--typebot-input-placeholder-color)!important;opacity:1!important}.text-input::placeholder{color:var(--typebot-input-placeholder-color)!important;opacity:1!important}.typebot-container{background-color:var(--typebot-container-bg-color);background-image:var(--typebot-container-bg-image);background-position:50%;background-size:cover;container-type:inline-size;font-family:var(--typebot-container-font-family),-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}.typebot-chat-view{-webkit-backdrop-filter:blur(var(--typebot-chat-container-blur));backdrop-filter:blur(var(--typebot-chat-container-blur));background-color:rgba(var(--typebot-chat-container-bg-rgb),var(--typebot-chat-container-opacity));border-color:rgba(var(--typebot-chat-container-border-rgb),var(--typebot-chat-container-border-opacity));border-width:var(--typebot-chat-container-border-width);box-shadow:var(--typebot-chat-container-box-shadow);color:rgb(var(--typebot-chat-container-color));max-width:var(--typebot-chat-container-max-width);min-height:100%;padding-left:20px;padding-right:20px}@container (min-width: 480px){.typebot-chat-view{border-radius:var(--typebot-chat-container-border-radius);max-height:var(--typebot-chat-container-max-height);min-height:var(--typebot-chat-container-max-height)}}.typebot-button{-webkit-backdrop-filter:blur(var(--typebot-button-blur));backdrop-filter:blur(var(--typebot-button-blur));background-color:rgba(var(--typebot-button-bg-rgb),var(--typebot-button-opacity));border-color:rgba(var(--typebot-button-border-rgb),var(--typebot-button-border-opacity));border-radius:var(--typebot-button-border-radius);border-width:var(--typebot-button-border-width);box-shadow:var(--typebot-button-box-shadow);color:var(--typebot-button-color);transition:all .3s ease}.typebot-selectable{background-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.08));border-color:rgba(var(--typebot-button-border-rgb),calc(var(--selectable-alpha-ratio)*.25));border-radius:var(--typebot-button-border-radius);border-width:var(--typebot-button-border-width);color:rgb(var(--typebot-chat-container-color));transition:all .3s ease}.typebot-selectable:hover{background-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.12));border-color:rgba(var(--typebot-button-border-rgb),calc(var(--selectable-alpha-ratio)*.3))}.typebot-selectable.selected{background-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.18));border-color:rgba(var(--typebot-button-border-rgb),calc(var(--selectable-alpha-ratio)*.35))}.typebot-checkbox{background-color:rgba(var(--typebot-checkbox-bg-rgb));border:1px solid rgba(var(--typebot-button-bg-rgb),var(--typebot-button-opacity));border-radius:var(--typebot-button-border-radius);border-radius:2px;color:var(--typebot-button-color);padding:1px;transition:all .3s ease}.typebot-checkbox.checked{background-color:rgb(var(--typebot-button-bg-rgb))}.typebot-host-bubble{color:var(--typebot-host-bubble-color)}.typebot-host-bubble>.bubble-typing{-webkit-backdrop-filter:blur(var(--typebot-host-bubble-blur));backdrop-filter:blur(var(--typebot-host-bubble-blur));background-color:rgba(var(--typebot-host-bubble-bg-rgb),var(--typebot-host-bubble-opacity));border-color:rgba(var(--typebot-host-bubble-border-rgb),var(--typebot-host-bubble-border-opacity));border-radius:var(--typebot-host-bubble-border-radius);border-width:var(--typebot-host-bubble-border-width);box-shadow:var(--typebot-host-bubble-box-shadow)}.typebot-host-bubble iframe,.typebot-host-bubble img,.typebot-host-bubble video{border-radius:6px}.typebot-guest-bubble{-webkit-backdrop-filter:blur(var(--typebot-guest-bubble-blur));backdrop-filter:blur(var(--typebot-guest-bubble-blur));background-color:rgba(var(--typebot-guest-bubble-bg-rgb),var(--typebot-guest-bubble-opacity));border-color:rgba(var(--typebot-guest-bubble-border-rgb),var(--typebot-guest-bubble-border-opacity));border-radius:var(--typebot-guest-bubble-border-radius);border-width:var(--typebot-guest-bubble-border-width);box-shadow:var(--typebot-guest-bubble-box-shadow);color:var(--typebot-guest-bubble-color)}.typebot-input{-webkit-backdrop-filter:blur(var(--typebot-input-blur));backdrop-filter:blur(var(--typebot-input-blur));background-color:rgba(var(--typebot-input-bg-rgb),var(--typebot-input-opacity));border-color:rgba(var(--typebot-input-border-rgb),var(--typebot-input-border-opacity));border-radius:var(--typebot-input-border-radius);border-width:var(--typebot-input-border-width);box-shadow:var(--typebot-input-box-shadow)}.typebot-input,.typebot-input-error-message{color:var(--typebot-input-color)}.typebot-button>.send-icon{fill:var(--typebot-button-color)}.ping span{background-color:rgb(var(--typebot-button-bg-rgb))}.rating-icon-container svg{stroke:rgb(var(--typebot-button-bg-rgb));fill:var(--typebot-host-bubble-bg-color);height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:rgb(var(--typebot-button-bg-rgb))}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{border-radius:var(--typebot-input-border-radius)}.total-files-indicator,.upload-progress-bar{background-color:rgb(var(--typebot-button-bg-rgb))}.total-files-indicator{color:var(--typebot-button-color);font-size:10px}.typebot-upload-input{border-radius:var(--typebot-input-border-radius);transition:border-color .1s ease-out}.typebot-upload-input.dragging-over{border-color:rgb(var(--typebot-button-bg-rgb))}.secondary-button{background-color:var(--typebot-host-bubble-bg-color);border-radius:var(--typebot-button-border-radius);color:var(--typebot-host-bubble-color)}.typebot-country-select{border-radius:var(--typebot-button-border-radius);color:var(--typebot-input-color)}.typebot-country-select,.typebot-date-input{background-color:var(--typebot-input-bg-color)}.typebot-date-input{color:var(--typebot-input-color);color-scheme:light}.typebot-date-input,.typebot-popup-blocked-toast{border-radius:var(--typebot-input-border-radius)}.typebot-picture-button{background-color:rgb(var(--typebot-button-bg-rgb));border-radius:var(--typebot-button-border-radius);color:var(--typebot-button-color);transition:all .3s ease;width:236px}.typebot-picture-button>img,.typebot-selectable-picture>img{border-radius:var(--typebot-button-border-radius) var(--typebot-button-border-radius) 0 0;height:100%;max-height:200px;min-width:200px;-o-object-fit:cover;object-fit:cover;width:100%}.typebot-picture-button.has-svg>img,.typebot-selectable-picture.has-svg>img{max-height:128px;-o-object-fit:contain;object-fit:contain;padding:1rem}.typebot-selectable-picture{background-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.08));border:1px solid rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.25));border-radius:var(--typebot-button-border-radius);color:rgb(var(--typebot-chat-container-color));transition:all .3s ease;width:236px}.typebot-selectable-picture:hover{background-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.12));border-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.3))}.typebot-selectable-picture.selected{background-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.18));border-color:rgba(var(--typebot-button-bg-rgb),calc(var(--selectable-alpha-ratio)*.35))}select option{background-color:var(--typebot-input-bg-color);color:var(--typebot-input-color)}.typebot-progress-bar-container{background-color:rgba(var(--typebot-progress-bar-bg-rgb),calc(var(--selectable-alpha-ratio)*.12));bottom:var(--typebot-progress-bar-bottom);height:var(--typebot-progress-bar-height);left:0;position:var(--typebot-progress-bar-position);top:var(--typebot-progress-bar-top);width:100%;z-index:42424242}.typebot-progress-bar-container>.typebot-progress-bar{background-color:var(--typebot-progress-bar-color);height:100%;position:absolute;transition:width .25s ease}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.hover\\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9)}.hover\\:brightness-90:hover,.hover\\:brightness-95:hover{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:brightness-95:hover{--tw-brightness:brightness(.95)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:brightness-75:active{--tw-brightness:brightness(.75)}.active\\:brightness-75:active,.active\\:brightness-90:active{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.active\\:brightness-90:active{--tw-brightness:brightness(.9)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:p-0{padding:0}}';const Oe=async e=>{let t;try{const n="string"==typeof e?e:e.url;t=await fetch(n,{method:"string"==typeof e?"GET":e.method,mode:"cors",headers:"string"!=typeof e&&Ne(e.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof e&&Ne(e.body)?JSON.stringify(e.body):void 0});const r=await t.json();if(!t.ok)throw"error"in r?r.error:r;return{data:r,response:t}}catch(e){return console.error(e),{error:e,response:t}}},Ne=e=>null!=e,Me=e=>null==e,Be=e=>null==e||""===e,ze=e=>null!=e&&""!==e,je=e=>e?.startsWith("data:image/svg")||e?.endsWith(".svg"),De=e=>{e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,n,r)=>t+t+n+n+r+r));const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},Ue=e=>(([e,t,n])=>(299*e+587*t+114*n)/1e3>155)(De(e));function Fe(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Fe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function He(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Fe(e))&&(r&&(r+=" "),r+=t);return r}const qe=pe('<svg part="button-icon" viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),Ge=pe('<img part="button-icon" alt="Bubble button icon">'),Ve=pe('<span part="button-icon">'),We=pe('<svg part="button-icon" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),Ye=pe('<img part="button-icon" alt="Bubble button close icon">'),Ke=pe('<button part="button" aria-label="Open chatbot">'),Ze="#0042DA",Je="#27272A",Xe="#fff",Qe=e=>e.startsWith("http")||e.startsWith("data:image/svg+xml"),et=e=>(()=>{const t=Ke();return t.$$click=()=>e.toggleBot(),t.style.setProperty("z-index","42424242"),ye(t,V(ne,{get when(){return Me(e.customIconSrc)},keyed:!0,get children(){const t=qe();return k((n=>{const r=e.iconColor??(Ue(e.backgroundColor??Ze)?Je:Xe),o=He("stroke-2 fill-transparent absolute duration-200 transition w-[60%]",e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100");return r!==n._v$&&(null!=(n._v$=r)?t.style.setProperty("stroke",r):t.style.removeProperty("stroke")),o!==n._v$2&&ge(t,"class",n._v$2=o),n}),{_v$:void 0,_v$2:void 0}),t}}),null),ye(t,V(ne,{get when(){return S((()=>!!e.customIconSrc))()&&Qe(e.customIconSrc)},get children(){const t=Ge();return k((n=>{const r=e.customIconSrc,o=He("duration-200 transition",e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100",je(e.customIconSrc)?"w-[60%]":"w-full h-full",je(e.customIconSrc)?"":"object-cover rounded-full");return r!==n._v$3&&ge(t,"src",n._v$3=r),o!==n._v$4&&be(t,n._v$4=o),n}),{_v$3:void 0,_v$4:void 0}),t}}),null),ye(t,V(ne,{get when(){return S((()=>!!e.customIconSrc))()&&!Qe(e.customIconSrc)},get children(){const t=Ve();return t.style.setProperty("font-family","-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"),ye(t,(()=>e.customIconSrc)),k((()=>be(t,He("text-4xl duration-200 transition",e.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")))),t}}),null),ye(t,V(ne,{get when(){return Me(e.customCloseIconSrc)},get children(){const t=We();return k((n=>{const r=e.iconColor??(Ue(e.backgroundColor??Ze)?Je:Xe),o=He("absolute duration-200 transition w-[60%]",e.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0");return r!==n._v$5&&(null!=(n._v$5=r)?t.style.setProperty("fill",r):t.style.removeProperty("fill")),o!==n._v$6&&ge(t,"class",n._v$6=o),n}),{_v$5:void 0,_v$6:void 0}),t}}),null),ye(t,V(ne,{get when(){return S((()=>!!e.customCloseIconSrc))()&&Qe(e.customCloseIconSrc)},get children(){const t=Ye();return k((n=>{const r=e.customCloseIconSrc,o=He("absolute duration-200 transition",e.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0",je(e.customCloseIconSrc)?"w-[60%]":"w-full h-full",je(e.customCloseIconSrc)?"":"object-cover rounded-full");return r!==n._v$7&&ge(t,"src",n._v$7=r),o!==n._v$8&&be(t,n._v$8=o),n}),{_v$7:void 0,_v$8:void 0}),t}}),null),ye(t,V(ne,{get when(){return S((()=>!!e.customCloseIconSrc))()&&!Qe(e.customCloseIconSrc)},get children(){const t=Ve();return t.style.setProperty("font-family","-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"),ye(t,(()=>e.customCloseIconSrc)),k((()=>be(t,He("absolute text-4xl duration-200 transition",e.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")))),t}}),null),k((n=>{const r=He("fixed bottom-5 shadow-md  rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in","left"===e.placement?" left-5":" right-5"),o=e.backgroundColor??Ze,i=e.buttonSize,a=e.buttonSize;return r!==n._v$9&&be(t,n._v$9=r),o!==n._v$10&&(null!=(n._v$10=o)?t.style.setProperty("background-color",o):t.style.removeProperty("background-color")),i!==n._v$11&&(null!=(n._v$11=i)?t.style.setProperty("width",i):t.style.removeProperty("width")),a!==n._v$12&&(null!=(n._v$12=a)?t.style.setProperty("height",a):t.style.removeProperty("height")),n}),{_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),t})();he(["click"]);const tt=pe('<div part="preview-message"><p>'),nt=pe('<img class="rounded-full w-8 h-8 object-cover" alt="Bot avatar" elementtiming="Bot avatar" fetchpriority="high">'),rt=pe('<button part="preview-message-close-button" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18">'),ot="#F7F8FF",it="#303235",at=e=>{const[t,n]=_(!1),[r,o]=_({x:0,y:0}),i=e=>{o({x:e.touches[0].clientX,y:e.touches[0].clientY})},a=t=>{const n=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY;(Math.abs(n-r().x)>10||i-r().y>10)&&e.onCloseClick(),o({x:0,y:0})};return(()=>{const r=tt(),o=r.firstChild;return r.$$touchend=a,r.$$touchstart=i,r.addEventListener("mouseleave",(()=>n(!1))),r.addEventListener("mouseenter",(()=>n(!0))),r.$$click=()=>e.onClick(),r.style.setProperty("z-index","42424242"),ye(r,V(st,{get isHovered(){return t()},get previewMessageTheme(){return e.previewMessageTheme},get onClick(){return e.onCloseClick}}),o),ye(r,V(ne,{get when(){return e.avatarUrl},keyed:!0,children:e=>(()=>{const t=nt();return ge(t,"src",e),t})()}),o),ye(o,(()=>e.message)),k((t=>{const n="fixed max-w-[256px] rounded-md duration-200 flex items-center gap-4 shadow-md animate-fade-in cursor-pointer hover:shadow-lg p-4"+("left"===e.placement?" left-5":" right-5"),o=e.previewMessageTheme?.backgroundColor??ot,i=e.previewMessageTheme?.textColor??it,a=`calc(${e.buttonSize} + 32px)`;return n!==t._v$&&be(r,t._v$=n),o!==t._v$2&&(null!=(t._v$2=o)?r.style.setProperty("background-color",o):r.style.removeProperty("background-color")),i!==t._v$3&&(null!=(t._v$3=i)?r.style.setProperty("color",i):r.style.removeProperty("color")),a!==t._v$4&&(null!=(t._v$4=a)?r.style.setProperty("bottom",a):r.style.removeProperty("bottom")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r})()},st=e=>(()=>{const t=rt();return t.$$click=t=>(t.stopPropagation(),e.onClick()),k((n=>{const r="absolute -top-2 -right-2 rounded-full w-6 h-6 p-1 hover:brightness-95 active:brightness-90 transition-all border "+(e.isHovered?"opacity-100":"opacity-0"),o=e.previewMessageTheme?.closeButtonBackgroundColor??ot,i=e.previewMessageTheme?.closeButtonIconColor??it;return r!==n._v$5&&be(t,n._v$5=r),o!==n._v$6&&(null!=(n._v$6=o)?t.style.setProperty("background-color",o):t.style.removeProperty("background-color")),i!==n._v$7&&(null!=(n._v$7=i)?t.style.setProperty("color",i):t.style.removeProperty("color")),n}),{_v$5:void 0,_v$6:void 0,_v$7:void 0}),t})();he(["click","touchstart","touchend"]);const lt=pe('<svg viewBox="0 0 800 800" width="16"><rect width="800" height="800" rx="80" fill="#0042DA"></rect><rect x="650" y="293" width="85.4704" height="384.617" rx="20" transform="rotate(90 650 293)" fill="#FF8E20"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M192.735 378.47C216.337 378.47 235.47 359.337 235.47 335.735C235.47 312.133 216.337 293 192.735 293C169.133 293 150 312.133 150 335.735C150 359.337 169.133 378.47 192.735 378.47Z" fill="#FF8E20"></path><rect x="150" y="506.677" width="85.4704" height="384.617" rx="20" transform="rotate(-90 150 506.677)" fill="white"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M607.265 421.206C583.663 421.206 564.53 440.34 564.53 463.942C564.53 487.544 583.663 506.677 607.265 506.677C630.867 506.677 650 487.544 650 463.942C650 440.34 630.867 421.206 607.265 421.206Z" fill="white">'),ct=()=>lt(),dt=pe('<a href="https://www.jtlrgroup.com/?utm_source=litebadge" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span>Made with JTLR'),ut=e=>{let t,n;const r=n=>{n.forEach((n=>{n.removedNodes.forEach((n=>{"id"in n&&t&&"lite-badge"==n.id&&(console.log("Sorry, you can't remove the brand 😅"),e.botContainer?.append(t))}))}))};return C((()=>{document&&e.botContainer&&(n=new MutationObserver(r),n.observe(e.botContainer,{subtree:!1,childList:!0}))})),E((()=>{n&&n.disconnect()})),(()=>{const e=dt(),n=e.firstChild;return"function"==typeof t?me(t,e):t=e,ye(e,V(ct,{}),n),e})()},pt=(e,t)=>"undefined"!=typeof window?window.__ENV?window.__ENV[e]??t:void 0:"undefined"!=typeof process?process.env[e]??t:void 0,ht=({ignoreChatApiUrl:e}={ignoreChatApiUrl:!1})=>{const t=pt("NEXT_PUBLIC_CHAT_API_URL"),n=pt("NEXT_PUBLIC_USE_EXPERIMENTAL_CHAT_API_ON")?.split(",");if(!e&&t&&(!n||n.some((e=>e===window.location.href))))return t;const r=pt("NEXT_PUBLIC_VIEWER_URL")?.split(","),o=r?.find((e=>window.location.href.startsWith(e)));return o??r?.[0]??"https://typebot.io"},gt=()=>sessionStorage.getItem("typebotPaymentInProgress"),bt=()=>{sessionStorage.removeItem("typebotPaymentInProgress")};class ft extends Error{constructor(e,t,n){const r=`${e.status||0===e.status?e.status:""} ${e.statusText||""}`.trim();super(`Request failed with ${r?`status code ${r}`:"an unknown error"}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=e,this.request=t,this.options=n}}class mt extends Error{constructor(e){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=e}}const yt=e=>null!==e&&"object"==typeof e,vt=(...e)=>{for(const t of e)if((!yt(t)||Array.isArray(t))&&void 0!==t)throw new TypeError("The `options` argument must be an object");return xt({},...e)},wt=(e={},t={})=>{const n=new globalThis.Headers(e),r=t instanceof globalThis.Headers,o=new globalThis.Headers(t);for(const[e,t]of o.entries())r&&"undefined"===t||void 0===t?n.delete(e):n.set(e,t);return n},xt=(...e)=>{let t={},n={};for(const r of e)if(Array.isArray(r))Array.isArray(t)||(t=[]),t=[...t,...r];else if(yt(r)){for(let[e,n]of Object.entries(r))yt(n)&&e in t&&(n=xt(t[e],n)),t={...t,[e]:n};yt(r.headers)&&(n=wt(n,r.headers),t.headers=n)}return t},_t=(()=>{let e=!1,t=!1;const n="function"==typeof globalThis.ReadableStream,r="function"==typeof globalThis.Request;return n&&r&&(t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")),e&&!t})(),kt="function"==typeof globalThis.AbortController,$t="function"==typeof globalThis.ReadableStream,St="function"==typeof globalThis.FormData,Tt=["get","post","put","patch","head","delete"],Ct={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},Et=2147483647,At=Symbol("stop"),It={json:!0,parseJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},Pt={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0},Rt=e=>Tt.includes(e)?e.toUpperCase():e,Lt=[413,429,503],Ot={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Lt,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},Nt=(e={})=>{if("number"==typeof e)return{...Ot,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...Ot,...e,afterStatusCodes:Lt}};class Mt{static create(e,t){const n=new Mt(e,t),r=async()=>{if("number"==typeof n._options.timeout&&n._options.timeout>Et)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let e=await n._fetch();for(const t of n._options.hooks.afterResponse){const r=await t(n.request,n._options,n._decorateResponse(e.clone()));r instanceof globalThis.Response&&(e=r)}if(n._decorateResponse(e),!e.ok&&n._options.throwHttpErrors){let t=new ft(e,n.request,n._options);for(const e of n._options.hooks.beforeError)t=await e(t);throw t}if(n._options.onDownloadProgress){if("function"!=typeof n._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!$t)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return n._stream(e.clone(),n._options.onDownloadProgress)}return e},o=n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(r):r();for(const[e,r]of Object.entries(Ct))o[e]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||r);const i=(await o).clone();if("json"===e){if(204===i.status)return"";if(0===(await i.clone().arrayBuffer()).byteLength)return"";if(t.parseJson)return t.parseJson(await i.text())}return i[e]()};return o}constructor(e,t={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=e,this._options={credentials:this._input.credentials||"same-origin",...t,headers:wt(this._input.headers,t.headers),hooks:xt({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:Rt(t.method??this._input.method),prefixUrl:String(t.prefixUrl||""),retry:Nt(t.retry),throwHttpErrors:!1!==t.throwHttpErrors,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(kt){if(this.abortController=new globalThis.AbortController,this._options.signal){const e=this._options.signal;this._options.signal.addEventListener("abort",(()=>{this.abortController.abort(e.reason)}))}this._options.signal=this.abortController.signal}if(_t&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const e="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),t=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,e);!(St&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(t,{...this.request}),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(e instanceof mt)){if(e instanceof ft){if(!this._options.retry.statusCodes.includes(e.response.status))return 0;const t=e.response.headers.get("Retry-After");if(t&&this._options.retry.afterStatusCodes.includes(e.response.status)){let e=Number(t);return Number.isNaN(e)?e=Date.parse(t)-Date.now():e*=1e3,void 0!==this._options.retry.maxRetryAfter&&e>this._options.retry.maxRetryAfter?0:e}if(413===e.response.status)return 0}const t=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,t)}return 0}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(t){const n=Math.min(this._calculateRetryDelay(t),Et);if(0!==n&&this._retryCount>0){await async function(e,{signal:t}){return new Promise(((n,r)=>{function o(){clearTimeout(i),r(t.reason)}t&&(t.throwIfAborted(),t.addEventListener("abort",o,{once:!0}));const i=setTimeout((()=>{t?.removeEventListener("abort",o),n()}),e)}))}(n,{signal:this._options.signal});for(const e of this._options.hooks.beforeRetry){if(await e({request:this.request,options:this._options,error:t,retryCount:this._retryCount})===At)return}return this._retry(e)}throw t}}async _fetch(){for(const e of this._options.hooks.beforeRequest){const t=await e(this.request,this._options);if(t instanceof Request){this.request=t;break}if(t instanceof Response)return t}const e=((e,t)=>{const n={};for(const r in t)r in Pt||r in It||r in e||(n[r]=t[r]);return n})(this.request,this._options);return!1===this._options.timeout?this._options.fetch(this.request.clone(),e):async function(e,t,n,r){return new Promise(((o,i)=>{const a=setTimeout((()=>{n&&n.abort(),i(new mt(e))}),r.timeout);r.fetch(e,t).then(o).catch(i).then((()=>{clearTimeout(a)}))}))}(this.request.clone(),e,this.abortController,this._options)}_stream(e,t){const n=Number(e.headers.get("content-length"))||0;let r=0;return 204===e.status?(t&&t({percent:1,totalBytes:n,transferredBytes:r},new Uint8Array),new globalThis.Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const i=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array),await async function e(){const{done:a,value:s}=await i.read();if(a)o.close();else{if(t){r+=s.byteLength;t({percent:0===n?0:r/n,transferredBytes:r,totalBytes:n},s)}o.enqueue(s),await e()}}()}}),{status:e.status,statusText:e.statusText,headers:e.headers})}}
/*! MIT License © Sindre Sorhus */const Bt=e=>{const t=(t,n)=>Mt.create(t,vt(e,n));for(const n of Tt)t[n]=(t,r)=>Mt.create(t,vt(e,r,{method:n}));return t.create=e=>Bt(vt(e)),t.extend=t=>Bt(vt(e,t)),t.stop=At,t};var zt=Bt();const[jt,Dt]=_(),Ut=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px" color="white"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">'),Ft=e=>(()=>{const t=Ut();return fe(t,e,!0,!0),t})(),Ht=pe('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),qt=e=>(()=>{const t=Ht();return fe(t,J(e,{get class(){return"animate-spin h-6 w-6 "+e.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),t})(),Gt=pe("<button>"),Vt=e=>{const t=I((()=>e.children)),[n,r]=X(e,["disabled","class"]);return(()=>{const o=Gt();return fe(o,J(r,{get disabled(){return e.isDisabled||e.isLoading},get class(){return"py-2 px-4 font-semibold focus:outline-none filter hover:brightness-90 active:brightness-75 disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 flex justify-center"+("secondary"===e.variant?" secondary-button":" typebot-button")+" "+n.class}}),!1,!0),ye(o,V(ne,{get when(){return!e.isLoading},get fallback(){return V(qt,{})},get children(){return t()}})),o})()},Wt=e=>{const[t,n]=X(e,["disableIcon"]);return V(Vt,J({type:"submit"},n,{get children(){return S((()=>!!(jt()&&!t.disableIcon||!e.children||"string"==typeof e.children&&Be(e.children))))()?V(Ft,{get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}}):e.children}}))},Yt=pe('<div class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bubble1"></div><div class="w-2 h-2 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">'),Kt=()=>Yt(),Zt=pe('<input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input" type="text">'),Jt=e=>{const[t,n]=X(e,["ref","onInput"]);return(()=>{const r=Zt();r.$$input=e=>t.onInput(e.currentTarget.value);const o=e.ref;return"function"==typeof o?me(o,r):e.ref=r,r.style.setProperty("font-size","16px"),fe(r,n,!1,!1),r})()};he(["input"]);const Xt=pe('<textarea class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input" rows="6" data-testid="textarea" required>'),Qt=e=>{const[t,n]=X(e,["ref","onInput"]);return(()=>{const e=Xt();e.$$input=e=>t.onInput(e.currentTarget.value);const r=t.ref;return"function"==typeof r?me(r,e):t.ref=e,e.style.setProperty("font-size","16px"),fe(e,J({get autofocus(){return!jt()}},n),!1,!1),e})()};he(["input"]);const en=!0,tn=pe('<div><div class="flex w-full items-center"><div class="flex relative z-10 items-start typebot-host-bubble max-w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing z-10 "></div><audio controls>');let nn;const rn=e=>{let t,n,r=!1;const[o,i]=_(!!e.onTransitionEnd);return C((()=>{nn=setTimeout((()=>{r||(r=!0,i(!1),setTimeout((()=>e.onTransitionEnd?.(t)),400))}),100)})),E((()=>{nn&&clearTimeout(nn)})),(()=>{const r=tn(),i=r.firstChild.firstChild.firstChild,a=i.nextSibling;"function"==typeof t?me(t,r):t=r,ye(i,(()=>{const e=S((()=>!!o()));return()=>e()&&V(Kt,{})})());return"function"==typeof n?me(n,a):n=a,k((t=>{const n=He("flex flex-col",e.onTransitionEnd?"animate-fade-in":void 0),s=o()?"64px":"100%",l=o()?"32px":"100%",c=e.content?.url,d=!!e.onTransitionEnd&&(e.content?.isAutoplayEnabled??en),u="z-10 text-fade-in "+(o()?"opacity-0":"opacity-100 m-2"),p=o()?jt()?"32px":"36px":"revert";return n!==t._v$&&be(r,t._v$=n),s!==t._v$2&&(null!=(t._v$2=s)?i.style.setProperty("width",s):i.style.removeProperty("width")),l!==t._v$3&&(null!=(t._v$3=l)?i.style.setProperty("height",l):i.style.removeProperty("height")),c!==t._v$4&&ge(a,"src",t._v$4=c),d!==t._v$5&&(a.autoplay=t._v$5=d),u!==t._v$6&&be(a,t._v$6=u),p!==t._v$7&&(null!=(t._v$7=p)?a.style.setProperty("height",p):a.style.removeProperty("height")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),r})()},on=400,an=pe('<div><div class="flex w-full items-center"><div class="flex relative z-10 items-start typebot-host-bubble w-full max-w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing z-10 "></div><div><iframe id="embed-bubble-content" class="w-full h-full ">');let sn;const ln=e=>{let t;const[n,r]=_(!!e.onTransitionEnd);return C((()=>{sn=setTimeout((()=>{r(!1),setTimeout((()=>{e.onTransitionEnd?.(t)}),400)}),2e3)})),E((()=>{sn&&clearTimeout(sn)})),(()=>{const r=an(),o=r.firstChild.firstChild.firstChild,i=o.nextSibling,a=i.firstChild;return"function"==typeof t?me(t,r):t=r,ye(o,(()=>{const e=S((()=>!!n()));return()=>e()&&V(Kt,{})})()),k((t=>{const s=He("flex flex-col w-full",e.onTransitionEnd?"animate-fade-in":void 0),l=n()?"64px":"100%",c=n()?"32px":"100%",d=He("p-4 z-20 text-fade-in w-full",n()?"opacity-0":"opacity-100 p-4"),u=n()?jt()?"32px":"36px":`${e.content?.height??on}px`,p=e.content?.url;return s!==t._v$&&be(r,t._v$=s),l!==t._v$2&&(null!=(t._v$2=l)?o.style.setProperty("width",l):o.style.removeProperty("width")),c!==t._v$3&&(null!=(t._v$3=c)?o.style.setProperty("height",c):o.style.removeProperty("height")),d!==t._v$4&&be(i,t._v$4=d),u!==t._v$5&&(null!=(t._v$5=u)?i.style.setProperty("height",u):i.style.removeProperty("height")),p!==t._v$6&&ge(a,"src",t._v$6=p),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),r})()},cn=Object.getPrototypeOf((async function(){})).constructor,dn=async({content:e,args:t})=>{try{const n=cn(...t.map((e=>e.id)),un(e));await n(...t.map((e=>e.value)))}catch(e){console.warn("Script threw an error:",e)}},un=e=>e.replace(/<script>/g,"").replace(/<\/script>/g,""),pn=async({args:e,content:t})=>{try{const n=cn(...Object.keys(e),t);await n(...Object.keys(e).map((t=>e[t])))}catch(e){console.warn("Script threw an error:",e)}},[hn,gn]=_("100%"),bn=pe('<div><div class="flex w-full items-center"><div class="flex relative z-10 items-start typebot-host-bubble w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing z-10 "></div><div><div class="w-full overflow-y-auto">');let fn;const mn=e=>{let t;const[n,r]=_(!!e.onTransitionEnd);let o;return C((()=>{pn({args:{...e.content.initFunction.args,typebotElement:o},content:e.content.initFunction.content}),e.content.waitForEventFunction&&pn({args:{...e.content.waitForEventFunction.args,continueFlow:e.onCompleted},content:e.content.waitForEventFunction.content}),fn=setTimeout((()=>{r(!1),setTimeout((()=>e.onTransitionEnd?.(t)),400)}),2e3)})),E((()=>{fn&&clearTimeout(fn)})),(()=>{const r=bn(),i=r.firstChild.firstChild,a=i.firstChild,s=a.nextSibling,l=s.firstChild;"function"==typeof t?me(t,r):t=r,ye(a,(()=>{const e=S((()=>!!n()));return()=>e()&&V(Kt,{})})());return"function"==typeof o?me(o,l):o=l,k((t=>{const o=He("flex flex-col w-full",e.onTransitionEnd?"animate-fade-in":void 0),c=e.content.maxBubbleWidth?`${e.content.maxBubbleWidth}px`:"100%",d=n()?"64px":"100%",u=n()?"32px":"100%",p=He("p-2 z-20 text-fade-in w-full",n()?"opacity-0":"opacity-100"),h=n()?jt()?"32px":"36px":void 0,g=`calc(${hn()} - 100px)`;return o!==t._v$&&be(r,t._v$=o),c!==t._v$2&&(null!=(t._v$2=c)?i.style.setProperty("max-width",c):i.style.removeProperty("max-width")),d!==t._v$3&&(null!=(t._v$3=d)?a.style.setProperty("width",d):a.style.removeProperty("width")),u!==t._v$4&&(null!=(t._v$4=u)?a.style.setProperty("height",u):a.style.removeProperty("height")),p!==t._v$5&&be(s,t._v$5=p),h!==t._v$6&&(null!=(t._v$6=h)?s.style.setProperty("height",h):s.style.removeProperty("height")),g!==t._v$7&&(null!=(t._v$7=g)?l.style.setProperty("max-height",g):l.style.removeProperty("max-height")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),r})()},yn={alt:"Bubble image"},vn=pe('<img elementtiming="Bubble image" fetchpriority="high">'),wn=pe('<div><div class="flex w-full items-center"><div class="flex relative z-10 items-start typebot-host-bubble max-w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing z-10 ">'),xn=pe('<a target="_blank">'),_n=pe("<figure>");let kn;const $n=e=>{let t,n;const[r,o]=_(!!e.onTransitionEnd),i=()=>{r()&&(o(!1),setTimeout((()=>{e.onTransitionEnd?.(t)}),400))};C((()=>{n&&(kn=setTimeout(i,5e3),n.onload=()=>{clearTimeout(kn),i()})})),E((()=>{kn&&clearTimeout(kn)}));const a=(()=>{const t=vn();return"function"==typeof n?me(n,t):n=t,t.style.setProperty("max-height","512px"),k((n=>{const o=e.content?.url,i=e.content?.clickLink?.alt??yn.alt,a=He(r()?"opacity-0":"opacity-100",e.onTransitionEnd?"text-fade-in":void 0,e.content?.url?.endsWith(".svg")?"w-full":void 0),s=r()?"32px":"auto";return o!==n._v$&&ge(t,"src",n._v$=o),i!==n._v$2&&ge(t,"alt",n._v$2=i),a!==n._v$3&&be(t,n._v$3=a),s!==n._v$4&&(null!=(n._v$4=s)?t.style.setProperty("height",s):t.style.removeProperty("height")),n}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})();return(()=>{const n=wn(),o=n.firstChild.firstChild,i=o.firstChild;return"function"==typeof t?me(t,n):t=n,ye(i,(()=>{const e=S((()=>!!r()));return()=>e()?V(Kt,{}):null})()),ye(o,(()=>{const t=S((()=>!!e.content?.clickLink));return()=>t()?(()=>{const t=xn();return ye(t,a),k((n=>{const o=e.content.clickLink.url,i=He("z-10",r()?"h-8":"p-4");return o!==n._v$8&&ge(t,"href",n._v$8=o),i!==n._v$9&&be(t,n._v$9=i),n}),{_v$8:void 0,_v$9:void 0}),t})():(()=>{const e=_n();return ye(e,a),k((()=>be(e,He("z-10",!r()&&"p-4",r()?jt()?"h-8":"h-9":"")))),e})()})(),null),k((t=>{const o=He("flex flex-col",e.onTransitionEnd?"animate-fade-in":void 0),a=r()?"64px":"100%",s=r()?"32px":"100%";return o!==t._v$5&&be(n,t._v$5=o),a!==t._v$6&&(null!=(t._v$6=a)?i.style.setProperty("width",a):i.style.removeProperty("width")),s!==t._v$7&&(null!=(t._v$7=s)?i.style.setProperty("height",s):i.style.removeProperty("height")),t}),{_v$5:void 0,_v$6:void 0,_v$7:void 0}),n})()},Sn=pe("<br>"),Tn=pe("<span>"),Cn=e=>(()=>{const t=Tn();return ye(t,(()=>e.text),null),ye(t,V(ne,{get when(){return S((()=>!!e.isUniqueChild))()&&Be(e.text)},get children(){return Sn()}}),null),k((()=>be(t,((e,t,n)=>{let r="";return e&&(r+="slate-bold"),t&&(r+=" slate-italic"),n&&(r+=" slate-underline"),r})(e.bold,e.italic,e.underline)))),t})(),En=pe('<a target="_blank" rel="noopener noreferrer">'),An=pe("<ol>"),In=pe("<ul>"),Pn=pe("<li>"),Rn=pe("<span>"),Ln=pe("<div>"),On=e=>V(re,{get children(){return[V(oe,{get when(){return Ne(e.element.text)},get children(){return V(Cn,J((()=>e.element),{get isUniqueChild(){return e.isUniqueChild??!1}}))}}),V(oe,{when:!0,get children(){return V(re,{get children(){return[V(oe,{get when(){return"a"===e.element.type},get children(){const t=En();return ye(t,V(te,{get each(){return e.element.children},children:t=>V(On,{element:t,get isUniqueChild(){return 1===e.element.children?.length}})})),k((()=>ge(t,"href",e.element.url))),t}}),V(oe,{get when(){return"ol"===e.element.type},get children(){const t=An();return ye(t,V(te,{get each(){return e.element.children},children:t=>V(On,{element:t,get isUniqueChild(){return 1===e.element.children?.length}})})),t}}),V(oe,{get when(){return"ul"===e.element.type},get children(){const t=In();return ye(t,V(te,{get each(){return e.element.children},children:t=>V(On,{element:t,get isUniqueChild(){return 1===e.element.children?.length}})})),t}}),V(oe,{get when(){return"li"===e.element.type},get children(){const t=Pn();return ye(t,V(te,{get each(){return e.element.children},children:t=>V(On,{element:t,get isUniqueChild(){return 1===e.element.children?.length}})})),t}}),V(oe,{when:!0,get children(){return V(Nn,{get element(){return e.element},get insideInlineVariable(){return e.insideInlineVariable??!1},get children(){return V(te,{get each(){return e.element.children},children:t=>V(On,{element:t,get isUniqueChild(){return 1===e.element.children?.length},get insideInlineVariable(){return"inline-variable"===e.element.type}})})}})}})]}})}})]}}),Nn=e=>V(re,{get children(){return[V(oe,{get when(){return"inline-variable"===e.element.type||e.insideInlineVariable},get children(){const t=Rn();return ye(t,(()=>e.children)),k((()=>ge(t,"data-element-type",e.element.type))),t}}),V(oe,{when:!0,get children(){const t=Ln();return ye(t,(()=>e.children)),k((()=>ge(t,"data-element-type",e.element.type))),t}})]}}),Mn=e=>e.map((e=>e.text??Mn(e.children))).join(""),Bn={isInputPrefillEnabled:!1,isHideQueryParamsEnabled:!0,isNewResultOnRefreshEnabled:!0,rememberUser:{isEnabled:!1,storage:"session"},isBrandingEnabled:!1,isTypingEmulationEnabled:!0},zn={enabled:!0,speed:400,maxDelay:3,delayBetweenBubbles:0,isDisabledOnFirstMessage:!0},jn=pe('<div><div class="flex w-full items-center"><div class="flex relative items-start typebot-host-bubble max-w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing " data-testid="host-bubble"></div><div>');let Dn;const Un=e=>{let t;const[n,r]=_(!!e.onTransitionEnd),o=()=>{n()&&(r(!1),setTimeout((()=>{e.onTransitionEnd?.(t)}),400))};return C((()=>{if(!n)return;const t=e.content?.richText?Mn(e.content.richText):"",r=!1===e.typingEmulation?.enabled||e.isTypingSkipped?0:(({bubbleContent:e,typingSettings:t})=>{let n=e.match(/(\w+)/g)?.length??0;0===n&&(n=e.length);const{enabled:r,speed:o,maxDelay:i}={enabled:t?.enabled??zn.enabled,speed:t?.speed??zn.speed,maxDelay:t?.maxDelay??zn.maxDelay};let a=r?n/o*6e4:0;return a>1e3*i&&(a=1e3*i),a})({bubbleContent:t,typingSettings:e.typingEmulation});Dn=setTimeout(o,r)})),E((()=>{Dn&&clearTimeout(Dn)})),(()=>{const r=jn(),o=r.firstChild.firstChild.firstChild,i=o.nextSibling;return"function"==typeof t?me(t,r):t=r,ye(o,(()=>{const e=S((()=>!!n()));return()=>e()&&V(Kt,{})})()),ye(i,V(te,{get each(){return e.content?.richText},children:e=>V(On,{element:e})})),k((t=>{const a=He("flex flex-col",e.onTransitionEnd?"animate-fade-in":void 0),s=n()?"64px":"100%",l=n()?"32px":"100%",c=He("overflow-hidden text-fade-in mx-4 my-2 whitespace-pre-wrap slate-html-container relative text-ellipsis",n()?"opacity-0":"opacity-100"),d=n()?jt()?"16px":"20px":"100%";return a!==t._v$&&be(r,t._v$=a),s!==t._v$2&&(null!=(t._v$2=s)?o.style.setProperty("width",s):o.style.removeProperty("width")),l!==t._v$3&&(null!=(t._v$3=l)?o.style.setProperty("height",l):o.style.removeProperty("height")),c!==t._v$4&&be(i,t._v$4=c),d!==t._v$5&&(null!=(t._v$5=d)?i.style.setProperty("height",d):i.style.removeProperty("height")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),r})()};let Fn=function(e){return e.URL="url",e.YOUTUBE="youtube",e.VIMEO="vimeo",e.TIKTOK="tiktok",e.GUMLET="gumlet",e}({});const Hn=[Fn.YOUTUBE,Fn.VIMEO,Fn.TIKTOK,Fn.GUMLET],qn=400,Gn="100%",Vn={[Fn.VIMEO]:"https://player.vimeo.com/video",[Fn.YOUTUBE]:"https://www.youtube.com/embed",[Fn.TIKTOK]:"https://www.tiktok.com/embed/v2",[Fn.GUMLET]:"https://play.gumlet.io/embed"},Wn=pe("<video controls>"),Yn=pe('<div><iframe class="w-full h-full" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>'),Kn=pe('<div><div class="flex w-full items-center"><div class="flex relative z-10 items-start typebot-host-bubble overflow-hidden w-full max-w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing z-10 ">');let Zn;const Jn=e=>{let t;const[n,r]=_(!!e.onTransitionEnd);return C((()=>{const o=e.content?.type&&Hn.includes(e.content?.type)?2e3:100;Zn=setTimeout((()=>{n()&&(r(!1),setTimeout((()=>{e.onTransitionEnd?.(t)}),400))}),o)})),E((()=>{Zn&&clearTimeout(Zn)})),(()=>{const r=Kn(),o=r.firstChild.firstChild,i=o.firstChild;return"function"==typeof t?me(t,r):t=r,ye(i,(()=>{const e=S((()=>!!n()));return()=>e()&&V(Kt,{})})()),ye(o,V(re,{get children(){return[V(oe,{get when(){return e.content?.type&&e.content.type===Fn.URL},get children(){const t=Wn();return k((r=>{const o=!e.onTransitionEnd,i=e.content?.url,a="p-4 focus:outline-none w-full z-10 text-fade-in rounded-md "+(n()?"opacity-0":"opacity-100"),s=n()?jt()?"32px":"36px":"auto",l=e.content?.aspectRatio,c=e.content?.maxWidth??Gn;return o!==r._v$&&(t.autoplay=r._v$=o),i!==r._v$2&&ge(t,"src",r._v$2=i),a!==r._v$3&&be(t,r._v$3=a),s!==r._v$4&&(null!=(r._v$4=s)?t.style.setProperty("height",s):t.style.removeProperty("height")),l!==r._v$5&&(null!=(r._v$5=l)?t.style.setProperty("aspect-ratio",l):t.style.removeProperty("aspect-ratio")),c!==r._v$6&&(null!=(r._v$6=c)?t.style.setProperty("max-width",c):t.style.removeProperty("max-width")),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),t}}),V(oe,{get when(){return S((()=>!!e.content?.type))()&&Hn.includes(e.content.type)},get children(){const t=Yn(),r=t.firstChild;return k((o=>{const i=He("p-4 z-10 text-fade-in w-full",n()?"opacity-0":"opacity-100 p-4"),a=n()?jt()?"32px":"36px":e.content?.aspectRatio?void 0:`${e.content?.height??qn}px`,s=e.content?.aspectRatio,l=e.content?.maxWidth??Gn,c=`${Vn[e.content?.type]}/${e.content?.id}`;return i!==o._v$7&&be(t,o._v$7=i),a!==o._v$8&&(null!=(o._v$8=a)?t.style.setProperty("height",a):t.style.removeProperty("height")),s!==o._v$9&&(null!=(o._v$9=s)?t.style.setProperty("aspect-ratio",s):t.style.removeProperty("aspect-ratio")),l!==o._v$10&&(null!=(o._v$10=l)?t.style.setProperty("max-width",l):t.style.removeProperty("max-width")),c!==o._v$11&&ge(r,"src",o._v$11=c),o}),{_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0}),t}})]}}),null),k((t=>{const o=He("flex flex-col w-full",e.onTransitionEnd?"animate-fade-in":void 0),a=n()?"64px":"100%",s=n()?"32px":"100%",l=e.content?.maxWidth??Gn;return o!==t._v$12&&be(r,t._v$12=o),a!==t._v$13&&(null!=(t._v$13=a)?i.style.setProperty("width",a):i.style.removeProperty("width")),s!==t._v$14&&(null!=(t._v$14=s)?i.style.setProperty("height",s):i.style.removeProperty("height")),l!==t._v$15&&(null!=(t._v$15=l)?i.style.setProperty("max-width",l):i.style.removeProperty("max-width")),t}),{_v$12:void 0,_v$13:void 0,_v$14:void 0,_v$15:void 0}),r})()};let Xn=function(e){return e.TEXT="text",e.IMAGE="image",e.VIDEO="video",e.EMBED="embed",e.AUDIO="audio",e}({});const Qn=e=>V(re,{get children(){return[V(oe,{get when(){return e.message.type===Xn.TEXT},get children(){return V(Un,{get content(){return e.message.content},get isTypingSkipped(){return e.isTypingSkipped},get typingEmulation(){return e.typingEmulation},get onTransitionEnd(){return e.onTransitionEnd}})}}),V(oe,{get when(){return e.message.type===Xn.IMAGE},get children(){return V($n,{get content(){return e.message.content},get onTransitionEnd(){return e.onTransitionEnd}})}}),V(oe,{get when(){return e.message.type===Xn.VIDEO},get children(){return V(Jn,{get content(){return e.message.content},get onTransitionEnd(){return e.onTransitionEnd}})}}),V(oe,{get when(){return e.message.type===Xn.EMBED},get children(){return V(ln,{get content(){return e.message.content},get onTransitionEnd(){return e.onTransitionEnd}})}}),V(oe,{get when(){return"custom-embed"===e.message.type},get children(){return V(mn,{get content(){return e.message.content},get onTransitionEnd(){return e.onTransitionEnd},get onCompleted(){return e.onCompleted}})}}),V(oe,{get when(){return e.message.type===Xn.AUDIO},get children(){return V(rn,{get content(){return e.message.content},get onTransitionEnd(){return e.onTransitionEnd}})}})]}}),er=pe('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">'),tr=()=>(()=>{const e=er(),t=e.firstChild;return k((n=>{const r="flex justify-center items-center rounded-full text-white relative "+(jt()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),o="absolute top-0 left-0 "+(jt()?" w-6 h-6 text-sm":"w-full h-full text-xl");return r!==n._v$&&be(e,n._v$=r),o!==n._v$2&&ge(t,"class",n._v$2=o),n}),{_v$:void 0,_v$2:void 0}),e})(),nr=pe('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full" elementtiming="Bot avatar" fetchpriority="high">'),rr=e=>{const[t,n]=_(e.initialAvatarSrc);return $((()=>{!t()?.startsWith("{{")&&t()||!e.initialAvatarSrc?.startsWith("http")||n(e.initialAvatarSrc)})),V(ne,{get when(){return ze(t())},keyed:!0,get fallback(){return V(tr,{})},get children(){const e=nr(),n=e.firstChild;return k((r=>{const o="flex justify-center items-center rounded-full text-white relative animate-fade-in flex-shrink-0 "+(jt()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),i=t();return o!==r._v$&&be(e,r._v$=o),i!==r._v$2&&ge(n,"src",r._v$2=i),r}),{_v$:void 0,_v$2:void 0}),e}})},or=pe('<div class="flex justify-end items-end animate-fade-in gap-2 guest-container"><span class="px-4 py-2 whitespace-pre-wrap max-w-full typebot-guest-bubble" data-testid="guest-bubble">'),ir=e=>(()=>{const t=or(),n=t.firstChild;return t.style.setProperty("margin-left","50px"),ye(n,(()=>e.message)),ye(t,V(ne,{get when(){return e.showAvatar},get children(){return V(rr,{get initialAvatarSrc(){return e.avatarSrc}})}}),null),t})(),ar="Send";let sr=function(e){return e.TEXT="text input",e.NUMBER="number input",e.EMAIL="email input",e.URL="url input",e.DATE="date input",e.PHONE="phone number input",e.CHOICE="choice input",e.PICTURE_CHOICE="picture choice input",e.PAYMENT="payment input",e.RATING="rating input",e.FILE="file input",e}({});const lr={button:ar,placeholder:"Type your answer..."},cr=pe('<div data-testid="input">'),dr=e=>{const[t,n]=_(e.defaultValue??"");let r;const o=e=>n(e),i=()=>{""!==r?.value&&r?.reportValidity()?e.onSubmit({value:r?.value??t()}):r?.focus()},a=t=>{e.block.options?.isLong||"Enter"===t.key&&i()},s=t=>{e.block.options?.isLong&&"Enter"===t.key&&(t.metaKey||t.ctrlKey)&&i()};C((()=>{!jt()&&r&&r.focus({preventScroll:!0}),window.addEventListener("message",l)})),E((()=>{window.removeEventListener("message",l)}));const l=e=>{const{data:t}=e;t.isFromTypebot&&"setInputValue"===t.command&&n(t.value)};return(()=>{const n=cr();return n.$$keydown=a,ye(n,(()=>{const n=S((()=>!!e.block.options?.isLong));return()=>n()?V(Qt,{ref(e){"function"==typeof r?r(e):r=e},onInput:o,onKeyDown:s,get value(){return t()},get placeholder(){return e.block.options?.labels?.placeholder??lr.placeholder}}):V(Jt,{ref(e){"function"==typeof r?r(e):r=e},onInput:o,get value(){return t()},get placeholder(){return e.block.options?.labels?.placeholder??lr.placeholder}})})(),null),ye(n,V(Wt,{type:"button",class:"my-2 ml-2","on:click":i,get children(){return e.block.options?.labels?.button}}),null),k((t=>{const r=He("flex justify-between pr-2 typebot-input w-full",e.block.options?.isLong?"items-end":"items-center"),o=e.block.options?.isLong?void 0:"350px";return r!==t._v$&&be(n,t._v$=r),o!==t._v$2&&(null!=(t._v$2=o)?n.style.setProperty("max-width",o):n.style.removeProperty("max-width")),t}),{_v$:void 0,_v$2:void 0}),n})()};he(["keydown"]);const ur={button:ar,placeholder:"Type a number..."},pr=pe('<div class="flex items-end justify-between pr-2 typebot-input w-full" data-testid="input"><input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input" type="number">'),hr=e=>{const[t,n]=_(e.defaultValue??""),[r,o,i]=[T(a=()=>t()),function(e){$((function(){const t=a();if(null==t)return void(e.value=t);const n=e.value;(0===t&&""===n||t!=n)&&(e.value=t+"")}))},function(e){return e.validity.badInput?a():""!=e.value?e.valueAsNumber:void 0}];var a;let s;const l=()=>{""!==s?.value&&s?.reportValidity()?e.onSubmit({value:s?.value??t().toString()}):s?.focus()},c=e=>{"Enter"===e.key&&l()};C((()=>{!jt()&&s&&s.focus({preventScroll:!0}),window.addEventListener("message",d)})),E((()=>{window.removeEventListener("message",d)}));const d=e=>{const{data:t}=e;t.isFromTypebot&&"setInputValue"===t.command&&n(t.value)};return(()=>{const t=pr(),a=t.firstChild;t.$$keydown=c,t.style.setProperty("max-width","350px"),a.$$input=e=>{n(i(e.currentTarget))},me(o,a,(()=>!0));return"function"==typeof s?me(s,a):s=a,a.style.setProperty("font-size","16px"),a.style.setProperty("appearance","auto"),a.value=r,ye(t,V(Wt,{type:"button",class:"my-2 ml-2","on:click":l,get children(){return e.block.options?.labels?.button}}),null),k((t=>{const n=e.block.options?.labels?.placeholder??ur.placeholder,r=e.block.options?.min,o=e.block.options?.max,i=e.block.options?.step??"any";return n!==t._v$&&ge(a,"placeholder",t._v$=n),r!==t._v$2&&ge(a,"min",t._v$2=r),o!==t._v$3&&ge(a,"max",t._v$3=o),i!==t._v$4&&ge(a,"step",t._v$4=i),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()};he(["keydown","input"]);const gr={button:ar,placeholder:"Type your email..."},br=pe('<div class="flex items-end justify-between pr-2 typebot-input w-full" data-testid="input">'),fr=e=>{const[t,n]=_(e.defaultValue??"");let r;const o=e=>n(e),i=()=>{""!==r?.value&&r?.reportValidity()?e.onSubmit({value:r?.value??t()}):r?.focus()},a=e=>{"Enter"===e.key&&i()};C((()=>{!jt()&&r&&r.focus({preventScroll:!0}),window.addEventListener("message",s)})),E((()=>{window.removeEventListener("message",s)}));const s=e=>{const{data:t}=e;t.isFromTypebot&&"setInputValue"===t.command&&n(t.value)};return(()=>{const n=br();return n.$$keydown=a,n.style.setProperty("max-width","350px"),ye(n,V(Jt,{ref(e){"function"==typeof r?r(e):r=e},get value(){return t()},get placeholder(){return e.block.options?.labels?.placeholder??gr.placeholder},onInput:o,type:"email",autocomplete:"email"}),null),ye(n,V(Wt,{type:"button",class:"my-2 ml-2","on:click":i,get children(){return e.block.options?.labels?.button}}),null),n})()};he(["keydown"]);const mr={button:ar,placeholder:"Type a URL..."},yr=pe('<div class="flex items-end justify-between pr-2 typebot-input w-full" data-testid="input">'),vr=e=>{const[t,n]=_(e.defaultValue??"");let r;const o=e=>{if(!e.startsWith("https://"))return"https:/"===e?void 0:n(`https://${e}`);n(e)},i=()=>{""!==r?.value&&r?.reportValidity()?e.onSubmit({value:r?.value??t()}):r?.focus()},a=e=>{"Enter"===e.key&&i()};C((()=>{!jt()&&r&&r.focus({preventScroll:!0}),window.addEventListener("message",s)})),E((()=>{window.removeEventListener("message",s)}));const s=e=>{const{data:t}=e;t.isFromTypebot&&"setInputValue"===t.command&&n(t.value)};return(()=>{const n=yr();return n.$$keydown=a,n.style.setProperty("max-width","350px"),ye(n,V(Jt,{ref(e){"function"==typeof r?r(e):r=e},get value(){return t()},get placeholder(){return e.block.options?.labels?.placeholder??mr.placeholder},onInput:o,type:"url",autocomplete:"url"}),null),ye(n,V(Wt,{type:"button",class:"my-2 ml-2","on:click":i,get children(){return e.block.options?.labels?.button}}),null),n})()};he(["keydown"]);const wr=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2px" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9">'),xr=e=>(()=>{const t=wr();return fe(t,e,!0,!0),t})(),_r=[{name:"International",flag:"🌐",code:"INT",dial_code:null},{name:"Afghanistan",flag:"🇦🇫",code:"AF",dial_code:"+93"},{name:"Åland Islands",flag:"🇦🇽",code:"AX",dial_code:"+358"},{name:"Albania",flag:"🇦🇱",code:"AL",dial_code:"+355"},{name:"Algeria",flag:"🇩🇿",code:"DZ",dial_code:"+213"},{name:"American Samoa",flag:"🇦🇸",code:"AS",dial_code:"+1684"},{name:"Andorra",flag:"🇦🇩",code:"AD",dial_code:"+376"},{name:"Angola",flag:"🇦🇴",code:"AO",dial_code:"+244"},{name:"Anguilla",flag:"🇦🇮",code:"AI",dial_code:"+1264"},{name:"Antarctica",flag:"🇦🇶",code:"AQ",dial_code:"+672"},{name:"Antigua and Barbuda",flag:"🇦🇬",code:"AG",dial_code:"+1268"},{name:"Argentina",flag:"🇦🇷",code:"AR",dial_code:"+54"},{name:"Armenia",flag:"🇦🇲",code:"AM",dial_code:"+374"},{name:"Aruba",flag:"🇦🇼",code:"AW",dial_code:"+297"},{name:"Australia",flag:"🇦🇺",code:"AU",dial_code:"+61"},{name:"Austria",flag:"🇦🇹",code:"AT",dial_code:"+43"},{name:"Azerbaijan",flag:"🇦🇿",code:"AZ",dial_code:"+994"},{name:"Bahamas",flag:"🇧🇸",code:"BS",dial_code:"+1242"},{name:"Bahrain",flag:"🇧🇭",code:"BH",dial_code:"+973"},{name:"Bangladesh",flag:"🇧🇩",code:"BD",dial_code:"+880"},{name:"Barbados",flag:"🇧🇧",code:"BB",dial_code:"+1246"},{name:"Belarus",flag:"🇧🇾",code:"BY",dial_code:"+375"},{name:"Belgium",flag:"🇧🇪",code:"BE",dial_code:"+32"},{name:"Belize",flag:"🇧🇿",code:"BZ",dial_code:"+501"},{name:"Benin",flag:"🇧🇯",code:"BJ",dial_code:"+229"},{name:"Bermuda",flag:"🇧🇲",code:"BM",dial_code:"+1441"},{name:"Bhutan",flag:"🇧🇹",code:"BT",dial_code:"+975"},{name:"Bolivia, Plurinational State of bolivia",flag:"🇧🇴",code:"BO",dial_code:"+591"},{name:"Bosnia and Herzegovina",flag:"🇧🇦",code:"BA",dial_code:"+387"},{name:"Botswana",flag:"🇧🇼",code:"BW",dial_code:"+267"},{name:"Bouvet Island",flag:"🇧🇻",code:"BV",dial_code:"+47"},{name:"Brazil",flag:"🇧🇷",code:"BR",dial_code:"+55"},{name:"British Indian Ocean Territory",flag:"🇮🇴",code:"IO",dial_code:"+246"},{name:"Brunei Darussalam",flag:"🇧🇳",code:"BN",dial_code:"+673"},{name:"Bulgaria",flag:"🇧🇬",code:"BG",dial_code:"+359"},{name:"Burkina Faso",flag:"🇧🇫",code:"BF",dial_code:"+226"},{name:"Burundi",flag:"🇧🇮",code:"BI",dial_code:"+257"},{name:"Cambodia",flag:"🇰🇭",code:"KH",dial_code:"+855"},{name:"Cameroon",flag:"🇨🇲",code:"CM",dial_code:"+237"},{name:"Canada",flag:"🇨🇦",code:"CA",dial_code:"+1"},{name:"Cape Verde",flag:"🇨🇻",code:"CV",dial_code:"+238"},{name:"Cayman Islands",flag:"🇰🇾",code:"KY",dial_code:"+345"},{name:"Central African Republic",flag:"🇨🇫",code:"CF",dial_code:"+236"},{name:"Chad",flag:"🇹🇩",code:"TD",dial_code:"+235"},{name:"Chile",flag:"🇨🇱",code:"CL",dial_code:"+56"},{name:"China",flag:"🇨🇳",code:"CN",dial_code:"+86"},{name:"Christmas Island",flag:"🇨🇽",code:"CX",dial_code:"+61"},{name:"Cocos (Keeling) Islands",flag:"🇨🇨",code:"CC",dial_code:"+61"},{name:"Colombia",flag:"🇨🇴",code:"CO",dial_code:"+57"},{name:"Comoros",flag:"🇰🇲",code:"KM",dial_code:"+269"},{name:"Congo",flag:"🇨🇬",code:"CG",dial_code:"+242"},{name:"Congo, The Democratic Republic of the Congo",flag:"🇨🇩",code:"CD",dial_code:"+243"},{name:"Cook Islands",flag:"🇨🇰",code:"CK",dial_code:"+682"},{name:"Costa Rica",flag:"🇨🇷",code:"CR",dial_code:"+506"},{name:"Cote d'Ivoire",flag:"🇨🇮",code:"CI",dial_code:"+225"},{name:"Croatia",flag:"🇭🇷",code:"HR",dial_code:"+385"},{name:"Cuba",flag:"🇨🇺",code:"CU",dial_code:"+53"},{name:"Cyprus",flag:"🇨🇾",code:"CY",dial_code:"+357"},{name:"Czech Republic",flag:"🇨🇿",code:"CZ",dial_code:"+420"},{name:"Denmark",flag:"🇩🇰",code:"DK",dial_code:"+45"},{name:"Djibouti",flag:"🇩🇯",code:"DJ",dial_code:"+253"},{name:"Dominica",flag:"🇩🇲",code:"DM",dial_code:"+1767"},{name:"Dominican Republic",flag:"🇩🇴",code:"DO",dial_code:"+1849"},{name:"Dominican Republic",flag:"🇩🇴",code:"DO",dial_code:"+1829"},{name:"Dominican Republic",flag:"🇩🇴",code:"DO",dial_code:"+1809"},{name:"Ecuador",flag:"🇪🇨",code:"EC",dial_code:"+593"},{name:"Egypt",flag:"🇪🇬",code:"EG",dial_code:"+20"},{name:"El Salvador",flag:"🇸🇻",code:"SV",dial_code:"+503"},{name:"Equatorial Guinea",flag:"🇬🇶",code:"GQ",dial_code:"+240"},{name:"Eritrea",flag:"🇪🇷",code:"ER",dial_code:"+291"},{name:"Estonia",flag:"🇪🇪",code:"EE",dial_code:"+372"},{name:"Ethiopia",flag:"🇪🇹",code:"ET",dial_code:"+251"},{name:"Falkland Islands (Malvinas)",flag:"🇫🇰",code:"FK",dial_code:"+500"},{name:"Faroe Islands",flag:"🇫🇴",code:"FO",dial_code:"+298"},{name:"Fiji",flag:"🇫🇯",code:"FJ",dial_code:"+679"},{name:"Finland",flag:"🇫🇮",code:"FI",dial_code:"+358"},{name:"France",flag:"🇫🇷",code:"FR",dial_code:"+33"},{name:"French Guiana",flag:"🇬🇫",code:"GF",dial_code:"+594"},{name:"French Polynesia",flag:"🇵🇫",code:"PF",dial_code:"+689"},{name:"French Southern Territories",flag:"🇹🇫",code:"TF",dial_code:"+262"},{name:"Gabon",flag:"🇬🇦",code:"GA",dial_code:"+241"},{name:"Gambia",flag:"🇬🇲",code:"GM",dial_code:"+220"},{name:"Georgia",flag:"🇬🇪",code:"GE",dial_code:"+995"},{name:"Germany",flag:"🇩🇪",code:"DE",dial_code:"+49"},{name:"Ghana",flag:"🇬🇭",code:"GH",dial_code:"+233"},{name:"Gibraltar",flag:"🇬🇮",code:"GI",dial_code:"+350"},{name:"Greece",flag:"🇬🇷",code:"GR",dial_code:"+30"},{name:"Greenland",flag:"🇬🇱",code:"GL",dial_code:"+299"},{name:"Grenada",flag:"🇬🇩",code:"GD",dial_code:"+1473"},{name:"Guadeloupe",flag:"🇬🇵",code:"GP",dial_code:"+590"},{name:"Guam",flag:"🇬🇺",code:"GU",dial_code:"+1671"},{name:"Guatemala",flag:"🇬🇹",code:"GT",dial_code:"+502"},{name:"Guernsey",flag:"🇬🇬",code:"GG",dial_code:"+44"},{name:"Guinea",flag:"🇬🇳",code:"GN",dial_code:"+224"},{name:"Guinea-Bissau",flag:"🇬🇼",code:"GW",dial_code:"+245"},{name:"Guyana",flag:"🇬🇾",code:"GY",dial_code:"+592"},{name:"Haiti",flag:"🇭🇹",code:"HT",dial_code:"+509"},{name:"Heard Island and Mcdonald Islands",flag:"🇭🇲",code:"HM",dial_code:"+672"},{name:"Holy See (Vatican City State)",flag:"🇻🇦",code:"VA",dial_code:"+379"},{name:"Honduras",flag:"🇭🇳",code:"HN",dial_code:"+504"},{name:"Hong Kong",flag:"🇭🇰",code:"HK",dial_code:"+852"},{name:"Hungary",flag:"🇭🇺",code:"HU",dial_code:"+36"},{name:"Iceland",flag:"🇮🇸",code:"IS",dial_code:"+354"},{name:"India",flag:"🇮🇳",code:"IN",dial_code:"+91"},{name:"Indonesia",flag:"🇮🇩",code:"ID",dial_code:"+62"},{name:"Iran, Islamic Republic of Persian Gulf",flag:"🇮🇷",code:"IR",dial_code:"+98"},{name:"Iraq",flag:"🇮🇶",code:"IQ",dial_code:"+964"},{name:"Ireland",flag:"🇮🇪",code:"IE",dial_code:"+353"},{name:"Isle of Man",flag:"🇮🇲",code:"IM",dial_code:"+44"},{name:"Israel",flag:"🇮🇱",code:"IL",dial_code:"+972"},{name:"Italy",flag:"🇮🇹",code:"IT",dial_code:"+39"},{name:"Jamaica",flag:"🇯🇲",code:"JM",dial_code:"+1876"},{name:"Japan",flag:"🇯🇵",code:"JP",dial_code:"+81"},{name:"Jersey",flag:"🇯🇪",code:"JE",dial_code:"+44"},{name:"Jordan",flag:"🇯🇴",code:"JO",dial_code:"+962"},{name:"Kazakhstan",flag:"🇰🇿",code:"KZ",dial_code:"+7"},{name:"Kenya",flag:"🇰🇪",code:"KE",dial_code:"+254"},{name:"Kiribati",flag:"🇰🇮",code:"KI",dial_code:"+686"},{name:"Korea, Democratic People's Republic of Korea",flag:"🇰🇵",code:"KP",dial_code:"+850"},{name:"Korea, Republic of South Korea",flag:"🇰🇷",code:"KR",dial_code:"+82"},{name:"Kosovo",flag:"🇽🇰",code:"XK",dial_code:"+383"},{name:"Kuwait",flag:"🇰🇼",code:"KW",dial_code:"+965"},{name:"Kyrgyzstan",flag:"🇰🇬",code:"KG",dial_code:"+996"},{name:"Laos",flag:"🇱🇦",code:"LA",dial_code:"+856"},{name:"Latvia",flag:"🇱🇻",code:"LV",dial_code:"+371"},{name:"Lebanon",flag:"🇱🇧",code:"LB",dial_code:"+961"},{name:"Lesotho",flag:"🇱🇸",code:"LS",dial_code:"+266"},{name:"Liberia",flag:"🇱🇷",code:"LR",dial_code:"+231"},{name:"Libyan Arab Jamahiriya",flag:"🇱🇾",code:"LY",dial_code:"+218"},{name:"Liechtenstein",flag:"🇱🇮",code:"LI",dial_code:"+423"},{name:"Lithuania",flag:"🇱🇹",code:"LT",dial_code:"+370"},{name:"Luxembourg",flag:"🇱🇺",code:"LU",dial_code:"+352"},{name:"Macao",flag:"🇲🇴",code:"MO",dial_code:"+853"},{name:"Macedonia",flag:"🇲🇰",code:"MK",dial_code:"+389"},{name:"Madagascar",flag:"🇲🇬",code:"MG",dial_code:"+261"},{name:"Malawi",flag:"🇲🇼",code:"MW",dial_code:"+265"},{name:"Malaysia",flag:"🇲🇾",code:"MY",dial_code:"+60"},{name:"Maldives",flag:"🇲🇻",code:"MV",dial_code:"+960"},{name:"Mali",flag:"🇲🇱",code:"ML",dial_code:"+223"},{name:"Malta",flag:"🇲🇹",code:"MT",dial_code:"+356"},{name:"Marshall Islands",flag:"🇲🇭",code:"MH",dial_code:"+692"},{name:"Martinique",flag:"🇲🇶",code:"MQ",dial_code:"+596"},{name:"Mauritania",flag:"🇲🇷",code:"MR",dial_code:"+222"},{name:"Mauritius",flag:"🇲🇺",code:"MU",dial_code:"+230"},{name:"Mayotte",flag:"🇾🇹",code:"YT",dial_code:"+262"},{name:"Mexico",flag:"🇲🇽",code:"MX",dial_code:"+52"},{name:"Micronesia, Federated States of Micronesia",flag:"🇫🇲",code:"FM",dial_code:"+691"},{name:"Moldova",flag:"🇲🇩",code:"MD",dial_code:"+373"},{name:"Monaco",flag:"🇲🇨",code:"MC",dial_code:"+377"},{name:"Mongolia",flag:"🇲🇳",code:"MN",dial_code:"+976"},{name:"Montenegro",flag:"🇲🇪",code:"ME",dial_code:"+382"},{name:"Montserrat",flag:"🇲🇸",code:"MS",dial_code:"+1664"},{name:"Morocco",flag:"🇲🇦",code:"MA",dial_code:"+212"},{name:"Mozambique",flag:"🇲🇿",code:"MZ",dial_code:"+258"},{name:"Myanmar",flag:"🇲🇲",code:"MM",dial_code:"+95"},{name:"Namibia",flag:"🇳🇦",code:"NA",dial_code:"+264"},{name:"Nauru",flag:"🇳🇷",code:"NR",dial_code:"+674"},{name:"Nepal",flag:"🇳🇵",code:"NP",dial_code:"+977"},{name:"Netherlands",flag:"🇳🇱",code:"NL",dial_code:"+31"},{name:"Netherlands Antilles",flag:"",code:"AN",dial_code:"+599"},{name:"New Caledonia",flag:"🇳🇨",code:"NC",dial_code:"+687"},{name:"New Zealand",flag:"🇳🇿",code:"NZ",dial_code:"+64"},{name:"Nicaragua",flag:"🇳🇮",code:"NI",dial_code:"+505"},{name:"Niger",flag:"🇳🇪",code:"NE",dial_code:"+227"},{name:"Nigeria",flag:"🇳🇬",code:"NG",dial_code:"+234"},{name:"Niue",flag:"🇳🇺",code:"NU",dial_code:"+683"},{name:"Norfolk Island",flag:"🇳🇫",code:"NF",dial_code:"+672"},{name:"Northern Mariana Islands",flag:"🇲🇵",code:"MP",dial_code:"+1670"},{name:"Norway",flag:"🇳🇴",code:"NO",dial_code:"+47"},{name:"Oman",flag:"🇴🇲",code:"OM",dial_code:"+968"},{name:"Pakistan",flag:"🇵🇰",code:"PK",dial_code:"+92"},{name:"Palau",flag:"🇵🇼",code:"PW",dial_code:"+680"},{name:"Palestinian Territory, Occupied",flag:"🇵🇸",code:"PS",dial_code:"+970"},{name:"Panama",flag:"🇵🇦",code:"PA",dial_code:"+507"},{name:"Papua New Guinea",flag:"🇵🇬",code:"PG",dial_code:"+675"},{name:"Paraguay",flag:"🇵🇾",code:"PY",dial_code:"+595"},{name:"Peru",flag:"🇵🇪",code:"PE",dial_code:"+51"},{name:"Philippines",flag:"🇵🇭",code:"PH",dial_code:"+63"},{name:"Pitcairn",flag:"🇵🇳",code:"PN",dial_code:"+64"},{name:"Poland",flag:"🇵🇱",code:"PL",dial_code:"+48"},{name:"Portugal",flag:"🇵🇹",code:"PT",dial_code:"+351"},{name:"Puerto Rico",flag:"🇵🇷",code:"PR",dial_code:"+1939"},{name:"Qatar",flag:"🇶🇦",code:"QA",dial_code:"+974"},{name:"Romania",flag:"🇷🇴",code:"RO",dial_code:"+40"},{name:"Russia",flag:"🇷🇺",code:"RU",dial_code:"+7"},{name:"Rwanda",flag:"🇷🇼",code:"RW",dial_code:"+250"},{name:"Reunion",flag:"🇷🇪",code:"RE",dial_code:"+262"},{name:"Saint Barthelemy",flag:"🇧🇱",code:"BL",dial_code:"+590"},{name:"Saint Helena, Ascension and Tristan Da Cunha",flag:"🇸🇭",code:"SH",dial_code:"+290"},{name:"Saint Kitts and Nevis",flag:"🇰🇳",code:"KN",dial_code:"+1869"},{name:"Saint Lucia",flag:"🇱🇨",code:"LC",dial_code:"+1758"},{name:"Saint Martin",flag:"🇲🇫",code:"MF",dial_code:"+590"},{name:"Saint Pierre and Miquelon",flag:"🇵🇲",code:"PM",dial_code:"+508"},{name:"Saint Vincent and the Grenadines",flag:"🇻🇨",code:"VC",dial_code:"+1784"},{name:"Samoa",flag:"🇼🇸",code:"WS",dial_code:"+685"},{name:"San Marino",flag:"🇸🇲",code:"SM",dial_code:"+378"},{name:"Sao Tome and Principe",flag:"🇸🇹",code:"ST",dial_code:"+239"},{name:"Saudi Arabia",flag:"🇸🇦",code:"SA",dial_code:"+966"},{name:"Senegal",flag:"🇸🇳",code:"SN",dial_code:"+221"},{name:"Serbia",flag:"🇷🇸",code:"RS",dial_code:"+381"},{name:"Seychelles",flag:"🇸🇨",code:"SC",dial_code:"+248"},{name:"Sierra Leone",flag:"🇸🇱",code:"SL",dial_code:"+232"},{name:"Singapore",flag:"🇸🇬",code:"SG",dial_code:"+65"},{name:"Slovakia",flag:"🇸🇰",code:"SK",dial_code:"+421"},{name:"Slovenia",flag:"🇸🇮",code:"SI",dial_code:"+386"},{name:"Solomon Islands",flag:"🇸🇧",code:"SB",dial_code:"+677"},{name:"Somalia",flag:"🇸🇴",code:"SO",dial_code:"+252"},{name:"South Africa",flag:"🇿🇦",code:"ZA",dial_code:"+27"},{name:"South Sudan",flag:"🇸🇸",code:"SS",dial_code:"+211"},{name:"South Georgia and the South Sandwich Islands",flag:"🇬🇸",code:"GS",dial_code:"+500"},{name:"Spain",flag:"🇪🇸",code:"ES",dial_code:"+34"},{name:"Sri Lanka",flag:"🇱🇰",code:"LK",dial_code:"+94"},{name:"Sudan",flag:"🇸🇩",code:"SD",dial_code:"+249"},{name:"Suriname",flag:"🇸🇷",code:"SR",dial_code:"+597"},{name:"Svalbard and Jan Mayen",flag:"🇸🇯",code:"SJ",dial_code:"+47"},{name:"Swaziland",flag:"🇸🇿",code:"SZ",dial_code:"+268"},{name:"Sweden",flag:"🇸🇪",code:"SE",dial_code:"+46"},{name:"Switzerland",flag:"🇨🇭",code:"CH",dial_code:"+41"},{name:"Syrian Arab Republic",flag:"🇸🇾",code:"SY",dial_code:"+963"},{name:"Taiwan",flag:"🇹🇼",code:"TW",dial_code:"+886"},{name:"Tajikistan",flag:"🇹🇯",code:"TJ",dial_code:"+992"},{name:"Tanzania, United Republic of Tanzania",flag:"🇹🇿",code:"TZ",dial_code:"+255"},{name:"Thailand",flag:"🇹🇭",code:"TH",dial_code:"+66"},{name:"Timor-Leste",flag:"🇹🇱",code:"TL",dial_code:"+670"},{name:"Togo",flag:"🇹🇬",code:"TG",dial_code:"+228"},{name:"Tokelau",flag:"🇹🇰",code:"TK",dial_code:"+690"},{name:"Tonga",flag:"🇹🇴",code:"TO",dial_code:"+676"},{name:"Trinidad and Tobago",flag:"🇹🇹",code:"TT",dial_code:"+1868"},{name:"Tunisia",flag:"🇹🇳",code:"TN",dial_code:"+216"},{name:"Turkey",flag:"🇹🇷",code:"TR",dial_code:"+90"},{name:"Turkmenistan",flag:"🇹🇲",code:"TM",dial_code:"+993"},{name:"Turks and Caicos Islands",flag:"🇹🇨",code:"TC",dial_code:"+1649"},{name:"Tuvalu",flag:"🇹🇻",code:"TV",dial_code:"+688"},{name:"Uganda",flag:"🇺🇬",code:"UG",dial_code:"+256"},{name:"Ukraine",flag:"🇺🇦",code:"UA",dial_code:"+380"},{name:"United Arab Emirates",flag:"🇦🇪",code:"AE",dial_code:"+971"},{name:"United Kingdom",flag:"🇬🇧",code:"GB",dial_code:"+44"},{name:"United States",flag:"🇺🇸",code:"US",dial_code:"+1"},{name:"Uruguay",flag:"🇺🇾",code:"UY",dial_code:"+598"},{name:"Uzbekistan",flag:"🇺🇿",code:"UZ",dial_code:"+998"},{name:"Vanuatu",flag:"🇻🇺",code:"VU",dial_code:"+678"},{name:"Venezuela, Bolivarian Republic of Venezuela",flag:"🇻🇪",code:"VE",dial_code:"+58"},{name:"Vietnam",flag:"🇻🇳",code:"VN",dial_code:"+84"},{name:"Virgin Islands, British",flag:"🇻🇬",code:"VG",dial_code:"+1284"},{name:"Virgin Islands, U.S.",flag:"🇻🇮",code:"VI",dial_code:"+1340"},{name:"Wallis and Futuna",flag:"🇼🇫",code:"WF",dial_code:"+681"},{name:"Yemen",flag:"🇾🇪",code:"YE",dial_code:"+967"},{name:"Zambia",flag:"🇿🇲",code:"ZM",dial_code:"+260"},{name:"Zimbabwe",flag:"🇿🇼",code:"ZW",dial_code:"+263"}],kr={button:ar,placeholder:"Type your phone number..."},$r=pe('<div class="flex items-end justify-between pr-2 typebot-input" data-testid="input"><div class="flex"><div class="relative typebot-country-select flex justify-center items-center"><div class="pl-2 pr-1 flex items-center gap-2"><span></span></div><select class="absolute top-0 left-0 w-full h-full cursor-pointer opacity-0">'),Sr=pe("<option> "),Tr=e=>{const[t,n]=_(Be(e.defaultCountryCode)?"INT":e.defaultCountryCode),[r,o]=_(e.defaultValue??"");let i;const a=e=>{o(e),""!==e&&"+"!==e||"INT"===t()||n("INT");const r=e?.startsWith("+")&&e.length>2&&_r.reduce(((t,n)=>!n?.dial_code||null!==t&&!t.dial_code?t:e?.startsWith(n.dial_code)&&n.dial_code.length>(t?.dial_code.length??0)?n:t),null);r&&n(r.code)},s=()=>{const n=_r.find((e=>e.code===t()))?.dial_code;if(""!==i?.value&&i?.reportValidity()){const t=i?.value??r();e.onSubmit({value:t.startsWith("+")?t:`${n??""}${t}`})}else i?.focus()},l=e=>{"Enter"===e.key&&s()},c=e=>{const t=e.currentTarget.value;n(t);const a=_r.find((e=>e.code===t))?.dial_code;""===r()&&a&&o(a),i?.focus()};C((()=>{!jt()&&i&&i.focus({preventScroll:!0}),window.addEventListener("message",d)})),E((()=>{window.removeEventListener("message",d)}));const d=e=>{const{data:t}=e;t.isFromTypebot&&"setInputValue"===t.command&&o(t.value)};return(()=>{const n=$r(),o=n.firstChild,d=o.firstChild.firstChild,u=d.firstChild,p=d.nextSibling;return n.$$keydown=l,n.style.setProperty("max-width","400px"),ye(u,(()=>_r.find((e=>t()===e.code))?.flag)),ye(d,V(xr,{class:"w-3"}),null),p.addEventListener("change",c),ye(p,V(te,{each:_r,children:e=>(()=>{const n=Sr(),r=n.firstChild;return ye(n,(()=>e.name),r),ye(n,(()=>e.dial_code?`(${e.dial_code})`:""),null),k((()=>n.selected=e.code===t())),k((()=>n.value=e.code)),n})()})),ye(o,V(Jt,{type:"tel",ref(e){"function"==typeof i?i(e):i=e},get value(){return r()},onInput:a,get placeholder(){return e.labels?.placeholder??kr.placeholder},get autofocus(){return!jt()}}),null),ye(n,V(Wt,{type:"button",class:"my-2 ml-2","on:click":s,get children(){return e.labels?.button}}),null),n})()};he(["keydown"]);const Cr={button:ar,from:"From:",to:"To:"},Er=pe('<div class="flex flex-col"><div class="flex items-center"><form><div class="flex flex-col"><div><input class="focus:outline-none flex-1 w-full text-input typebot-date-input" data-testid="from-date">'),Ar=pe('<p class="font-semibold">'),Ir=pe('<div class="flex items-center p-4"><input class="focus:outline-none flex-1 w-full text-input ml-2 typebot-date-input" data-testid="to-date">'),Pr=e=>{const[t,n]=_(Rr(e.defaultValue??""));return(()=>{const r=Er(),o=r.firstChild.firstChild,i=o.firstChild,a=i.firstChild,s=a.firstChild;return o.addEventListener("submit",(n=>{""===t().from&&""===t().to||(n.preventDefault(),e.onSubmit({value:`${t().from}${e.options?.isRange?` to ${t().to}`:""}`}))})),ye(a,(()=>{const t=S((()=>!!e.options?.isRange));return()=>t()&&(()=>{const t=Ar();return ye(t,(()=>e.options.labels?.from??Cr.from)),t})()})(),s),s.addEventListener("change",(e=>n({...t(),from:e.currentTarget.value}))),s.style.setProperty("min-height","32px"),s.style.setProperty("min-width","100px"),s.style.setProperty("font-size","16px"),ye(i,(()=>{const r=S((()=>!!e.options?.isRange));return()=>r()&&(()=>{const r=Ir(),o=r.firstChild;return ye(r,(()=>{const t=S((()=>!!e.options.isRange));return()=>t()&&(()=>{const t=Ar();return ye(t,(()=>e.options.labels?.to??Cr.to)),t})()})(),o),o.addEventListener("change",(e=>n({...t(),to:e.currentTarget.value}))),o.style.setProperty("min-height","32px"),o.style.setProperty("min-width","100px"),o.style.setProperty("font-size","16px"),k((t=>{const n=e.options.hasTime?"datetime-local":"date",r=e.options?.min,i=e.options?.max;return n!==t._v$6&&ge(o,"type",t._v$6=n),r!==t._v$7&&ge(o,"min",t._v$7=r),i!==t._v$8&&ge(o,"max",t._v$8=i),t}),{_v$6:void 0,_v$7:void 0,_v$8:void 0}),k((()=>o.value=t().to)),r})()})(),null),ye(o,V(Wt,{class:"my-2 ml-2",get children(){return e.options?.labels?.button}}),null),k((t=>{const n=He("flex justify-between typebot-input pr-2",e.options?.isRange?"items-end":"items-center"),r="flex items-center p-4 "+(e.options?.isRange?"pb-0 gap-2":""),i=e.options?.hasTime?"datetime-local":"date",l=e.options?.min,c=e.options?.max;return n!==t._v$&&be(o,t._v$=n),r!==t._v$2&&be(a,t._v$2=r),i!==t._v$3&&ge(s,"type",t._v$3=i),l!==t._v$4&&ge(s,"min",t._v$4=l),c!==t._v$5&&ge(s,"max",t._v$5=c),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),k((()=>s.value=t().from)),r})()},Rr=e=>{if(!e.includes("to"))return{from:e,to:""};const[t,n]=e.split(" to ");return{from:t,to:n}},Lr="Numbers",Or=10,Nr={button:ar},Mr=0,Br=pe('<form class="flex flex-col gap-2"><div class="flex flex-wrap justify-center gap-2"></div><div class="flex justify-end">'),zr=pe('<span class="text-sm w-full rating-label">'),jr=pe('<span class="text-sm w-full text-right pr-2 rating-label">'),Dr=pe('<div role="checkbox">'),Ur=pe("<div>"),Fr=e=>{const[t,n]=_(e.defaultValue?Number(e.defaultValue):void 0),r=n=>{n.preventDefault();const r=t();Me(r)||e.onSubmit({value:r.toString()})},o=t=>{e.block.options?.isOneClickSubmitEnabled&&e.onSubmit({value:t.toString()}),n(t)};return(()=>{const n=Br(),i=n.firstChild,a=i.nextSibling;return n.addEventListener("submit",r),ye(n,(()=>{const t=S((()=>!!e.block.options?.labels?.left));return()=>t()&&(()=>{const t=zr();return ye(t,(()=>e.block.options.labels.left)),t})()})(),i),ye(i,V(te,{get each(){return Array.from(Array((e.block.options?.length??Or)+("Numbers"===(e.block.options?.buttonType??Lr)?-((e.block.options?.startsAt??Mr)-1):0)))},children:(n,r)=>V(Hr,J((()=>e.block.options),{get rating(){return t()},get idx(){return r()+("Numbers"===(e.block.options?.buttonType??Lr)?e.block.options?.startsAt??Mr:1)},onClick:o}))})),ye(n,(()=>{const t=S((()=>!!e.block.options?.labels?.right));return()=>t()&&(()=>{const t=jr();return ye(t,(()=>e.block.options.labels.right)),t})()})(),a),ye(a,(()=>{const n=S((()=>!!Ne(t())));return()=>n()&&V(Wt,{disableIcon:!0,get children(){return e.block.options?.labels?.button??Nr.button}})})()),n})()},Hr=e=>{const t=t=>{t.preventDefault(),e.onClick(e.idx)};return V(re,{get children(){return[V(oe,{get when(){return"Numbers"===(e.buttonType??Lr)},get children(){return[V(ne,{get when(){return e.isOneClickSubmitEnabled},get children(){return V(Vt,{"on:click":t,get children(){return e.idx}})}}),V(ne,{get when(){return!e.isOneClickSubmitEnabled},get children(){const n=Dr();return n.addEventListener("click",t),ye(n,(()=>e.idx)),k((t=>{const r=Ne(e.rating)&&e.idx<=e.rating,o="py-2 px-4 font-semibold focus:outline-none cursor-pointer select-none typebot-selectable"+(Ne(e.rating)&&e.idx<=e.rating?" selected":"");return r!==t._v$&&ge(n,"aria-checked",t._v$=r),o!==t._v$2&&be(n,t._v$2=o),t}),{_v$:void 0,_v$2:void 0}),n}})]}}),V(oe,{get when(){return"Numbers"!==(e.buttonType??Lr)},get children(){const t=Ur();return t.addEventListener("click",(()=>e.onClick(e.idx))),k((n=>{const r="flex justify-center items-center rating-icon-container cursor-pointer "+(Ne(e.rating)&&e.idx<=e.rating?"selected":""),o=e.customIcon?.isEnabled&&!Be(e.customIcon.svg)?e.customIcon.svg:qr;return r!==n._v$3&&be(t,n._v$3=r),o!==n._v$4&&(t.innerHTML=n._v$4=o),n}),{_v$3:void 0,_v$4:void 0}),t}})]}})},qr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>',Gr=async({apiHost:e,files:t,onUploadProgress:n})=>{const r=[];let o=0;for(const{input:i,file:a}of t){n&&n(o/t.length*100),o+=1;const{data:s}=await Oe({method:"POST",url:`${e}/api/v1/generate-upload-url`,body:{filePathProps:i,fileType:a.type}});if(s?.presignedUrl){const e=new FormData;Object.entries(s.formData).forEach((([t,n])=>{e.append(t,n)})),e.append("file",a);if(!(await fetch(s.presignedUrl,{method:"POST",body:e})).ok)continue;r.push(s.fileUrl)}}return r},Vr={isRequired:!0,isMultipleAllowed:!1,visibility:"Auto",labels:{placeholder:"<strong>\n      Click to upload\n    </strong> or drag and drop<br>\n    (size limit: 10MB)",button:"Upload",clear:"Clear",skip:"Skip",success:{single:"File uploaded",multiple:"{total} files uploaded"}}},Wr=pe('<div class="w-full bg-gray-200 rounded-full h-2.5"><div class="upload-progress-bar h-2.5 rounded-full">'),Yr=pe('<span class="relative"><div class="total-files-indicator flex items-center justify-center absolute -right-1 rounded-full px-1 w-4 h-4">'),Kr=pe('<div class="flex flex-col justify-center items-center"><p class="text-sm text-gray-500 text-center">'),Zr=pe('<input id="dropzone-file" type="file" class="hidden">'),Jr=pe('<div class="flex justify-end">'),Xr=pe('<div class="flex justify-end"><div class="flex gap-2">'),Qr=pe('<p class="text-red-500 text-sm">'),eo=pe('<form class="flex flex-col w-full gap-2"><label for="dropzone-file">'),to=pe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-3 text-gray-500"><polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16">'),no=pe('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-3 text-gray-500"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9">'),ro=e=>{const[t,n]=_([]),[r,o]=_(!1),[i,a]=_(0),[s,l]=_(!1),[c,d]=_(),u=r=>{d(void 0);const o=Array.from(r),i=e.block.options&&"sizeLimit"in e.block.options?e.block.options?.sizeLimit??pt("NEXT_PUBLIC_BOT_FILE_UPLOAD_MAX_SIZE"):void 0;if(i&&o.some((e=>e.size>1024*i*1024)))return d(`A file is larger than ${i}MB`);if(!e.block.options?.isMultipleAllowed&&r)return h(o[0]);if(0===t().length)return void n(o);const a=o.map((e=>{let n=e.name,r=1;for(;t().some((e=>e.name===n));){const t=e.name.lastIndexOf("."),o=-1!==t?e.name.slice(t):"";n=`${e.name.slice(0,t)}(${r})${o}`,r++}return new File([e],n,{type:e.type})}));n([...t(),...a])},p=async e=>{e.preventDefault(),0!==t().length&&g(t())},h=async t=>{if(e.context.isPreview||!e.context.resultId)return e.onSubmit({label:e.block.options?.labels?.success?.single??Vr.labels.success.single,value:"http://fake-upload-url.com"});o(!0);const n=await Gr({apiHost:e.context.apiHost??ht({ignoreChatApiUrl:!0}),files:[{file:t,input:{sessionId:e.context.sessionId,fileName:t.name}}]});if(o(!1),n.length)return e.onSubmit({label:e.block.options?.labels?.success?.single??Vr.labels.success.single,value:n[0]?ao(n[0]):""});d("An error occured while uploading the file")},g=async t=>{const n=e.context.resultId;if(e.context.isPreview||!n)return e.onSubmit({label:t.length>1?(e.block.options?.labels?.success?.multiple??Vr.labels.success.multiple).replaceAll("{total}",t.length.toString()):e.block.options?.labels?.success?.single??Vr.labels.success.single,value:t.map(((e,t)=>`http://fake-upload-url.com/${t}`)).join(", ")});o(!0);const r=await Gr({apiHost:e.context.apiHost??ht({ignoreChatApiUrl:!0}),files:t.map((t=>({file:t,input:{sessionId:e.context.sessionId,fileName:t.name}}))),onUploadProgress:a});if(o(!1),a(0),r.length!==t.length)return d("An error occured while uploading the files");e.onSubmit({label:r.length>1?(e.block.options?.labels?.success?.multiple??Vr.labels.success.multiple).replaceAll("{total}",r.length.toString()):e.block.options?.labels?.success?.single??Vr.labels.success.single,value:r.filter(Ne).map(ao).join(", ")})},b=e=>{e.preventDefault(),l(!0)},f=()=>l(!1),m=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer?.files&&u(e.dataTransfer.files)},y=()=>n([]),v=()=>e.onSkip(e.block.options?.labels?.skip??Vr.labels.skip);return(()=>{const n=eo(),o=n.firstChild;return n.addEventListener("submit",p),o.addEventListener("drop",m),o.addEventListener("dragleave",f),o.addEventListener("dragover",b),ye(o,V(re,{get children(){return[V(oe,{get when(){return r()},get children(){return V(ne,{get when(){return t().length>1},get fallback(){return V(qt,{})},get children(){const e=Wr(),t=e.firstChild;return t.style.setProperty("transition","width 150ms cubic-bezier(0.4, 0, 0.2, 1)"),k((()=>null!=`${i()>0?i:10}%`?t.style.setProperty("width",`${i()>0?i:10}%`):t.style.removeProperty("width"))),e}})}}),V(oe,{get when(){return!r()},get children(){return[(()=>{const n=Kr(),r=n.firstChild;return ye(n,V(ne,{get when(){return t().length},get fallback(){return V(oo,{})},get children(){const e=Yr(),n=e.firstChild;return ye(e,V(io,{}),n),n.style.setProperty("bottom","5px"),ye(n,(()=>t().length)),e}}),r),k((()=>r.innerHTML=e.block.options?.labels?.placeholder??Vr.labels.placeholder)),n})(),(()=>{const t=Zr();return t.addEventListener("change",(e=>{e.currentTarget.files&&u(e.currentTarget.files)})),k((()=>t.multiple=e.block.options?.isMultipleAllowed??Vr.isMultipleAllowed)),t})()]}})]}})),ye(n,V(ne,{get when(){return 0===t().length&&!1===e.block.options?.isRequired},get children(){const t=Jr();return ye(t,V(Vt,{"on:click":v,get children(){return e.block.options?.labels?.skip??Vr.labels.skip}})),t}}),null),ye(n,V(ne,{get when(){return S((()=>!!(e.block.options?.isMultipleAllowed&&t().length>0)))()&&!r()},get children(){const n=Xr(),r=n.firstChild;return ye(r,V(ne,{get when(){return t().length},get children(){return V(Vt,{variant:"secondary","on:click":y,get children(){return e.block.options?.labels?.clear??Vr.labels.clear}})}}),null),ye(r,V(Wt,{type:"submit",disableIcon:!0,get children(){return S((()=>(e.block.options?.labels?.button??Vr.labels.button)===Vr.labels.button))()?`Upload ${t().length} file${t().length>1?"s":""}`:e.block.options?.labels?.button}}),null),n}}),null),ye(n,V(ne,{get when(){return c()},get children(){const e=Qr();return ye(e,c),e}}),null),k((()=>be(o,"typebot-upload-input py-6 flex flex-col justify-center items-center w-full bg-gray-50 border-2 border-gray-300 border-dashed cursor-pointer hover:bg-gray-100 px-8 "+(s()?"dragging-over":"")))),n})()},oo=()=>to(),io=()=>no(),ao=e=>{const t=e.split("/").pop();if(!t)return e;const n=encodeURIComponent(t);return e.replace(t,n)};(function(e){return e.STRIPE="Stripe",e})({}).STRIPE;const so={button:"Pay",success:"Success"},lo=pe('<div class="typebot-input-error-message mt-4 text-center animate-fade-in">'),co=pe('<form id="payment-form" class="flex flex-col p-4 typebot-input w-full items-center"><slot name="stripe-payment-form">');let uo,po=null,ho=null;const go=e=>{const[t,n]=_(),[r,o]=_(!1),[i,a]=_(!1);C((async()=>{if(bo(uo),!e.options?.publicKey)return n("Missing Stripe public key");var t;if(po=await(t=e.options?.publicKey,new Promise((e=>{if(window.Stripe)return e(window.Stripe(t));const n=document.createElement("script");n.src="https://js.stripe.com/v3",document.body.appendChild(n),n.onload=()=>{if(!window.Stripe)throw new Error("Stripe.js failed to load.");e(window.Stripe(t))}}))),!po)return;ho=po.elements({appearance:{theme:"stripe",variables:{colorPrimary:getComputedStyle(uo).getPropertyValue("--typebot-button-bg-color")}},clientSecret:e.options.paymentIntentSecret});ho.create("payment",{layout:"tabs"}).mount("#payment-element"),setTimeout((()=>{o(!0),e.onTransitionEnd()}),1e3)}));const s=async t=>{if(t.preventDefault(),!po||!ho)return;var r;a(!0),r={sessionId:e.context.sessionId,typebot:e.context.typebot},sessionStorage.setItem("typebotPaymentInProgress",JSON.stringify(r));const{postalCode:o,...i}=e.options?.additionalInformation?.address??{},{error:s,paymentIntent:l}=await po.confirmPayment({elements:ho,confirmParams:{return_url:window.location.href,payment_method_data:{billing_details:{name:e.options?.additionalInformation?.name,email:e.options?.additionalInformation?.email,phone:e.options?.additionalInformation?.phoneNumber,address:{...i,postal_code:o}}}},redirect:"if_required"});return bt(),a(!1),"validation_error"!==s?.type?"card_error"===s?.type?n(s.message):s||"succeeded"!==l.status?void 0:e.onSuccess():void 0};return(()=>{const n=co(),o=n.firstChild;n.addEventListener("submit",s);return"function"==typeof uo?me(uo,o):uo=o,o._$owner=A(),ye(n,V(ne,{get when(){return r()},get children(){return V(Wt,{get isLoading(){return i()},class:"mt-4 w-full max-w-lg animate-fade-in",disableIcon:!0,get children(){return[S((()=>e.options?.labels?.button??so.button))," ",S((()=>e.options?.amountLabel))]}})}}),null),ye(n,V(ne,{get when(){return t()},get children(){const e=lo();return ye(e,t),e}}),null),n})()},bo=e=>{const t=e.getRootNode().host,n=document.createElement("div");n.style.width="100%",n.slot="stripe-payment-form",t.appendChild(n);const r=document.createElement("div");r.id="payment-element",n.appendChild(r)},fo=e=>V(go,{get onSuccess(){return e.onSuccess},get options(){return e.options},get context(){return e.context},get onTransitionEnd(){return e.onTransitionEnd}}),mo=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3px" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12">'),yo=e=>(()=>{const t=mo();return fe(t,e,!0,!0),t})(),vo=pe("<div>"),wo=e=>(()=>{const t=vo();return ye(t,V(ne,{get when(){return e.isChecked},get children(){return V(yo,{})}})),k((()=>be(t,"w-4 h-4 typebot-checkbox"+(e.isChecked?" checked":"")+(e.class?` ${e.class}`:"")))),t})(),xo=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2px" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18">'),_o=e=>(()=>{const t=xo();return fe(t,e,!0,!0),t})(),ko=pe('<button class="w-5 h-5">'),$o=pe('<div class="flex justify-between items-center gap-2 w-full pr-4"><input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input" type="text">'),So=e=>{const[t,n]=_(""),[r,o]=X(e,["onInput","ref"]),i=()=>{n(""),e.onClear()};return(()=>{const a=$o(),s=a.firstChild;s.$$input=e=>(e=>{n(e),r.onInput(e)})(e.currentTarget.value);const l=e.ref;return"function"==typeof l?me(l,s):e.ref=s,s.style.setProperty("font-size","16px"),fe(s,J({get value(){return t()}},o),!1,!1),ye(a,V(ne,{get when(){return t().length>0},get children(){const e=ko();return e.addEventListener("click",i),ye(e,V(_o,{})),e}}),null),a})()};he(["input"]);const To=ar,Co="Filter the options...",Eo=pe('<div class="flex items-end typebot-input w-full">'),Ao=pe('<form class="flex flex-col items-end gap-2 w-full"><div>'),Io=pe('<span><div role="checkbox"><div class="flex items-center gap-2"><span>'),Po=pe('<span><div role="checkbox" aria-checked class="w-full py-2 px-4 font-semibold focus:outline-none cursor-pointer select-none typebot-selectable selected"><div class="flex items-center gap-2"><span>'),Ro=e=>{let t;const[n,r]=_(e.defaultItems),[o,i]=_([]);C((()=>{!jt()&&t&&t.focus({preventScroll:!0})}));const a=e=>{s(e)},s=e=>{const t=o().indexOf(e);i(-1!==t?t=>t.filter((t=>t!==e)):t=>[...t,e])},l=()=>e.onSubmit({value:o().map((t=>e.defaultItems.find((e=>e.id===t))?.content)).join(", ")}),c=t=>{r(e.defaultItems.filter((e=>e.content?.toLowerCase().includes((t??"").toLowerCase()))))};return(()=>{const i=Ao(),s=i.firstChild;return i.addEventListener("submit",l),ye(i,V(ne,{get when(){return e.options?.isSearchable},get children(){const n=Eo();return ye(n,V(So,{ref(e){"function"==typeof t?t(e):t=e},onInput:c,get placeholder(){return e.options?.searchInputPlaceholder??Co},onClear:()=>r(e.defaultItems)})),n}}),s),ye(s,V(te,{get each(){return n()},children:e=>(()=>{const t=Io(),n=t.firstChild,r=n.firstChild,i=r.firstChild;return n.addEventListener("click",(()=>a(e.id))),ye(r,V(wo,{get isChecked(){return o().some((t=>t===e.id))},class:"flex-shrink-0"}),i),ye(i,(()=>e.content)),k((r=>{const i="relative"+(jt()?" w-full":""),a=o().some((t=>t===e.id)),s="w-full py-2 px-4 font-semibold focus:outline-none cursor-pointer select-none typebot-selectable"+(o().some((t=>t===e.id))?" selected":""),l=e.id;return i!==r._v$&&be(t,r._v$=i),a!==r._v$2&&ge(n,"aria-checked",r._v$2=a),s!==r._v$3&&be(n,r._v$3=s),l!==r._v$4&&ge(n,"data-itemid",r._v$4=l),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()}),null),ye(s,V(te,{get each(){return o().filter((e=>n().every((t=>t.id!==e))))},children:t=>(()=>{const n=Po(),r=n.firstChild,o=r.firstChild,i=o.firstChild;return r.addEventListener("click",(()=>a(t))),ge(r,"data-itemid",t),ye(o,V(wo,{isChecked:!0}),i),ye(i,(()=>e.defaultItems.find((e=>e.id===t))?.content)),k((()=>be(n,"relative"+(jt()?" w-full":"")))),n})()}),null),ye(i,(()=>{const t=S((()=>o().length>0));return()=>t()&&V(Wt,{disableIcon:!0,get children(){return e.options?.buttonLabel??To}})})(),null),k((()=>be(s,"flex flex-wrap justify-end gap-2"+(e.options?.isSearchable?" overflow-y-scroll max-h-80 rounded-md":"")))),i})()},Lo=pe('<div class="flex items-end typebot-input w-full">'),Oo=pe('<div class="flex flex-col gap-2 w-full"><div>'),No=pe("<span>"),Mo=pe('<span class="flex h-3 w-3 absolute top-0 right-0 -mt-1 -mr-1 ping"><span class="animate-ping absolute inline-flex h-full w-full rounded-full brightness-200 opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 brightness-150">'),Bo=e=>{let t;const[n,r]=_(e.defaultItems);C((()=>{!jt()&&t&&t.focus({preventScroll:!0})}));const o=t=>{r(e.defaultItems.filter((e=>e.content?.toLowerCase().includes((t??"").toLowerCase()))))};return(()=>{const i=Oo(),a=i.firstChild;return ye(i,V(ne,{get when(){return e.options?.isSearchable},get children(){const n=Lo();return ye(n,V(So,{ref(e){"function"==typeof t?t(e):t=e},onInput:o,get placeholder(){return e.options?.searchInputPlaceholder??Co},onClear:()=>r(e.defaultItems)})),n}}),a),ye(a,V(te,{get each(){return n()},children:(t,r)=>(()=>{const o=No();return ye(o,V(Vt,{"on:click":()=>{return t=r(),e.onSubmit({value:n()[t].content??""});var t},get"data-itemid"(){return t.id},class:"w-full",get children(){return t.content}}),null),ye(o,(()=>{const t=S((()=>!(0!==e.chunkIndex||1!==e.defaultItems.length)));return()=>t()&&Mo()})(),null),k((()=>be(o,"relative"+(jt()?" w-full":"")))),o})()})),k((()=>be(a,"flex flex-wrap justify-end gap-2"+(e.options?.isSearchable?" overflow-y-scroll max-h-80 rounded-md":"")))),i})()},zo=pe('<div class="flex items-end typebot-input w-full">'),jo=pe('<div class="flex flex-col gap-2 w-full"><div>'),Do=pe('<button><img fetchpriority="high" class="m-auto"><div><span class="font-semibold"></span><span class="text-sm whitespace-pre-wrap text-left">'),Uo=e=>{let t;const[n,r]=_(e.defaultItems),[o,i]=_(0);C((()=>{!jt()&&t&&t.focus({preventScroll:!0})}));const a=t=>{r(e.defaultItems.filter((e=>e.title?.toLowerCase().includes((t??"").toLowerCase())||e.description?.toLowerCase().includes((t??"").toLowerCase()))))};$((()=>{o()===e.defaultItems.filter((e=>Ne(e.pictureSrc))).length&&e.onTransitionEnd()}));const s=()=>{i((e=>e+1))};return(()=>{const o=jo(),i=o.firstChild;return ye(o,V(ne,{get when(){return e.options?.isSearchable},get children(){const n=zo();return ye(n,V(So,{ref(e){"function"==typeof t?t(e):t=e},onInput:a,get placeholder(){return e.options?.searchInputPlaceholder??""},onClear:()=>r(e.defaultItems)})),n}}),i),ye(i,V(te,{get each(){return n()},children:(t,r)=>(()=>{const o=Do(),i=o.firstChild,a=i.nextSibling,l=a.firstChild,c=l.nextSibling;return o.addEventListener("click",(()=>(t=>{const r=n()[t];return e.onSubmit({label:ze(r.title)?r.title:r.pictureSrc??r.id,value:r.id})})(r()))),i.addEventListener("load",s),ye(l,(()=>t.title)),ye(c,(()=>t.description)),k((e=>{const n=t.id,s="flex flex-col typebot-picture-button focus:outline-none filter hover:brightness-90 active:brightness-75 justify-between  "+(je(t.pictureSrc)?"has-svg":""),l=t.pictureSrc,c=t.title??`Picture ${r()+1}`,d=`Picture choice ${r()+1}`,u="flex flex-col gap-1 py-2 flex-shrink-0 px-4 w-full"+(t.description?" items-start":"");return n!==e._v$&&ge(o,"data-itemid",e._v$=n),s!==e._v$2&&be(o,e._v$2=s),l!==e._v$3&&ge(i,"src",e._v$3=l),c!==e._v$4&&ge(i,"alt",e._v$4=c),d!==e._v$5&&ge(i,"elementtiming",e._v$5=d),u!==e._v$6&&be(a,e._v$6=u),e}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),o})()})),k((()=>be(i,"gap-2 flex flex-wrap justify-end"+(e.options?.isSearchable?" overflow-y-scroll max-h-[464px] rounded-md":"")))),o})()},Fo=ar,Ho="Filter the options...",qo=pe('<div class="flex items-end typebot-input w-full">'),Go=pe('<form class="flex flex-col gap-2 w-full items-end"><div>'),Vo=pe('<span class="font-semibold">'),Wo=pe('<span class="text-sm whitespace-pre-wrap text-left">'),Yo=pe('<div class="flex flex-col gap-1 ">'),Ko=pe('<div role="checkbox"><img fetchpriority="high" class="m-auto"><div>'),Zo=pe('<div role="checkbox" aria-checked class="flex flex-col focus:outline-none cursor-pointer select-none typebot-selectable-picture selected"><img fetchpriority="high"><div>'),Jo=e=>{let t;const[n,r]=_(e.defaultItems),[o,i]=_([]),[a,s]=_(0);C((()=>{!jt()&&t&&t.focus({preventScroll:!0})}));const l=e=>{c(e)},c=e=>{const t=o().indexOf(e);i(-1!==t?t=>t.filter((t=>t!==e)):t=>[...t,e])},d=()=>e.onSubmit({value:o().map((t=>{const n=e.defaultItems.find((e=>e.id===t));return ze(n?.title)?n.title:n?.pictureSrc})).join(", ")}),u=t=>{r(e.defaultItems.filter((e=>e.title?.toLowerCase().includes((t??"").toLowerCase())||e.description?.toLowerCase().includes((t??"").toLowerCase()))))};$((()=>{a()===e.defaultItems.filter((e=>Ne(e.pictureSrc))).length&&e.onTransitionEnd()}));const p=()=>{s((e=>e+1))};return(()=>{const i=Go(),a=i.firstChild;return i.addEventListener("submit",d),ye(i,V(ne,{get when(){return e.options?.isSearchable},get children(){const n=qo();return ye(n,V(So,{ref(e){"function"==typeof t?t(e):t=e},onInput:u,get placeholder(){return e.options?.searchInputPlaceholder??Ho},onClear:()=>r(e.defaultItems)})),n}}),a),ye(a,V(te,{get each(){return n()},children:(e,t)=>(()=>{const n=Ko(),r=n.firstChild,i=r.nextSibling;return n.addEventListener("click",(()=>l(e.id))),r.addEventListener("load",p),ye(i,V(wo,{get isChecked(){return o().some((t=>t===e.id))},get class(){return"flex-shrink-0"+(e.title||e.description?" mt-1":void 0)}}),null),ye(i,V(ne,{get when(){return e.title||e.description},get children(){const t=Yo();return ye(t,V(ne,{get when(){return e.title},get children(){const t=Vo();return ye(t,(()=>e.title)),t}}),null),ye(t,V(ne,{get when(){return e.description},get children(){const t=Wo();return ye(t,(()=>e.description)),t}}),null),t}}),null),k((a=>{const s=o().some((t=>t===e.id)),l="flex flex-col focus:outline-none cursor-pointer select-none typebot-selectable-picture"+(o().some((t=>t===e.id))?" selected":"")+(je(e.pictureSrc)?" has-svg":""),c=e.id,d=e.pictureSrc,u=e.title??`Picture ${t()+1}`,p=`Picture choice ${t()+1}`,h="flex gap-3 py-2 flex-shrink-0"+(Be(e.title)&&Be(e.description)?" justify-center":" px-3");return s!==a._v$&&ge(n,"aria-checked",a._v$=s),l!==a._v$2&&be(n,a._v$2=l),c!==a._v$3&&ge(n,"data-itemid",a._v$3=c),d!==a._v$4&&ge(r,"src",a._v$4=d),u!==a._v$5&&ge(r,"alt",a._v$5=u),p!==a._v$6&&ge(r,"elementtiming",a._v$6=p),h!==a._v$7&&be(i,a._v$7=h),a}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0}),n})()}),null),ye(a,V(te,{get each(){return o().filter((e=>n().every((t=>t.id!==e)))).map((t=>e.defaultItems.find((e=>e.id===t)))).filter(Ne)},children:(t,n)=>(()=>{const r=Zo(),i=r.firstChild,a=i.nextSibling;return r.addEventListener("click",(()=>l(t.id))),ye(a,V(wo,{get isChecked(){return o().some((e=>e===t.id))},get class(){return"flex-shrink-0"+(t.title||t.description?" mt-1":void 0)}}),null),ye(a,V(ne,{get when(){return t.title||t.description},get children(){const e=Yo();return ye(e,V(ne,{get when(){return t.title},get children(){const e=Vo();return ye(e,(()=>t.title)),e}}),null),ye(e,V(ne,{get when(){return t.description},get children(){const e=Wo();return ye(e,(()=>t.description)),e}}),null),e}}),null),k((o=>{const s=t.id,l=e.defaultItems.find((e=>e.id===t.id))?.pictureSrc,c=t.title??`Selected picture ${n()+1}`,d=`Selected picture choice ${n()+1}`,u="flex gap-3 py-2 flex-shrink-0"+(Be(t.title)&&Be(t.description)?" justify-center":" pl-4");return s!==o._v$8&&ge(r,"data-itemid",o._v$8=s),l!==o._v$9&&ge(i,"src",o._v$9=l),c!==o._v$10&&ge(i,"alt",o._v$10=c),d!==o._v$11&&ge(i,"elementtiming",o._v$11=d),u!==o._v$12&&be(a,o._v$12=u),o}),{_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0}),r})()}),null),ye(i,(()=>{const t=S((()=>o().length>0));return()=>t()&&V(Wt,{disableIcon:!0,get children(){return e.options?.buttonLabel??Fo}})})(),null),k((()=>be(a,"flex flex-wrap justify-end gap-2"+(e.options?.isSearchable?" overflow-y-scroll max-h-[464px] rounded-md":"")))),i})()},[Xo,Qo]=_([]),ei=Symbol("store-raw"),ti=Symbol("store-node");function ni(e){let t;return null!=e&&"object"==typeof e&&(e[l]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ri(e,t=new Set){let n,r,o,i;if(n=null!=e&&e[ei])return n;if(!ni(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,i=e.length;n<i;n++)o=e[n],(r=ri(o,t))!==o&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let s=0,l=n.length;s<l;s++)i=n[s],a[i].get||(o=e[i],(r=ri(o,t))!==o&&(e[i]=r))}return e}function oi(e,t,n){return e[t]||(e[t]=function(e){const[t,n]=_(e,{equals:!1,internal:!0});return t.$=n,t}(n))}function ii(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],i=e.length;void 0===n?delete e[t]:e[t]=n;let a,s=function(e){let t=e[ti];return t||Object.defineProperty(e,ti,{value:t=Object.create(null)}),t}(e);if((a=oi(s,t,o))&&a.$((()=>n)),Array.isArray(e)&&e.length!==i){for(let t=e.length;t<i;t++)(a=s[t])&&a.$();(a=oi(s,"length",i))&&a.$(e.length)}(a=s._)&&a.$()}const ai=Symbol("store-root");function si(e,t,n,r,o){const i=t[n];if(e===i)return;if(n!==ai&&(!ni(e)||!ni(i)||o&&e[o]!==i[o]))return void ii(t,n,e);if(Array.isArray(e)){if(e.length&&i.length&&(!r||o&&e[0]&&null!=e[0][o])){let t,n,a,s,l,c,d,u;for(a=0,s=Math.min(i.length,e.length);a<s&&(i[a]===e[a]||o&&i[a]&&e[a]&&i[a][o]===e[a][o]);a++)si(e[a],i,a,r,o);const p=new Array(e.length),h=new Map;for(s=i.length-1,l=e.length-1;s>=a&&l>=a&&(i[s]===e[l]||o&&i[a]&&e[a]&&i[s][o]===e[l][o]);s--,l--)p[l]=i[s];if(a>l||a>s){for(n=a;n<=l;n++)ii(i,n,e[n]);for(;n<e.length;n++)ii(i,n,p[n]),si(e[n],i,n,r,o);return void(i.length>e.length&&ii(i,"length",e.length))}for(d=new Array(l+1),n=l;n>=a;n--)c=e[n],u=o&&c?c[o]:c,t=h.get(u),d[n]=void 0===t?-1:t,h.set(u,n);for(t=a;t<=s;t++)c=i[t],u=o&&c?c[o]:c,n=h.get(u),void 0!==n&&-1!==n&&(p[n]=i[t],n=d[n],h.set(u,n));for(n=a;n<e.length;n++)n in p?(ii(i,n,p[n]),si(e[n],i,n,r,o)):ii(i,n,e[n])}else for(let t=0,n=e.length;t<n;t++)si(e[t],i,t,r,o);return void(i.length>e.length&&ii(i,"length",e.length))}const a=Object.keys(e);for(let t=0,n=a.length;t<n;t++)si(e[a[t]],i,a[t],r,o);const s=Object.keys(i);for(let t=0,n=s.length;t<n;t++)void 0===e[s[t]]&&ii(i,s[t],void 0)}function li(e,t={}){const{merge:n,key:r="id"}=t,o=ri(e);return e=>{if(!ni(e)||!ni(o))return o;const t=si(o,{[ai]:e},ai,n,r);return void 0===t?e:t}}function ci(e,t){const[n,r]=_(!1);if(!t.storage)return[...e,()=>!1];const o=di(t.storage||Bn.rememberUser.storage),i=JSON.stringify.bind(JSON),a=JSON.parse.bind(JSON),s=o.getItem(t.key),l="function"==typeof e[0]?t=>e[1]((()=>a(t))):t=>e[1](li(a(t)));return s&&(l(s),r(!0),t.onRecovered?.()),[e[0],"function"==typeof e[0]?n=>{r(!1);const a=e[1](n);return n?o.setItem(t.key,i(a)):o.removeItem(t.key),a}:(...n)=>{r(!1),e[1](...n);const a=i(T((()=>e[0])));o.setItem(t.key,a)},n]}const di=e=>"session"===(e??Bn.rememberUser.storage)?sessionStorage:localStorage;let ui=function(e){return e.COLOR="Color",e.IMAGE="Image",e.NONE="None",e}({});const pi="#303235",hi="#FFFFFF",gi="Open Sans",bi=ui.COLOR,fi="#ffffff",mi="absolute",yi="medium",vi="transparent",wi=pi,xi=hi,_i="#0042DA",ki=hi,$i=pi,Si=!0,Ti=!1,Ci=pe('<div class="flex justify-end animate-fade-in gap-2">'),Ei=pe("<div>"),Ai=e=>{const[t,n]=ci(_(),{key:`typebot-${e.context.typebot.id}-input-${e.chunkIndex}`,storage:e.context.storage}),[r,o]=_(),i=async({label:t,value:r})=>{n(t??r),e.onSubmit(r??t)},a=t=>{n(t),e.onSkip()};return $((()=>{const t=Xo().findLast((t=>e.chunkIndex===t.inputIndex))?.formattedMessage;t&&o(t)})),V(re,{get children(){return[V(oe,{get when(){return t()&&!e.hasError},get children(){return V(ir,{get message(){return r()??t()},get showAvatar(){return e.guestAvatar?.isEnabled??Ti},get avatarSrc(){return e.guestAvatar?.url&&e.guestAvatar.url}})}}),V(oe,{get when(){return Me(t())||e.hasError},get children(){const n=Ci(),r=e.ref;return"function"==typeof r?me(r,n):e.ref=n,ye(n,(()=>{const t=S((()=>!!e.hasHostAvatar));return()=>t()&&(()=>{const e=Ei();return k((()=>be(e,"flex flex-shrink-0 items-center "+(jt()?"w-6 h-6":"w-10 h-10")))),e})()})(),null),ye(n,V(Ii,{get context(){return e.context},get block(){return e.block},get chunkIndex(){return e.chunkIndex},get isInputPrefillEnabled(){return e.isInputPrefillEnabled},get existingAnswer(){return S((()=>!!e.hasError))()?t():void 0},get onTransitionEnd(){return e.onTransitionEnd},onSubmit:i,onSkip:a}),null),k((()=>ge(n,"data-blockid",e.block.id))),n}})]}})},Ii=e=>{const t=t=>e.onSubmit(t),n=()=>e.existingAnswer??(e.isInputPrefillEnabled?e.block.prefilledValue:void 0),r=()=>e.onSubmit({value:e.block.options?.labels?.success??so.success});return V(re,{get children(){return[V(oe,{get when(){return e.block.type===sr.TEXT},get children(){return V(dr,{get block(){return e.block},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return e.block.type===sr.NUMBER},get children(){return V(hr,{get block(){return e.block},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return e.block.type===sr.EMAIL},get children(){return V(fr,{get block(){return e.block},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return e.block.type===sr.URL},get children(){return V(vr,{get block(){return e.block},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return e.block.type===sr.PHONE},get children(){return V(Tr,{get labels(){return e.block.options?.labels},get defaultCountryCode(){return e.block.options?.defaultCountryCode},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return e.block.type===sr.DATE},get children(){return V(Pr,{get options(){return e.block.options},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return Pi(e.block)},keyed:!0,children:n=>V(re,{get children(){return[V(oe,{get when(){return!n.options?.isMultipleChoice},get children(){return V(Bo,{get chunkIndex(){return e.chunkIndex},get defaultItems(){return n.items},get options(){return n.options},onSubmit:t})}}),V(oe,{get when(){return n.options?.isMultipleChoice},get children(){return V(Ro,{get defaultItems(){return n.items},get options(){return n.options},onSubmit:t})}})]}})}),V(oe,{get when(){return Ri(e.block)},keyed:!0,children:n=>V(re,{get children(){return[V(oe,{get when(){return!n.options?.isMultipleChoice},get children(){return V(Uo,{get defaultItems(){return n.items},get options(){return n.options},onSubmit:t,get onTransitionEnd(){return e.onTransitionEnd}})}}),V(oe,{get when(){return n.options?.isMultipleChoice},get children(){return V(Jo,{get defaultItems(){return n.items},get options(){return n.options},onSubmit:t,get onTransitionEnd(){return e.onTransitionEnd}})}})]}})}),V(oe,{get when(){return e.block.type===sr.RATING},get children(){return V(Fr,{get block(){return e.block},get defaultValue(){return n()},onSubmit:t})}}),V(oe,{get when(){return e.block.type===sr.FILE},get children(){return V(ro,{get context(){return e.context},get block(){return e.block},onSubmit:t,get onSkip(){return e.onSkip}})}}),V(oe,{get when(){return e.block.type===sr.PAYMENT},get children(){return V(fo,{get context(){return e.context},get options(){return{...e.block.options,...e.block.runtimeOptions}},onSuccess:r,get onTransitionEnd(){return e.onTransitionEnd}})}})]}})},Pi=e=>e?.type===sr.CHOICE?e:void 0,Ri=e=>e?.type===sr.PICTURE_CHOICE?e:void 0,Li=pe("<div><div>"),Oi=e=>{let t;const[n,r]=_(0),o=new ResizeObserver((e=>r(e[0].target.clientHeight-(jt()?24:40))));return C((()=>{t&&o.observe(t)})),E((()=>{t&&o.unobserve(t)})),(()=>{const r=Li(),o=r.firstChild;return"function"==typeof t?me(t,r):t=r,ye(o,V(rr,{get initialAvatarSrc(){return e.hostAvatarSrc}})),k((t=>{const i="flex flex-shrink-0 items-center relative typebot-avatar-container "+(jt()?"w-6":"w-10"),a="absolute flex items-center top-0"+(jt()?" w-6 h-6":" w-10 h-10")+(e.hideAvatar?" opacity-0":" opacity-100"),s=`${n()}px`,l=e.isTransitionDisabled?void 0:"top 350ms ease-out, opacity 250ms ease-out";return i!==t._v$&&be(r,t._v$=i),a!==t._v$2&&be(o,t._v$2=a),s!==t._v$3&&(null!=(t._v$3=s)?o.style.setProperty("top",s):o.style.removeProperty("top")),l!==t._v$4&&(null!=(t._v$4=l)?o.style.setProperty("transition",l):o.style.removeProperty("transition")),t}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r})()},[Ni,Mi]=_();function Bi(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let zi={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ji(e){zi=e}const Di=/[&<>"']/,Ui=new RegExp(Di.source,"g"),Fi=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Hi=new RegExp(Fi.source,"g"),qi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gi=e=>qi[e];function Vi(e,t){if(t){if(Di.test(e))return e.replace(Ui,Gi)}else if(Fi.test(e))return e.replace(Hi,Gi);return e}const Wi=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Yi(e){return e.replace(Wi,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Ki=/(^|[^\[])\^/g;function Zi(e,t){e="string"==typeof e?e:e.source,t=t||"";const n={replace:(t,r)=>(r=(r="object"==typeof r&&"source"in r?r.source:r).replace(Ki,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}function Ji(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return null}return e}const Xi={exec:()=>null};function Qi(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,o=t;for(;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function ea(e,t,n){const r=e.length;if(0===r)return"";let o=0;for(;o<r;){const i=e.charAt(r-o-1);if(i!==t||n){if(i===t||!n)break;o++}else o++}return e.slice(0,r-o)}function ta(e,t,n,r){const o=t.href,i=t.title?Vi(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:o,title:i,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:o,title:i,text:Vi(a)}}class na{options;rules;lexer;constructor(e){this.options=e||zi}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ea(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=ea(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;const r=this.lexer.blockTokens(e);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:r,text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,o={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",s="",l=!1;for(;e;){let n=!1;if(!(t=i.exec(e)))break;if(this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let r=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],d=0;this.options.pedantic?(d=2,s=r.trimStart()):(d=t[2].search(/[^ ]/),d=d>4?1:d,s=r.slice(d),d+=t[1].length);let u=!1;if(!r&&/^ *$/.test(c)&&(a+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,d-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),o=new RegExp(`^ {0,${Math.min(3,d-1)}}(?:\`\`\`|~~~)`),i=new RegExp(`^ {0,${Math.min(3,d-1)}}#`);for(;e;){const l=e.split("\n",1)[0];if(c=l,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),o.test(c))break;if(i.test(c))break;if(t.test(c))break;if(n.test(e))break;if(c.search(/[^ ]/)>=d||!c.trim())s+="\n"+c.slice(d);else{if(u)break;if(r.search(/[^ ]/)>=4)break;if(o.test(r))break;if(i.test(r))break;if(n.test(r))break;s+="\n"+c}u||c.trim()||(u=!0),a+=l+"\n",e=e.substring(l.length+1),r=c.slice(d)}}o.loose||(l?o.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let p,h=null;this.options.gfm&&(h=/^\[[ xX]\] /.exec(s),h&&(p="[ ] "!==h[0],s=s.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!h,checked:p,loose:!1,text:s,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=s.trimEnd(),o.raw=o.raw.trimEnd();for(let e=0;e<o.items.length;e++)if(this.lexer.state.top=!1,o.items[e].tokens=this.lexer.blockTokens(o.items[e].text,[]),!o.loose){const t=o.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));o.loose=n}if(o.loose)for(let e=0;e<o.items.length;e++)o.items[e].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(t){if(!/[:|]/.test(t[2]))return;const e={type:"table",raw:t[0],header:Qi(t[1]).map((e=>({text:e,tokens:[]}))),align:t[2].replace(/^\||\| *$/g,"").split("|"),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){let t,n,r,o,i=e.align.length;for(t=0;t<i;t++){const n=e.align[t];n&&(/^ *-+: *$/.test(n)?e.align[t]="right":/^ *:-+: *$/.test(n)?e.align[t]="center":/^ *:-+ *$/.test(n)?e.align[t]="left":e.align[t]=null)}for(i=e.rows.length,t=0;t<i;t++)e.rows[t]=Qi(e.rows[t],e.header.length).map((e=>({text:e,tokens:[]})));for(i=e.header.length,n=0;n<i;n++)e.header[n].tokens=this.lexer.inline(e.header[n].text);for(i=e.rows.length,n=0;n<i;n++)for(o=e.rows[n],r=0;r<o.length;r++)o[r].tokens=this.lexer.inline(o[r].text);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Vi(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=ea(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),ta(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return ta(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...r[0]].length-1;let o,i,a=n,s=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r[0].length-1);null!=(r=l.exec(t));){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(i=[...o].length,r[3]||r[4]){a+=i;continue}if((r[5]||r[6])&&n%3&&!((n+i)%3)){s+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+s);const t=[...e].slice(0,n+r.index+i+1).join("");if(Math.min(n,i)%2){const e=t.slice(1,-1);return{type:"em",raw:t,text:e,tokens:this.lexer.inlineTokens(e)}}const l=t.slice(2,-2);return{type:"strong",raw:t,text:l,tokens:this.lexer.inlineTokens(l)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=Vi(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=Vi(t[1]),n="mailto:"+e):(e=Vi(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=Vi(t[0]),n="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])[0]}while(r!==t[0]);e=Vi(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:Vi(t[0]),{type:"text",raw:t[0],text:e}}}}const ra={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Xi,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ra.def=Zi(ra.def).replace("label",ra._label).replace("title",ra._title).getRegex(),ra.bullet=/(?:[*+-]|\d{1,9}[.)])/,ra.listItemStart=Zi(/^( *)(bull) */).replace("bull",ra.bullet).getRegex(),ra.list=Zi(ra.list).replace(/bull/g,ra.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ra.def.source+")").getRegex(),ra._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ra._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ra.html=Zi(ra.html,"i").replace("comment",ra._comment).replace("tag",ra._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ra.lheading=Zi(ra.lheading).replace(/bull/g,ra.bullet).getRegex(),ra.paragraph=Zi(ra._paragraph).replace("hr",ra.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ra._tag).getRegex(),ra.blockquote=Zi(ra.blockquote).replace("paragraph",ra.paragraph).getRegex(),ra.normal={...ra},ra.gfm={...ra.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},ra.gfm.table=Zi(ra.gfm.table).replace("hr",ra.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ra._tag).getRegex(),ra.gfm.paragraph=Zi(ra._paragraph).replace("hr",ra.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ra.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ra._tag).getRegex(),ra.pedantic={...ra.normal,html:Zi("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ra._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Zi(ra.normal._paragraph).replace("hr",ra.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ra.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const oa={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Xi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Xi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/,_punctuation:"\\p{P}$+<=>`^|~"};oa.punctuation=Zi(oa.punctuation,"u").replace(/punctuation/g,oa._punctuation).getRegex(),oa.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,oa.anyPunctuation=/\\[punct]/g,oa._escapes=/\\([punct])/g,oa._comment=Zi(ra._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),oa.emStrong.lDelim=Zi(oa.emStrong.lDelim,"u").replace(/punct/g,oa._punctuation).getRegex(),oa.emStrong.rDelimAst=Zi(oa.emStrong.rDelimAst,"gu").replace(/punct/g,oa._punctuation).getRegex(),oa.emStrong.rDelimUnd=Zi(oa.emStrong.rDelimUnd,"gu").replace(/punct/g,oa._punctuation).getRegex(),oa.anyPunctuation=Zi(oa.anyPunctuation,"gu").replace(/punct/g,oa._punctuation).getRegex(),oa._escapes=Zi(oa._escapes,"gu").replace(/punct/g,oa._punctuation).getRegex(),oa._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,oa._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,oa.autolink=Zi(oa.autolink).replace("scheme",oa._scheme).replace("email",oa._email).getRegex(),oa._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,oa.tag=Zi(oa.tag).replace("comment",oa._comment).replace("attribute",oa._attribute).getRegex(),oa._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,oa._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,oa._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,oa.link=Zi(oa.link).replace("label",oa._label).replace("href",oa._href).replace("title",oa._title).getRegex(),oa.reflink=Zi(oa.reflink).replace("label",oa._label).replace("ref",ra._label).getRegex(),oa.nolink=Zi(oa.nolink).replace("ref",ra._label).getRegex(),oa.reflinkSearch=Zi(oa.reflinkSearch,"g").replace("reflink",oa.reflink).replace("nolink",oa.nolink).getRegex(),oa.normal={...oa},oa.pedantic={...oa.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Zi(/^!?\[(label)\]\((.*?)\)/).replace("label",oa._label).getRegex(),reflink:Zi(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",oa._label).getRegex()},oa.gfm={...oa.normal,escape:Zi(oa.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},oa.gfm.url=Zi(oa.gfm.url,"i").replace("email",oa.gfm._extended_email).getRegex(),oa.breaks={...oa.gfm,br:Zi(oa.br).replace("{2,}","*").getRegex(),text:Zi(oa.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class ia{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||zi,this.options.tokenizer=this.options.tokenizer||new na,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:ra.normal,inline:oa.normal};this.options.pedantic?(t.block=ra.pedantic,t.inline=oa.pedantic):this.options.gfm&&(t.block=ra.gfm,this.options.breaks?t.inline=oa.breaks:t.inline=oa.gfm),this.tokenizer.rules=t}static get rules(){return{block:ra,inline:oa}}static lex(e,t){return new ia(t).lex(e)}static lexInline(e,t){return new ia(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,o,i;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o)))r=t[t.length-1],i&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,o,i,a,s,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,i.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(a||(s=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,s))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(o=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((e=>{r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(o))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),a=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class aa{options;constructor(e){this.options=e||zi}code(e,t,n){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Vi(r)+'">'+(n?e:Vi(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Vi(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,n){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const r=Ji(e);if(null===r)return n;let o='<a href="'+(e=r)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}image(e,t,n){const r=Ji(e);if(null===r)return n;let o=`<img src="${e=r}" alt="${n}"`;return t&&(o+=` title="${t}"`),o+=">",o}text(e){return e}}class sa{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class la{options;renderer;textRenderer;constructor(e){this.options=e||zi,this.options.renderer=this.options.renderer||new aa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new sa}static parse(e,t){return new la(t).parse(e)}static parseInline(e,t){return new la(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){const o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const e=o,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}switch(o.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":{const e=o;n+=this.renderer.heading(this.parseInline(e.tokens),e.depth,Yi(this.parseInline(e.tokens,this.textRenderer)));continue}case"code":{const e=o;n+=this.renderer.code(e.text,e.lang,!!e.escaped);continue}case"table":{const e=o;let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.renderer.tablecell(this.parseInline(e.header[t].tokens),{header:!0,align:e.align[t]});t+=this.renderer.tablerow(r);let i="";for(let t=0;t<e.rows.length;t++){const n=e.rows[t];r="";for(let t=0;t<n.length;t++)r+=this.renderer.tablecell(this.parseInline(n[t].tokens),{header:!1,align:e.align[t]});i+=this.renderer.tablerow(r)}n+=this.renderer.table(t,i);continue}case"blockquote":{const e=o,t=this.parse(e.tokens);n+=this.renderer.blockquote(t);continue}case"list":{const e=o,t=e.ordered,r=e.start,i=e.loose;let a="";for(let t=0;t<e.items.length;t++){const n=e.items[t],r=n.checked,o=n.task;let s="";if(n.task){const e=this.renderer.checkbox(!!r);i?n.tokens.length>0&&"paragraph"===n.tokens[0].type?(n.tokens[0].text=e+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&"text"===n.tokens[0].tokens[0].type&&(n.tokens[0].tokens[0].text=e+" "+n.tokens[0].tokens[0].text)):n.tokens.unshift({type:"text",text:e+" "}):s+=e+" "}s+=this.parse(n.tokens,i),a+=this.renderer.listitem(s,o,!!r)}n+=this.renderer.list(a,t,r);continue}case"html":{const e=o;n+=this.renderer.html(e.text,e.block);continue}case"paragraph":{const e=o;n+=this.renderer.paragraph(this.parseInline(e.tokens));continue}case"text":{let i=o,a=i.tokens?this.parseInline(i.tokens):i.text;for(;r+1<e.length&&"text"===e[r+1].type;)i=e[++r],a+="\n"+(i.tokens?this.parseInline(i.tokens):i.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const e=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=e||"";continue}}switch(o.type){case"escape":{const e=o;n+=t.text(e.text);break}case"html":{const e=o;n+=t.html(e.text);break}case"link":{const e=o;n+=t.link(e.href,e.title,this.parseInline(e.tokens,t));break}case"image":{const e=o;n+=t.image(e.href,e.title,e.text);break}case"strong":{const e=o;n+=t.strong(this.parseInline(e.tokens,t));break}case"em":{const e=o;n+=t.em(this.parseInline(e.tokens,t));break}case"codespan":{const e=o;n+=t.codespan(e.text);break}case"br":n+=t.br();break;case"del":{const e=o;n+=t.del(this.parseInline(e.tokens,t));break}case"text":{const e=o;n+=t.text(e.text);break}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class ca{options;constructor(e){this.options=e||zi}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}const da=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(ia.lex,la.parse);parseInline=this.#e(ia.lexInline,la.parseInline);Parser=la;parser=la.parse;Renderer=aa;TextRenderer=sa;Lexer=ia;lexer=ia.lex;Tokenizer=na;Hooks=ca;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const e=r;for(const r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{n=n.concat(this.walkTokens(e[r],t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new aa(this.defaults);for(const n in e.renderer){const r=e.renderer[n],o=n,i=t[o];t[o]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new na(this.defaults);for(const n in e.tokenizer){const r=e.tokenizer[n],o=n,i=t[o];t[o]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new ca;for(const n in e.hooks){const r=e.hooks[n],o=n,i=t[o];ca.passThroughHooks.has(n)?t[o]=e=>{if(this.defaults.async)return Promise.resolve(r.call(t,e)).then((e=>i.call(t,e)));const n=r.call(t,e);return i.call(t,n)}:t[o]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}#e(e,t){return(n,r)=>{const o={...r},i={...this.defaults,...o};!0===this.defaults.async&&!1===o.async&&(i.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),i.async=!0);const a=this.#t(!!i.silent,!!i.async);if(null==n)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof n)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(i.hooks&&(i.hooks.options=i),i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then((t=>e(t,i))).then((e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then((()=>e)):e)).then((e=>t(e,i))).then((e=>i.hooks?i.hooks.postprocess(e):e)).catch(a);try{i.hooks&&(n=i.hooks.preprocess(n));const r=e(n,i);i.walkTokens&&this.walkTokens(r,i.walkTokens);let o=t(r,i);return i.hooks&&(o=i.hooks.postprocess(o)),o}catch(e){return a(e)}}}#t(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+Vi(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function ua(e,t){return da.parse(e,t)}ua.options=ua.setOptions=function(e){return da.setOptions(e),ua.defaults=da.defaults,ji(ua.defaults),ua},ua.getDefaults=Bi,ua.defaults=zi,ua.use=function(...e){return da.use(...e),ua.defaults=da.defaults,ji(ua.defaults),ua},ua.walkTokens=function(e,t){return da.walkTokens(e,t)},ua.parseInline=da.parseInline,ua.Parser=la,ua.parser=la.parse,ua.Renderer=aa,ua.TextRenderer=sa,ua.Lexer=ia,ua.lexer=ia.lex,ua.Tokenizer=na,ua.Hooks=ca,ua.parse=ua,ua.options,ua.setOptions,ua.use,ua.walkTokens,ua.parseInline;
/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */
const{entries:pa,setPrototypeOf:ha,isFrozen:ga,getPrototypeOf:ba,getOwnPropertyDescriptor:fa}=Object;let{freeze:ma,seal:ya,create:va}=Object,{apply:wa,construct:xa}="undefined"!=typeof Reflect&&Reflect;ma||(ma=function(e){return e}),ya||(ya=function(e){return e}),wa||(wa=function(e,t,n){return e.apply(t,n)}),xa||(xa=function(e,t){return new e(...t)});const _a=Oa(Array.prototype.forEach),ka=Oa(Array.prototype.pop),$a=Oa(Array.prototype.push),Sa=Oa(String.prototype.toLowerCase),Ta=Oa(String.prototype.toString),Ca=Oa(String.prototype.match),Ea=Oa(String.prototype.replace),Aa=Oa(String.prototype.indexOf),Ia=Oa(String.prototype.trim),Pa=Oa(RegExp.prototype.test),Ra=(La=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xa(La,t)});var La;function Oa(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return wa(e,t,r)}}function Na(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sa;ha&&ha(e,null);let r=t.length;for(;r--;){let o=t[r];if("string"==typeof o){const e=n(o);e!==o&&(ga(t)||(t[r]=e),o=e)}e[o]=!0}return e}function Ma(e){const t=va(null);for(const[n,r]of pa(e))void 0!==fa(e,n)&&(t[n]=r);return t}function Ba(e,t){for(;null!==e;){const n=fa(e,t);if(n){if(n.get)return Oa(n.get);if("function"==typeof n.value)return Oa(n.value)}e=ba(e)}return function(e){return console.warn("fallback value for",e),null}}const za=ma(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ja=ma(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Da=ma(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ua=ma(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Fa=ma(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ha=ma(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),qa=ma(["#text"]),Ga=ma(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Va=ma(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wa=ma(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ya=ma(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ka=ya(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Za=ya(/<%[\w\W]*|[\w\W]*%>/gm),Ja=ya(/\${[\w\W]*}/gm),Xa=ya(/^data-[\-\w.\u00B7-\uFFFF]/),Qa=ya(/^aria-[\-\w]+$/),es=ya(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ts=ya(/^(?:\w+script|data):/i),ns=ya(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rs=ya(/^html$/i);var os=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ka,ERB_EXPR:Za,TMPLIT_EXPR:Ja,DATA_ATTR:Xa,ARIA_ATTR:Qa,IS_ALLOWED_URI:es,IS_SCRIPT_OR_DATA:ts,ATTR_WHITESPACE:ns,DOCTYPE_NAME:rs});const is=function(){return"undefined"==typeof window?null:window};var as=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:is();const n=t=>e(t);if(n.version="3.0.6",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;let{document:r}=t;const o=r,i=o.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:g}=t,b=c.prototype,f=Ba(b,"cloneNode"),m=Ba(b,"nextSibling"),y=Ba(b,"childNodes"),v=Ba(b,"parentNode");if("function"==typeof s){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let w,x="";const{implementation:_,createNodeIterator:k,createDocumentFragment:$,getElementsByTagName:S}=r,{importNode:T}=o;let C={};n.isSupported="function"==typeof pa&&"function"==typeof v&&_&&void 0!==_.createHTMLDocument;const{MUSTACHE_EXPR:E,ERB_EXPR:A,TMPLIT_EXPR:I,DATA_ATTR:P,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:O}=os;let{IS_ALLOWED_URI:N}=os,M=null;const B=Na({},[...za,...ja,...Da,...Fa,...qa]);let z=null;const j=Na({},[...Ga,...Va,...Wa,...Ya]);let D=Object.seal(va(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,F=null,H=!0,q=!0,G=!1,V=!0,W=!1,Y=!1,K=!1,Z=!1,J=!1,X=!1,Q=!1,ee=!0,te=!1,ne=!0,re=!1,oe={},ie=null;const ae=Na({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let se=null;const le=Na({},["audio","video","img","source","image","track"]);let ce=null;const de=Na({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml";let ge=he,be=!1,fe=null;const me=Na({},[ue,pe,he],Ta);let ye=null;const ve=["application/xhtml+xml","text/html"];let we=null,xe=null;const _e=r.createElement("form"),ke=function(e){return e instanceof RegExp||e instanceof Function},$e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!xe||xe!==e){if(e&&"object"==typeof e||(e={}),e=Ma(e),ye=ye=-1===ve.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,we="application/xhtml+xml"===ye?Ta:Sa,M="ALLOWED_TAGS"in e?Na({},e.ALLOWED_TAGS,we):B,z="ALLOWED_ATTR"in e?Na({},e.ALLOWED_ATTR,we):j,fe="ALLOWED_NAMESPACES"in e?Na({},e.ALLOWED_NAMESPACES,Ta):me,ce="ADD_URI_SAFE_ATTR"in e?Na(Ma(de),e.ADD_URI_SAFE_ATTR,we):de,se="ADD_DATA_URI_TAGS"in e?Na(Ma(le),e.ADD_DATA_URI_TAGS,we):le,ie="FORBID_CONTENTS"in e?Na({},e.FORBID_CONTENTS,we):ae,U="FORBID_TAGS"in e?Na({},e.FORBID_TAGS,we):{},F="FORBID_ATTR"in e?Na({},e.FORBID_ATTR,we):{},oe="USE_PROFILES"in e&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,V=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,W=e.SAFE_FOR_TEMPLATES||!1,Y=e.WHOLE_DOCUMENT||!1,J=e.RETURN_DOM||!1,X=e.RETURN_DOM_FRAGMENT||!1,Q=e.RETURN_TRUSTED_TYPE||!1,Z=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=e.SANITIZE_NAMED_PROPS||!1,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,N=e.ALLOWED_URI_REGEXP||es,ge=e.NAMESPACE||he,D=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ke(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(D.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ke(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(D.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(D.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),W&&(q=!1),X&&(J=!0),oe&&(M=Na({},[...qa]),z=[],!0===oe.html&&(Na(M,za),Na(z,Ga)),!0===oe.svg&&(Na(M,ja),Na(z,Va),Na(z,Ya)),!0===oe.svgFilters&&(Na(M,Da),Na(z,Va),Na(z,Ya)),!0===oe.mathMl&&(Na(M,Fa),Na(z,Wa),Na(z,Ya))),e.ADD_TAGS&&(M===B&&(M=Ma(M)),Na(M,e.ADD_TAGS,we)),e.ADD_ATTR&&(z===j&&(z=Ma(z)),Na(z,e.ADD_ATTR,we)),e.ADD_URI_SAFE_ATTR&&Na(ce,e.ADD_URI_SAFE_ATTR,we),e.FORBID_CONTENTS&&(ie===ae&&(ie=Ma(ie)),Na(ie,e.FORBID_CONTENTS,we)),ne&&(M["#text"]=!0),Y&&Na(M,["html","head","body"]),M.table&&(Na(M,["tbody"]),delete U.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Ra('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Ra('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,x=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(g,i)),null!==w&&"string"==typeof x&&(x=w.createHTML(""));ma&&ma(e),xe=e}},Se=Na({},["mi","mo","mn","ms","mtext"]),Te=Na({},["foreignobject","desc","title","annotation-xml"]),Ce=Na({},["title","style","font","a","script"]),Ee=Na({},ja);Na(Ee,Da),Na(Ee,Ua);const Ae=Na({},Fa);Na(Ae,Ha);const Ie=function(e){$a(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Pe=function(e,t){try{$a(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){$a(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!z[e])if(J||X)try{Ie(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Re=function(e){let t=null,n=null;if(Z)e="<remove></remove>"+e;else{const t=Ca(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ye&&ge===he&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const o=w?w.createHTML(e):e;if(ge===he)try{t=(new h).parseFromString(o,ye)}catch(e){}if(!t||!t.documentElement){t=_.createDocument(ge,"template",null);try{t.documentElement.innerHTML=be?x:o}catch(e){}}const i=t.body||t.documentElement;return e&&n&&i.insertBefore(r.createTextNode(n),i.childNodes[0]||null),ge===he?S.call(t,Y?"html":"body")[0]:Y?t.documentElement:i},Le=function(e){return k.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null)},Oe=function(e){return"function"==typeof l&&e instanceof l},Ne=function(e,t,r){C[e]&&_a(C[e],(e=>{e.call(n,t,r,xe)}))},Me=function(e){let t=null;if(Ne("beforeSanitizeElements",e,null),(r=e)instanceof p&&("string"!=typeof r.nodeName||"string"!=typeof r.textContent||"function"!=typeof r.removeChild||!(r.attributes instanceof u)||"function"!=typeof r.removeAttribute||"function"!=typeof r.setAttribute||"string"!=typeof r.namespaceURI||"function"!=typeof r.insertBefore||"function"!=typeof r.hasChildNodes))return Ie(e),!0;var r;const o=we(e.nodeName);if(Ne("uponSanitizeElement",e,{tagName:o,allowedTags:M}),e.hasChildNodes()&&!Oe(e.firstElementChild)&&Pa(/<[/\w]/g,e.innerHTML)&&Pa(/<[/\w]/g,e.textContent))return Ie(e),!0;if(!M[o]||U[o]){if(!U[o]&&ze(o)){if(D.tagNameCheck instanceof RegExp&&Pa(D.tagNameCheck,o))return!1;if(D.tagNameCheck instanceof Function&&D.tagNameCheck(o))return!1}if(ne&&!ie[o]){const t=v(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r)t.insertBefore(f(n[r],!0),m(e))}}return Ie(e),!0}return e instanceof c&&!function(e){let t=v(e);t&&t.tagName||(t={namespaceURI:ge,tagName:"template"});const n=Sa(e.tagName),r=Sa(t.tagName);return!!fe[e.namespaceURI]&&(e.namespaceURI===pe?t.namespaceURI===he?"svg"===n:t.namespaceURI===ue?"svg"===n&&("annotation-xml"===r||Se[r]):Boolean(Ee[n]):e.namespaceURI===ue?t.namespaceURI===he?"math"===n:t.namespaceURI===pe?"math"===n&&Te[r]:Boolean(Ae[n]):e.namespaceURI===he?!(t.namespaceURI===pe&&!Te[r])&&!(t.namespaceURI===ue&&!Se[r])&&!Ae[n]&&(Ce[n]||!Ee[n]):!("application/xhtml+xml"!==ye||!fe[e.namespaceURI]))}(e)?(Ie(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!Pa(/<\/no(script|embed|frames)/i,e.innerHTML)?(W&&3===e.nodeType&&(t=e.textContent,_a([E,A,I],(e=>{t=Ea(t,e," ")})),e.textContent!==t&&($a(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ne("afterSanitizeElements",e,null),!1):(Ie(e),!0)},Be=function(e,t,n){if(ee&&("id"===t||"name"===t)&&(n in r||n in _e))return!1;if(q&&!F[t]&&Pa(P,t));else if(H&&Pa(R,t));else if(!z[t]||F[t]){if(!(ze(e)&&(D.tagNameCheck instanceof RegExp&&Pa(D.tagNameCheck,e)||D.tagNameCheck instanceof Function&&D.tagNameCheck(e))&&(D.attributeNameCheck instanceof RegExp&&Pa(D.attributeNameCheck,t)||D.attributeNameCheck instanceof Function&&D.attributeNameCheck(t))||"is"===t&&D.allowCustomizedBuiltInElements&&(D.tagNameCheck instanceof RegExp&&Pa(D.tagNameCheck,n)||D.tagNameCheck instanceof Function&&D.tagNameCheck(n))))return!1}else if(ce[t]);else if(Pa(N,Ea(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Aa(n,"data:")||!se[e]){if(G&&!Pa(L,Ea(n,O,"")));else if(n)return!1}else;return!0},ze=function(e){return e.indexOf("-")>0},je=function(e){Ne("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};let o=t.length;for(;o--;){const i=t[o],{name:a,namespaceURI:s,value:l}=i,c=we(a);let d="value"===a?l:Ia(l);if(r.attrName=c,r.attrValue=d,r.keepAttr=!0,r.forceKeepAttr=void 0,Ne("uponSanitizeAttribute",e,r),d=r.attrValue,r.forceKeepAttr)continue;if(Pe(a,e),!r.keepAttr)continue;if(!V&&Pa(/\/>/i,d)){Pe(a,e);continue}W&&_a([E,A,I],(e=>{d=Ea(d,e," ")}));const u=we(e.nodeName);if(Be(u,c,d)){if(!te||"id"!==c&&"name"!==c||(Pe(a,e),d="user-content-"+d),w&&"object"==typeof g&&"function"==typeof g.getAttributeType)if(s);else switch(g.getAttributeType(u,c)){case"TrustedHTML":d=w.createHTML(d);break;case"TrustedScriptURL":d=w.createScriptURL(d)}try{s?e.setAttributeNS(s,a,d):e.setAttribute(a,d),ka(n.removed)}catch(e){}}}Ne("afterSanitizeAttributes",e,null)},De=function e(t){let n=null;const r=Le(t);for(Ne("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Ne("uponSanitizeShadowNode",n,null),Me(n)||(n.content instanceof a&&e(n.content),je(n));Ne("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,i=null,s=null,c=null;if(be=!e,be&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Oe(e)){if("function"!=typeof e.toString)throw Ra("toString is not a function");if("string"!=typeof(e=e.toString()))throw Ra("dirty is not a string, aborting")}if(!n.isSupported)return e;if(K||$e(t),n.removed=[],"string"==typeof e&&(re=!1),re){if(e.nodeName){const t=we(e.nodeName);if(!M[t]||U[t])throw Ra("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=Re("\x3c!----\x3e"),i=r.ownerDocument.importNode(e,!0),1===i.nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?r=i:r.appendChild(i);else{if(!J&&!W&&!Y&&-1===e.indexOf("<"))return w&&Q?w.createHTML(e):e;if(r=Re(e),!r)return J?null:Q?x:""}r&&Z&&Ie(r.firstChild);const d=Le(re?e:r);for(;s=d.nextNode();)Me(s)||(s.content instanceof a&&De(s.content),je(s));if(re)return e;if(J){if(X)for(c=$.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(z.shadowroot||z.shadowrootmode)&&(c=T.call(o,c,!0)),c}let u=Y?r.outerHTML:r.innerHTML;return Y&&M["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Pa(rs,r.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+u),W&&_a([E,A,I],(e=>{u=Ea(u,e," ")})),w&&Q?w.createHTML(u):u},n.setConfig=function(){$e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),K=!0},n.clearConfig=function(){xe=null,K=!1},n.isValidAttribute=function(e,t,n){xe||$e({});const r=we(e),o=we(t);return Be(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&(C[e]=C[e]||[],$a(C[e],t))},n.removeHook=function(e){if(C[e])return ka(C[e])},n.removeHooks=function(e){C[e]&&(C[e]=[])},n.removeAllHooks=function(){C={}},n}();const ss=pe('<div class="flex flex-col animate-fade-in"><div class="flex w-full items-center"><div class="flex relative items-start typebot-host-bubble max-w-full"><div class="flex items-center absolute px-4 py-2 bubble-typing " data-testid="host-bubble"></div><div class="flex flex-col overflow-hidden text-fade-in mx-4 my-2 relative text-ellipsis h-full gap-6">'),ls=pe("<span>"),cs=e=>{const[t,n]=_([]);return ua.use({renderer:{link:(e,t,n)=>`<a href="${e}" target="_blank" rel="noopener noreferrer">${n}</a>`}}),$((()=>{if(Ni()?.id!==e.streamingMessageId)return[];n(Ni()?.content.split("```").map(((e,t)=>t%2==0?e.split("\n\n").map((e=>as.sanitize(ua.parse(e.replace(/【.+】/g,"")),{ADD_ATTR:["target"]}))):[as.sanitize(ua.parse("```"+e+"```"),{ADD_ATTR:["target"]})])).flat().filter(ze)??[])})),(()=>{const e=ss(),n=e.firstChild.firstChild.firstChild,r=n.nextSibling;return n.style.setProperty("width","100%"),n.style.setProperty("height","100%"),ye(r,V(te,{get each(){return t()},children:e=>(()=>{const t=ls();return t.innerHTML=e,t})()})),e})()},ds=pe('<div><div class="flex flex-col flex-1 gap-2">'),us=pe('<div class="flex flex-col w-full min-w-0 gap-2">'),ps=e=>{let t;const[n,r]=_(e.isTransitionDisabled?e.messages.length:0),[o,i]=_();C((()=>{e.streamingMessageId||(0===e.messages.length&&e.onAllBubblesDisplayed(),e.onScrollToBottom(t,50))}));const a=async t=>{(e.settings.typingEmulation?.delayBetweenBubbles??zn.delayBetweenBubbles)>0&&n()<e.messages.length-1&&await new Promise((t=>setTimeout(t,1e3*(e.settings.typingEmulation?.delayBetweenBubbles??zn.delayBetweenBubbles))));const o=e.messages[n()].id;await e.onNewBubbleDisplayed(o),r(n()===e.messages.length?n():n()+1),e.onScrollToBottom(t),n()===e.messages.length&&(i(t),e.onAllBubblesDisplayed())};return(()=>{const r=us();return ye(r,V(ne,{get when(){return e.messages.length>0},get children(){const t=ds(),r=t.firstChild;return ye(t,V(ne,{get when(){return(e.theme.chat?.hostAvatar?.isEnabled??Si)&&e.messages.length>0},get children(){return V(Oi,{get hostAvatarSrc(){return e.theme.chat?.hostAvatar?.url},get hideAvatar(){return e.hideAvatar},get isTransitionDisabled(){return e.isTransitionDisabled}})}}),r),ye(r,V(te,{get each(){return e.messages.slice(0,n()+1)},children:(t,n)=>V(Qn,{message:t,get typingEmulation(){return e.settings.typingEmulation},get isTypingSkipped(){return S((()=>!(!(e.settings.typingEmulation?.isDisabledOnFirstMessage??zn.isDisabledOnFirstMessage)||0!==e.index)))()&&0===n()},get onTransitionEnd(){return e.isTransitionDisabled?void 0:a},get onCompleted(){return e.onSubmit}})})),k((n=>{const o="flex"+(jt()?" gap-1":" gap-2"),i=e.theme.chat?.guestAvatar?.isEnabled?jt()?"calc(100% - 32px - 32px)":"calc(100% - 48px - 48px)":jt()?"calc(100% - 32px)":"calc(100% - 48px)";return o!==n._v$&&be(t,n._v$=o),i!==n._v$2&&(null!=(n._v$2=i)?r.style.setProperty("max-width",i):r.style.removeProperty("max-width")),n}),{_v$:void 0,_v$2:void 0}),t}}),null),ye(r,(()=>{const r=S((()=>!(!e.input||n()!==e.messages.length)));return()=>r()&&V(Ai,{ref(e){"function"==typeof t?t(e):t=e},get block(){return e.input},get chunkIndex(){return e.index},get hasHostAvatar(){return e.theme.chat?.hostAvatar?.isEnabled??Si},get guestAvatar(){return e.theme.chat?.guestAvatar},get context(){return e.context},get isInputPrefillEnabled(){return e.settings.general?.isInputPrefillEnabled??Bn.isInputPrefillEnabled},get hasError(){return e.hasError},onTransitionEnd:()=>e.onScrollToBottom(o()),get onSubmit(){return e.onSubmit},get onSkip(){return e.onSkip}})})(),null),ye(r,V(ne,{get when(){return e.streamingMessageId},keyed:!0,children:t=>(()=>{const n=ds(),r=n.firstChild;return ye(n,V(ne,{get when(){return e.theme.chat?.hostAvatar?.isEnabled??Si},get children(){return V(Oi,{get hostAvatarSrc(){return e.theme.chat?.hostAvatar?.url},get hideAvatar(){return e.hideAvatar}})}}),r),ye(r,V(cs,{streamingMessageId:t})),k((t=>{const o="flex"+(jt()?" gap-1":" gap-2"),i=e.theme.chat?.guestAvatar?.isEnabled?jt()?"calc(100% - 32px - 32px)":"calc(100% - 48px - 48px)":jt()?"calc(100% - 32px)":"calc(100% - 48px)";return o!==t._v$3&&be(n,t._v$3=o),i!==t._v$4&&(null!=(t._v$4=i)?r.style.setProperty("max-width",i):r.style.removeProperty("max-width")),t}),{_v$3:void 0,_v$4:void 0}),n})()}),null),r})()},hs=async e=>{e?.trackingId&&(e=>{e&&(window.gtag?window.gtag("event",e.action,{event_category:Be(e.category)?void 0:e.category,event_label:Be(e.label)?void 0:e.label,value:e.value,send_to:Be(e.sendTo)?void 0:e.sendTo}):console.error("Google Analytics was not properly initialized"))})(e)},gs={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},bs={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},fs={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},ms={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ys={code:"4",name:"assistant_message",parse:e=>{if(!(null!=e&&"object"==typeof e&&"id"in e&&"role"in e&&"content"in e&&"string"==typeof e.id&&"string"==typeof e.role&&"assistant"===e.role&&Array.isArray(e.content)&&e.content.every((e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},vs={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ws={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},xs={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some((e=>!(null!=e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id&&"type"in e&&"string"==typeof e.type&&"function"in e&&null!=e.function&&"object"==typeof e.function&&"arguments"in e.function&&"string"==typeof e.function.name&&"string"==typeof e.function.arguments))))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},_s={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},ks={[gs.code]:gs,[bs.code]:bs,[fs.code]:fs,[ms.code]:ms,[ys.code]:ys,[vs.code]:vs,[ws.code]:ws,[xs.code]:xs,[_s.code]:_s},$s=[gs,bs,fs,ms,ys,vs,ws,xs,_s].map((e=>e.code)),Ss=e=>{const t=e.indexOf(":");if(-1===t)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!$s.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,o=e.slice(t+1),i=JSON.parse(o);return ks[r].parse(i)},Ts="\n".charCodeAt(0);function Cs(e,t){const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return e.length=0,n}let Es=null;const As=e=>async({messages:t,onMessageStream:n})=>{try{Es=new AbortController;const r=e.apiHost,o=await fetch((ze(r)?r:ht())+`/api/v2/sessions/${e.sessionId}/streamMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t}),signal:Es.signal});if(!o.ok)return(e.retryAttempt??0)<3&&(403===o.status||500===o.status||503===o.status)?(await new Promise((e=>setTimeout(e,3e3))),As({...e,retryAttempt:(e.retryAttempt??0)+1})({messages:t,onMessageStream:n})):{error:await o.json()||"Failed to fetch the chat response."};if(!o.body)throw new Error("The response body is empty.");let i="";const a=o.body.getReader(),l=function(){const e=s.context;return e?`${e.id}${e.count++}`:"cl-"+Q++}();for await(const{type:e,value:t}of async function*(e,{isAborted:t}={}){const n=new TextDecoder,r=[];let o=0;for(;;){const{value:i}=await e.read();if(i&&(r.push(i),o+=i.length,i[i.length-1]!==Ts))continue;if(0===r.length)break;const a=Cs(r,o);o=0;const s=n.decode(a,{stream:!0}).split("\n").filter((e=>""!==e)).map(Ss);for(const e of s)yield e;if(t?.()){e.cancel();break}}}(a,{isAborted:()=>null===Es}))"text"===e&&(i+=t,n&&n({id:l,message:i}));return Es=null,{message:i}}catch(e){return console.error(e),"AbortError"===e.name?(Es=null,{error:{message:"Request aborted"}}):e instanceof Error?{error:{message:e.message}}:{error:{message:"Failed to fetch the chat response."}}}},Is=e=>{if(Me(e))return null;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return console.warn("Failed to safely stringify variable value",e),null}},Ps=Object.getPrototypeOf((async function(){})).constructor,Rs=async e=>{Be(e?.pixelId)||(e=>{if(!e?.eventType||!e.pixelId)return;if(!window.fbq)return void console.error("Facebook Pixel was not properly initialized");const t=e.params?.length?e.params.reduce(((e,t)=>t.key&&t.value?{...e,[t.key]:t.value}:e),{}):void 0;if("Custom"===e.eventType){if(!e.name)return;window.fbq("trackSingleCustom",e.pixelId,e.name,t)}window.fbq("trackSingle",e.pixelId,e.eventType,t)})(e)},Ls=async e=>{const t=e.customHeadCode;ze(t)&&(e=>{e.split("</noscript>").forEach((e=>{const[t,n]=e.split("<noscript>"),r=document.createRange().createContextualFragment(t);if(document.head.append(r),Me(n))return;const o=document.createElement("noscript"),i=document.createRange().createContextualFragment(n);o.append(i),document.head.append(o)}))})(t);const n=e.gtmId;ze(n)&&document.body.prepend((e=>{if(document.getElementById("gtm-noscript"))return"";const t=document.createElement("noscript");t.id="gtm-noscript";const n=document.createElement("iframe");return n.src=`https://www.googletagmanager.com/ns.html?id=${e}`,n.height="0",n.width="0",n.style.display="none",n.style.visibility="hidden",t.appendChild(n),t})(n));const r=e.googleAnalyticsId;var o;ze(r)&&await(o=r,Ne(window.gtag)?Promise.resolve():new Promise((e=>{const t=document.getElementById("gtag");if(!t){const t=document.createElement("script");t.src=`https://www.googletagmanager.com/gtag/js?id=${o}`,t.id="gtag";const n=document.createElement("script");n.innerHTML=`window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n    \n      gtag('config', '${o}');\n      `,document.body.appendChild(t),document.body.appendChild(n),t.onload=()=>{e()}}t&&e()})));const i=e.pixelIds;Ne(i)&&(e=>{const t=document.createElement("script");t.innerHTML=`!function(f,b,e,v,n,t,s)\n  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n  n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n  n.queue=[];t=b.createElement(e);t.async=!0;\n  t.src=v;s=b.getElementsByTagName(e)[0];\n  s.parentNode.insertBefore(t,s)}(window, document,'script',\n  'https://connect.facebook.net/en_US/fbevents.js');\n  ${e.map((e=>`fbq('init', '${e}');`)).join("\n")}\n  fbq('track', 'PageView');`,document.head.appendChild(t)})(i)},Os=async({clientSideAction:e,context:t,onMessageStream:n})=>{if("chatwoot"in e)return r=e.chatwoot,void dn(r.scriptToExecute);var r;if("googleAnalytics"in e)return hs(e.googleAnalytics);if("scriptToExecute"in e)return dn(e.scriptToExecute);if("redirect"in e)return(({url:e,isNewTab:t}={})=>{if(!e)return;return window.open(e,t?"_blank":"_top")?void 0:{blockedPopupUrl:e}})(e.redirect);if("wait"in e)return await(async({secondsToWaitFor:e})=>{await new Promise((t=>setTimeout(t,1e3*e)))})(e.wait),e.expectsDedicatedReply?{replyToSend:void 0}:void 0;if("setVariable"in e)return(async({content:e,args:t})=>{try{if(!isNaN(e)&&/0[^.].+/.test(e))return{replyToSend:e};const n=Ps(...t.map((e=>e.id)),e.includes("return ")?e:`return ${e}`),r=await n(...t.map((e=>e.value)));return{replyToSend:Is(r)??void 0}}catch(t){return console.error(t),{replyToSend:Is(e)??void 0}}})(e.setVariable.scriptToExecute);if("streamOpenAiChatCompletion"in e||"stream"in e){const{error:r,message:o}=await As(t)({messages:"streamOpenAiChatCompletion"in e?e.streamOpenAiChatCompletion?.messages:void 0,onMessageStream:n});return r?{replyToSend:void 0,logs:[{status:"error",description:"Message streaming returned an error",details:JSON.stringify(r,null,2)}]}:{replyToSend:o}}if("webhookToExecute"in e){return{replyToSend:await(async e=>{const{url:t,method:n,body:r,headers:o}=e;try{const e=await fetch(t,{method:n,body:"GET"!==n&&r?JSON.stringify(r):void 0,headers:o}),i=e.status,a=await e.json();return JSON.stringify({statusCode:i,data:a})}catch(e){return console.error(e),JSON.stringify({statusCode:500,data:"An error occured while executing the webhook on the client"})}})(e.webhookToExecute)}}return"startPropsToInject"in e?Ls(e.startPropsToInject):"pixel"in e?Rs(e.pixel):"codeToExecute"in e?pn(e.codeToExecute):void 0},Ns=pe('<div class="flex flex-col animate-fade-in"><div class="flex w-full items-center"><div class="flex relative items-start typebot-host-bubble"><div class="flex items-center absolute px-4 py-2 bubble-typing " data-testid="host-bubble"></div><p class="overflow-hidden text-fade-in mx-4 my-2 whitespace-pre-wrap slate-html-container relative opacity-0 h-6 text-ellipsis">'),Ms=()=>(()=>{const e=Ns(),t=e.firstChild.firstChild.firstChild;return t.style.setProperty("width","64px"),t.style.setProperty("height","32px"),ye(t,V(Kt,{})),e})(),Bs=pe('<div class="flex w-full"><div class="flex flex-col w-full min-w-0"><div class="flex gap-2">'),zs=e=>(()=>{const t=Bs(),n=t.firstChild.firstChild;return ye(n,V(ne,{get when(){return e.theme.chat?.hostAvatar?.isEnabled??Si},get children(){return V(Oi,{get hostAvatarSrc(){return e.theme.chat?.hostAvatar?.url}})}}),null),ye(n,V(Ms,{}),null),t})(),js=pe('<div class="w-full max-w-xs p-4 text-gray-500 bg-white shadow flex flex-col gap-2 typebot-popup-blocked-toast" role="alert"><div class="flex flex-col gap-1"><span class=" text-sm font-semibold text-gray-900">Popup blocked</span><div class="text-sm font-normal">The bot wants to open a new tab but it was blocked by your browser. It needs a manual approval.</div></div><a target="_blank" class="py-1 px-4 justify-center text-sm font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 filter hover:brightness-90 active:brightness-75 typebot-button" rel="noreferrer">Continue in new tab'),Ds=e=>(()=>{const t=js(),n=t.firstChild.nextSibling;return n.$$click=()=>e.onLinkClick(),k((()=>ge(n,"href",e.url))),t})();he(["click"]);const Us=async({apiHost:e,sessionId:t,clientLogs:n})=>{try{await zt.post(`${ze(e)?e:ht()}/api/v1/sessions/${t}/clientLogs`,{json:{clientLogs:n}})}catch(e){console.log(e)}},Fs=pe('<div class="flex flex-col overflow-y-auto w-full px-3 pt-10 relative scrollable-container typebot-chat-view scroll-smooth gap-2">'),Hs=pe('<div class="flex justify-end">'),qs=pe('<div class="w-full flex-shrink-0">'),Gs=e=>{let t;const[n,r,o]=ci(_([{input:e.initialChatReply.input,messages:e.initialChatReply.messages,clientSideActions:e.initialChatReply.clientSideActions}]),{key:`typebot-${e.context.typebot.id}-chatChunks`,storage:e.context.storage,onRecovered:()=>{setTimeout((()=>{t?.scrollTo(0,t.scrollHeight)}),200)}}),[i,a]=_(e.initialChatReply.dynamicTheme),[s,l]=_(e.initialChatReply.typebot.theme),[c,d]=_(!1),[u,p]=_(),[h,g]=_(!1);C((()=>{(async()=>{const e=n()[0];if(!e.clientSideActions)return;const t=e.clientSideActions.filter((e=>Me(e.lastBubbleBlockId)));await w(t)})()}));const b=({id:e,message:t})=>{d(!1);const o=[...n()].pop();o&&(o.streamingMessageId!==e&&r((t=>[...t,{messages:[],streamingMessageId:e}])),Mi({id:e,content:t}))};$((()=>{l(((e,t)=>({...e,chat:{...e.chat,hostAvatar:e.chat?.hostAvatar&&t?.hostAvatarUrl?{...e.chat.hostAvatar,url:t.hostAvatarUrl}:e.chat?.hostAvatar,guestAvatar:e.chat?.guestAvatar&&t?.guestAvatarUrl?{...e.chat.guestAvatar,url:t?.guestAvatarUrl}:e.chat?.guestAvatar}}))(e.initialChatReply.typebot.theme,i()))}));const f=async(t,o)=>{o&&(e.onNewLogs?.(o),await Us({apiHost:e.context.apiHost,sessionId:e.initialChatReply.sessionId,clientLogs:o})),g(!1);const i=[...n()].pop()?.input;i?.id&&e.onAnswer&&t&&e.onAnswer({message:t,blockId:i.id}),i?.type===sr.FILE&&e.onNewLogs?.([{description:"Files are not uploaded in preview mode",status:"info"}]);const s=setTimeout((()=>{d(!0)}),1e3);m();const{data:l,error:c}=await(async({apiHost:e,message:t,sessionId:n})=>{try{return{data:await zt.post(`${ze(e)?e:ht()}/api/v1/sessions/${n}/continueChat`,{json:{message:t},timeout:!1}).json()}}catch(e){return{error:e}}})({apiHost:e.context.apiHost,sessionId:e.initialChatReply.sessionId,message:t});if(clearTimeout(s),d(!1),c){g(!0);const t=[{description:"Failed to send the reply",details:c instanceof ft?{status:c.response.status,body:await c.response.json()}:c,status:"error"}];return await Us({apiHost:e.context.apiHost,sessionId:e.initialChatReply.sessionId,clientLogs:t}),void e.onNewLogs?.(t)}if(l){if(l.progress&&e.onProgressUpdate?.(l.progress),l.lastMessageNewFormat&&Qo([...Xo(),{inputIndex:[...n()].length-1,formattedMessage:l.lastMessageNewFormat}]),l.logs&&e.onNewLogs?.(l.logs),l.dynamicTheme&&a(l.dynamicTheme),l.input&&e.onNewInputBlock&&e.onNewInputBlock(l.input),l.clientSideActions){const e=l.clientSideActions.filter((e=>Me(e.lastBubbleBlockId)));if(await w(e),1===l.clientSideActions.length&&"stream"===l.clientSideActions[0].type&&0===l.messages.length&&void 0===l.input)return}r((e=>[...e,{input:l.input,messages:l.messages,clientSideActions:l.clientSideActions}]))}},m=(e,n=0)=>{if(!t)return;const r=.6*t.clientHeight-128;t.scrollTop+t.clientHeight>=t.scrollHeight-r&&setTimeout((()=>{t?.scrollTo(0,e?e.offsetTop-n:t.scrollHeight)}),50)},y=async()=>{const t=[...n()].pop();t&&Me(t.input)&&e.onEnd?.()},v=async e=>{const t=[...n()].pop();if(t&&t.clientSideActions){const n=t.clientSideActions.filter((t=>t.lastBubbleBlockId===e));await w(n)}},w=async t=>{if(!o())for(const n of t){("streamOpenAiChatCompletion"in n||"webhookToExecute"in n||"stream"in n)&&d(!0);const t=await Os({clientSideAction:n,context:{apiHost:e.context.apiHost,sessionId:e.initialChatReply.sessionId},onMessageStream:b});if(t&&"replyToSend"in t)return d(!1),void f(t.replyToSend,t.logs);t&&"blockedPopupUrl"in t&&p(t.blockedPopupUrl)}};E((()=>{Mi(void 0),Qo([])}));const x=()=>f(void 0);return(()=>{const r=Fs();return"function"==typeof t?me(t,r):t=r,ye(r,V(te,{get each(){return n()},children:(t,r)=>V(ps,{get index(){return r()},get messages(){return t.messages},get input(){return t.input},get theme(){return s()},get settings(){return e.initialChatReply.typebot.settings},get streamingMessageId(){return t.streamingMessageId},get context(){return e.context},get hideAvatar(){return S((()=>!t.input))()&&((n()[r()+1]?.messages??0).length>0||void 0!==n()[r()+1]?.streamingMessageId||t.messages.length>0&&c())},get hasError(){return S((()=>!!h()))()&&r()===n().length-1},get isTransitionDisabled(){return r()!==n().length-1},onNewBubbleDisplayed:v,onAllBubblesDisplayed:y,onSubmit:f,onScrollToBottom:m,onSkip:x})}),null),ye(r,V(ne,{get when(){return c()},get children(){return V(zs,{get theme(){return s()}})}}),null),ye(r,V(ne,{get when(){return u()},keyed:!0,children:e=>(()=>{const t=Hs();return ye(t,V(Ds,{url:e,onLinkClick:()=>p(void 0)})),t})()}),null),ye(r,V(Vs,{}),null),r})()},Vs=()=>(()=>{const e=qs();return e.style.setProperty("height","128px"),e})(),Ws=pe('<div class="h-full flex justify-center items-center flex-col"><p class="text-2xl text-center"></p><pre>'),Ys=e=>(()=>{const t=Ws(),n=t.firstChild,r=n.nextSibling;return ye(n,(()=>e.error.message)),ye(r,(()=>JSON.stringify(e.error.cause,null,2))),t})(),Ks="resultId",Zs=()=>{try{sessionStorage.setItem("typebot-botOpened","true")}catch{}},Js=()=>{try{sessionStorage.removeItem("typebot-botOpened")}catch{}},Xs=()=>{try{return"true"===sessionStorage.getItem("typebot-botOpened")}catch{return!1}},Qs=e=>"session"===(e??Bn.rememberUser.storage)?sessionStorage:localStorage,el=e=>{Object.keys(localStorage).forEach((t=>{t.startsWith(`typebot-${e}`)&&localStorage.removeItem(t)})),Object.keys(sessionStorage).forEach((t=>{t.startsWith(`typebot-${e}`)&&sessionStorage.removeItem(t)}))},tl={bgImage:"--typebot-container-bg-image",bgColor:"--typebot-container-bg-color",fontFamily:"--typebot-container-font-family",progressBar:{position:"--typebot-progress-bar-position",color:"--typebot-progress-bar-color",colorRgb:"--typebot-progress-bar-bg-rgb",height:"--typebot-progress-bar-height",top:"--typebot-progress-bar-top",bottom:"--typebot-progress-bar-bottom"}},nl={container:{maxWidth:"--typebot-chat-container-max-width",maxHeight:"--typebot-chat-container-max-height",bgColor:"--typebot-chat-container-bg-rgb",color:"--typebot-chat-container-color",borderRadius:"--typebot-chat-container-border-radius",borderWidth:"--typebot-chat-container-border-width",borderColor:"--typebot-chat-container-border-rgb",borderOpacity:"--typebot-chat-container-border-opacity",opacity:"--typebot-chat-container-opacity",blur:"--typebot-chat-container-blur",boxShadow:"--typebot-chat-container-box-shadow"},hostBubbles:{bgColor:"--typebot-host-bubble-bg-rgb",color:"--typebot-host-bubble-color",borderRadius:"--typebot-host-bubble-border-radius",borderWidth:"--typebot-host-bubble-border-width",borderColor:"--typebot-host-bubble-border-rgb",borderOpacity:"--typebot-host-bubble-border-opacity",opacity:"--typebot-host-bubble-opacity",blur:"--typebot-host-bubble-blur",boxShadow:"--typebot-host-bubble-box-shadow"},guestBubbles:{bgColor:"--typebot-guest-bubble-bg-rgb",color:"--typebot-guest-bubble-color",borderRadius:"--typebot-guest-bubble-border-radius",borderWidth:"--typebot-guest-bubble-border-width",borderColor:"--typebot-guest-bubble-border-rgb",borderOpacity:"--typebot-guest-bubble-border-opacity",opacity:"--typebot-guest-bubble-opacity",blur:"--typebot-guest-bubble-blur",boxShadow:"--typebot-guest-bubble-box-shadow"},inputs:{bgColor:"--typebot-input-bg-rgb",color:"--typebot-input-color",placeholderColor:"--typebot-input-placeholder-color",borderRadius:"--typebot-input-border-radius",borderWidth:"--typebot-input-border-width",borderColor:"--typebot-input-border-rgb",borderOpacity:"--typebot-input-border-opacity",opacity:"--typebot-input-opacity",blur:"--typebot-input-blur",boxShadow:"--typebot-input-box-shadow"},buttons:{bgRgb:"--typebot-button-bg-rgb",color:"--typebot-button-color",borderRadius:"--typebot-button-border-radius",borderWidth:"--typebot-button-border-width",borderColor:"--typebot-button-border-rgb",borderOpacity:"--typebot-button-border-opacity",opacity:"--typebot-button-opacity",blur:"--typebot-button-blur",boxShadow:"--typebot-button-box-shadow"},checkbox:{bgRgb:"--typebot-checkbox-bg-rgb",alphaRatio:"--selectable-alpha-ratio"}},rl=(e,t,n)=>{pl(e?.background,t),t.setProperty(tl.fontFamily,("string"==typeof e?.font?e.font:e?.font?.family)??gi),ol(e?.progressBar,t,n)},ol=(e,t,n)=>{const r=e?.position??mi;t.setProperty(tl.progressBar.position,"fixed"===r?n?"absolute":"fixed":r),t.setProperty(tl.progressBar.color,e?.color??"#0042DA"),t.setProperty(tl.progressBar.colorRgb,De(e?.backgroundColor??"#e0edff").join(", ")),t.setProperty(tl.progressBar.height,`${e?.thickness??4}px`);const o=e?.placement??"Top";t.setProperty(tl.progressBar.top,"Top"===o?"0":"auto"),t.setProperty(tl.progressBar.bottom,"Bottom"===o?"0":"auto")},il=(e,t,n)=>{al(e?.container,t,n,e?.roundness),sl(e?.hostBubbles,n,e?.roundness),ll(e?.guestBubbles,n,e?.roundness),cl(e?.buttons,n,e?.roundness),dl(e?.inputs,n,e?.roundness),ul(e?.container,t,n)},al=(e,t,n,r)=>{const o=e?.backgroundColor??vi,i="transparent"===o||Be(o);n.setProperty(nl.container.bgColor,i?"0, 0, 0":De(o).join(", ")),n.setProperty(nl.container.color,De(e?.color??((({chatContainer:e,generalBackground:t})=>{const n=e?.backgroundColor??vi;if((e?.opacity??1)<=.3||"transparent"===n||Be(n)){const e=t?.type??bi,n=e===ui.IMAGE?"#000000":e===ui.COLOR&&ze(t?.content)?t.content:"#ffffff";return Ue(n)}return Ue(e?.backgroundColor??fi)})({chatContainer:e,generalBackground:t})?pi:hi)).join(", ")),n.setProperty(nl.container.maxWidth,e?.maxWidth??"800px"),n.setProperty(nl.container.maxHeight,e?.maxHeight??"100%");const a=i?"1":(e?.opacity??1).toString();n.setProperty(nl.container.opacity,i?"0":(e?.opacity??1).toString()),n.setProperty(nl.container.blur,"1"===a||i?"0xp":`${e?.blur??0}px`),bl(e?.shadow,n,nl.container.boxShadow),gl(e?.border??{roundeness:r??yi},n,nl.container.borderRadius),n.setProperty(nl.container.borderWidth,Ne(e?.border?.thickness)?`${e?.border?.thickness}px`:"0"),n.setProperty(nl.container.borderOpacity,Ne(e?.border?.opacity)?e.border.opacity.toString():1..toString()),n.setProperty(nl.container.borderColor,De(e?.border?.color??"").join(", "))},sl=(e,t,n)=>{t.setProperty(nl.hostBubbles.bgColor,De(e?.backgroundColor??"#F7F8FF").join(", ")),t.setProperty(nl.hostBubbles.color,e?.color??wi),gl(e?.border??{roundeness:n??yi},t,nl.hostBubbles.borderRadius),t.setProperty(nl.hostBubbles.borderWidth,Ne(e?.border?.thickness)?`${e?.border?.thickness}px`:"0"),t.setProperty(nl.hostBubbles.borderColor,De(e?.border?.color??"").join(", ")),t.setProperty(nl.hostBubbles.opacity,"transparent"===e?.backgroundColor?"0":Ne(e?.opacity)?e.opacity.toString():1..toString()),t.setProperty(nl.hostBubbles.borderOpacity,Ne(e?.border?.opacity)?e.border.opacity.toString():1..toString()),t.setProperty(nl.hostBubbles.blur,Ne(e?.blur)?`${e.blur??0}px`:"none"),bl(e?.shadow,t,nl.hostBubbles.boxShadow)},ll=(e,t,n)=>{t.setProperty(nl.guestBubbles.bgColor,De(e?.backgroundColor??"#FF8E21").join(", ")),t.setProperty(nl.guestBubbles.color,e?.color??xi),gl(e?.border??{roundeness:n??yi},t,nl.guestBubbles.borderRadius),t.setProperty(nl.guestBubbles.borderWidth,Ne(e?.border?.thickness)?`${e?.border?.thickness}px`:"0"),t.setProperty(nl.guestBubbles.borderColor,De(e?.border?.color??"").join(", ")),t.setProperty(nl.guestBubbles.borderOpacity,Ne(e?.border?.opacity)?e.border.opacity.toString():1..toString()),t.setProperty(nl.guestBubbles.opacity,"transparent"===e?.backgroundColor?"0":Ne(e?.opacity)?e.opacity.toString():1..toString()),t.setProperty(nl.guestBubbles.blur,Ne(e?.blur)?`${e.blur??0}px`:"none"),bl(e?.shadow,t,nl.guestBubbles.boxShadow)},cl=(e,t,n)=>{const r=e?.backgroundColor??_i;t.setProperty(nl.buttons.bgRgb,De(r).join(", ")),t.setProperty(nl.buttons.bgRgb,De(r).join(", ")),t.setProperty(nl.buttons.color,e?.color??ki),gl(e?.border??{roundeness:n??yi},t,nl.buttons.borderRadius),t.setProperty(nl.buttons.borderWidth,Ne(e?.border?.thickness)?`${e?.border?.thickness}px`:"1px"),t.setProperty(nl.buttons.borderColor,De(e?.border?.color??e?.backgroundColor??_i).join(", ")),t.setProperty(nl.buttons.borderOpacity,Ne(e?.border?.opacity)?e.border.opacity.toString():1..toString()),t.setProperty(nl.buttons.opacity,"transparent"===e?.backgroundColor?"0":Ne(e?.opacity)?e.opacity.toString():1..toString()),t.setProperty(nl.buttons.blur,Ne(e?.blur)?`${e.blur??0}px`:"none"),bl(e?.shadow,t,nl.buttons.boxShadow)},dl=(e,t,n)=>{t.setProperty(nl.inputs.bgColor,De(e?.backgroundColor??"#FFFFFF").join(", ")),t.setProperty(nl.inputs.color,e?.color??$i),t.setProperty(nl.inputs.placeholderColor,e?.placeholderColor??"#9095A0"),gl(e?.border??{roundeness:n??yi},t,nl.inputs.borderRadius),t.setProperty(nl.inputs.borderWidth,Ne(e?.border?.thickness)?`${e?.border?.thickness}px`:"0"),t.setProperty(nl.inputs.borderColor,De(e?.border?.color??"").join(", ")),t.setProperty(nl.inputs.borderOpacity,Ne(e?.border?.opacity)?e.border.opacity.toString():1..toString()),t.setProperty(nl.inputs.opacity,"transparent"===e?.backgroundColor?"0":Ne(e?.opacity)?e.opacity.toString():1..toString()),t.setProperty(nl.inputs.blur,Ne(e?.blur)?`${e.blur??0}px`:"none"),bl(e?.shadow??"md",t,nl.inputs.boxShadow)},ul=(e,t,n)=>{const r=e?.backgroundColor??vi;if("transparent"===r||Be(r)||(e?.opacity??1)<=.2){const e=t?.type??bi;n.setProperty(nl.checkbox.bgRgb,e===ui.IMAGE?"rgba(255, 255, 255, 0.75)":De((e===ui.COLOR?t?.content:"#ffffff")??"#ffffff").join(", ")),e===ui.IMAGE?n.setProperty(nl.checkbox.alphaRatio,"3"):n.setProperty(nl.checkbox.alphaRatio,t?.content&&Ue(t?.content)?"1":"2")}else n.setProperty(nl.checkbox.bgRgb,De(r).concat(e?.opacity??1).join(", ")),n.setProperty(nl.checkbox.alphaRatio,Ue(r)?"1":"2")},pl=(e,t)=>{t.setProperty(tl.bgImage,null),t.setProperty(tl.bgColor,null),t.setProperty((e?.type??bi)===ui.IMAGE?tl.bgImage:tl.bgColor,hl({type:e?.type??bi,content:e?.content??fi}))},hl=({type:e,content:t}={})=>{switch(e){case ui.NONE:return"transparent";case void 0:case ui.COLOR:return t??fi;case ui.IMAGE:return`url(${t})`}},gl=(e,t,n)=>{switch(e?.roundeness??yi){case"none":t.setProperty(n,"0");break;case"medium":t.setProperty(n,"6px");break;case"large":t.setProperty(n,"20px");break;case"custom":t.setProperty(n,`${e.customRoundeness??6}px`)}},bl=(e,t,n)=>{if(void 0!==e)switch(e){case"none":t.setProperty(n,"0 0 #0000");break;case"sm":t.setProperty(n,"0 1px 2px 0 rgb(0 0 0 / 0.05)");break;case"md":t.setProperty(n,"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)");break;case"lg":t.setProperty(n,"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)");break;case"xl":t.setProperty(n,"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)");break;case"2xl":t.setProperty(n,"0 25px 50px -12px rgb(0 0 0 / 0.25)")}else t.setProperty(n,"0 0 #0000")};const fl="typebot-font",ml=e=>{const t=document.getElementById(fl);if("string"==typeof e||"Google"===e.type){const n=("string"==typeof e?e:e.family)??gi;if(t?.getAttribute("href")?.includes(n))return;t?.remove();const r=document.createElement("link");return r.href=`https://fonts.bunny.net/css2?family=${n}:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&display=swap`,r.rel="stylesheet",r.id=fl,void document.head.appendChild(r)}if("Custom"===e.type){if(ze(e.css)){if(t?.innerHTML===e.css)return;t?.remove();const n=document.createElement("style");n.innerHTML=e.css,n.id=fl,document.head.appendChild(n)}if(ze(e.url)){if(t?.getAttribute("href")===e.url)return;t?.remove();const n=document.createElement("link");n.href=e.url,n.rel="stylesheet",n.id=fl,document.head.appendChild(n)}}},yl=pe('<div class="typebot-progress-bar-container"><div class="typebot-progress-bar">'),vl=e=>(()=>{const t=yl(),n=t.firstChild;return k((()=>null!=`${e.value}%`?n.style.setProperty("width",`${e.value}%`):n.style.removeProperty("width"))),t})(),wl=pe("<style>"),xl=pe("<div>"),_l=e=>{const[t,n]=_(),[r,o]=_(""),[i,a]=_(!1),[s,l]=_(),c=async()=>{e.font&&ml(e.font),a(!0);const t=new URLSearchParams(location.search);e.onInit?.();const r={};t.forEach(((e,t)=>{r[t]=e}));const i="string"==typeof e.typebot?e.typebot:void 0,s="string"!=typeof e.typebot||(e.isPreview??!1),c=(e=>{if(e)try{return sessionStorage.getItem(`${Ks}-${e}`)??localStorage.getItem(`${Ks}-${e}`)??void 0}catch{}})(i),{data:d,error:u}=await async function({typebot:e,isPreview:t,apiHost:n,prefilledVariables:r,resultId:o,stripeRedirectStatus:i,startFrom:a}){if(Me(e))throw new Error("Typebot ID is required to get initial messages");const s=gt()??void 0,l=s?JSON.parse(s):void 0;if(l){bt();try{return{data:await zt.post(`${ze(n)?n:ht()}/api/v1/sessions/${l.sessionId}/continueChat`,{json:{message:l?"failed"===i?"fail":"Success":void 0},timeout:!1}).json()}}catch(e){return{error:e}}}const c="string"==typeof e?e:e.id;if(t)try{return{data:await zt.post(`${ze(n)?n:ht()}/api/v1/typebots/${c}/preview/startChat`,{json:{isStreamEnabled:!0,startFrom:a,typebot:e,prefilledVariables:r},timeout:!1}).json()}}catch(e){return{error:e}}try{return{data:await zt.post(`${ze(n)?n:ht()}/api/v1/typebots/${c}/startChat`,{json:{isStreamEnabled:!0,prefilledVariables:r,resultId:o,isOnlyRegistering:!1},timeout:!1}).json()}}catch(e){return{error:e}}}({stripeRedirectStatus:t.get("redirect_status")??void 0,typebot:e.typebot,apiHost:e.apiHost,isPreview:s,resultId:ze(e.resultId)?e.resultId:c,prefilledVariables:{...r,...e.prefilledVariables},startFrom:e.startFrom});if(u instanceof ft)return s?l(new Error("An error occurred while loading the bot.",{cause:{status:u.response.status,body:await u.response.json()}})):400===u.response.status||403===u.response.status?l(new Error("This bot is now closed.")):404===u.response.status?l(new Error("The bot you're looking for doesn't exist.")):l(new Error(`Error! Couldn't initiate the chat. (${u.response.statusText})`));if(!d)return u&&(console.error(u),s)?l(new Error("Error! Could not reach server. Check your connection.",{cause:u})):l(new Error("Error! Could not reach server. Check your connection."));if(d.resultId&&i&&(d.typebot.settings.general?.rememberUser?.isEnabled??Bn.rememberUser.isEnabled)){c&&c!==d.resultId&&el(d.typebot.id);const t=d.typebot.settings.general?.rememberUser?.storage??Bn.rememberUser.storage;((e="session")=>(t,n)=>{try{Qs(e).setItem(`${Ks}-${t}`,n)}catch{}})(t)(i,d.resultId);const r=(e=>{if(e)try{const t=sessionStorage.getItem(`typebot-${e}-initialChatReply`)??localStorage.getItem(`typebot-${e}-initialChatReply`);if(!t)return;return JSON.parse(t)}catch{}})(d.typebot.id);r?n(r):(n(d),((e,{typebotId:t,storage:n})=>{try{const r=JSON.stringify(e);Qs(n).setItem(`typebot-${t}-initialChatReply`,r)}catch{}})(d,{typebotId:d.typebot.id,storage:t})),e.onChatStatePersisted?.(!0)}else el(d.typebot.id),n(d),d.input?.id&&e.onNewInputBlock&&e.onNewInputBlock(d.input),d.logs&&e.onNewLogs?.(d.logs),e.onChatStatePersisted?.(!1);o(d.typebot.theme.customCss??"")};return $((()=>{Me(e.typebot)||i()||c().then()})),$((()=>{Me(e.typebot)||"string"==typeof e.typebot||(o(e.typebot.theme.customCss??""),e.typebot.theme.general?.progressBar?.isEnabled&&t()&&!t()?.typebot.theme.general?.progressBar?.isEnabled&&(a(!1),c().then()))})),E((()=>{a(!1)})),[(()=>{const e=wl();return ye(e,r),e})(),(()=>{const e=wl();return ye(e,"#lite-badge{background-color:#fff!important;border-radius:4px!important;border-width:1px!important;bottom:20px!important;color:#111827!important;display:flex!important;font-size:14px!important;font-weight:600!important;gap:8px!important;left:auto!important;line-height:20px!important;opacity:1!important;padding:4px 8px!important;position:absolute!important;right:auto!important;text-decoration:none!important;top:auto!important;transition:background-color .2s ease-in-out!important;visibility:visible!important;z-index:50!important}#lite-badge:hover{background-color:#f7f8ff!important}"),e})(),V(ne,{get when(){return s()},keyed:!0,children:e=>V(Ys,{error:e})}),V(ne,{get when(){return t()},keyed:!0,children:t=>V(kl,{get class(){return e.class},get initialChatReply(){return{...t,typebot:{...t.typebot,settings:"string"==typeof e.typebot?t.typebot?.settings:e.typebot?.settings,theme:"string"==typeof e.typebot?t.typebot?.theme:e.typebot?.theme}}},get context(){return{apiHost:e.apiHost,isPreview:"string"!=typeof e.typebot||(e.isPreview??!1),resultId:t.resultId,sessionId:t.sessionId,typebot:t.typebot,storage:t.typebot.settings.general?.rememberUser?.isEnabled&&"string"==typeof e.typebot&&!e.isPreview?t.typebot.settings.general?.rememberUser?.storage??Bn.rememberUser.storage:void 0}},get progressBarRef(){return e.progressBarRef},get onNewInputBlock(){return e.onNewInputBlock},get onNewLogs(){return e.onNewLogs},get onAnswer(){return e.onAnswer},get onEnd(){return e.onEnd}})})]},kl=e=>{const[t,n]=ci(_(e.initialChatReply.progress),{storage:e.context.storage,key:`typebot-${e.context.typebot.id}-progressValue`});let r;const o=new ResizeObserver((e=>Dt(e[0].target.clientWidth<400)));return C((()=>{r&&(o.observe(r),gn(`${r.clientHeight}px`))})),$((()=>{ml(e.initialChatReply.typebot.theme.general?.font??{type:"Google",family:gi}),r&&((e,t,n)=>{if(!e)return;const r=t?.style;r&&(rl(e.general,r,n),il(e.chat,e.general?.background,r))})(e.initialChatReply.typebot.theme,r,e.context.isPreview)})),E((()=>{r&&o.unobserve(r)})),(()=>{const o=xl();return"function"==typeof r?me(r,o):r=o,ye(o,V(ne,{get when(){return Ne(t())&&e.initialChatReply.typebot.theme.general?.progressBar?.isEnabled},get children(){return V(ne,{get when(){return e.progressBarRef&&"fixed"===(e.initialChatReply.typebot.theme.general?.progressBar?.position??mi)},get fallback(){return V(vl,{get value(){return t()}})},get children(){return V(Ce,{get mount(){return e.progressBarRef},get children(){return V(vl,{get value(){return t()}})}})}})}}),null),ye(o,V(Gs,{get context(){return e.context},get initialChatReply(){return e.initialChatReply},get onNewInputBlock(){return e.onNewInputBlock},get onAnswer(){return e.onAnswer},get onEnd(){return e.onEnd},get onNewLogs(){return e.onNewLogs},onProgressUpdate:n}),null),ye(o,V(ne,{get when(){return e.initialChatReply.typebot.settings.general?.isBrandingEnabled},get children(){return V(ut,{botContainer:r})}}),null),k((()=>be(o,He("relative flex w-full h-full text-base overflow-hidden flex-col justify-center items-center typebot-container",e.class)))),o})()},$l=pe("<style>"),Sl=pe("<div>"),Tl=pe('<div part="bot">'),Cl=e=>{const[t,n]=X(e,["onOpen","onClose","previewMessage","onPreviewMessageClick","theme","autoShowDelay"]),[r,o]=_(!0),[i,a]=_(n.prefilledVariables),[s,l]=_(!1),[c,d]=_({message:t.previewMessage?.message??"",avatarUrl:t.previewMessage?.avatarUrl}),[u,p]=_(!1),[h,g]=_(!1),[b,f]=_(El(t.theme?.button?.size??"medium"));let m;$((()=>{f(El(t.theme?.button?.size??"medium"))})),C((()=>{window.addEventListener("message",y);const e=t.autoShowDelay,n=t.previewMessage?.autoShowDelay;(Xs()||gt())&&v(),Ne(e)&&setTimeout((()=>{v()}),e),Ne(n)&&setTimeout((()=>{T()}),n)})),E((()=>{window.removeEventListener("message",y)})),$((()=>{e.prefilledVariables&&a((t=>({...t,...e.prefilledVariables})))}));const y=e=>{const{data:t}=e;t.isFromTypebot&&("open"===t.command&&v(),"close"===t.command&&w(),"toggle"===t.command&&x(),"showPreviewMessage"===t.command&&T(t.message),"hidePreviewMessage"===t.command&&A(),"setPrefilledVariables"===t.command&&a((e=>({...e,...t.variables}))),"unmount"===t.command&&I())},v=()=>{h()||g(!0),A(),p(!0),u()&&t.onOpen?.()},w=()=>{p(!1),Js(),u()&&t.onClose?.()},x=()=>{u()?w():v()},S=()=>{t.onPreviewMessageClick?.(),v()},T=e=>{e&&d(e),u()||l(!0)},A=()=>{l(!1)},I=()=>{u()?(w(),setTimeout((()=>{o(!1)}),200)):o(!1)},P=e=>{n.onChatStatePersisted?.(e),e&&Zs()};return V(ne,{get when(){return r()},get children(){return[(()=>{const e=$l();return ye(e,Le),e})(),V(ne,{get when(){return s()},get children(){return V(at,J(c,{get placement(){return t.theme?.placement},get previewMessageTheme(){return t.theme?.previewMessage},get buttonSize(){return b()},onClick:S,onCloseClick:A}))}}),V(et,J((()=>t.theme?.button),{get placement(){return t.theme?.placement},toggleBot:x,get isBotOpened(){return u()},get buttonSize(){return b()}})),(()=>{const e=Sl();return"function"==typeof m?me(m,e):m=e,e})(),(()=>{const r=Tl();return r.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),r.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),r.style.setProperty("z-index","42424242"),ye(r,V(ne,{get when(){return h()},get children(){return V(_l,J(n,{onChatStatePersisted:P,get prefilledVariables(){return i()},class:"rounded-lg",progressBarRef:m}))}})),k((n=>{const o=`calc(100% - ${b()} - 32px)`,i=e.theme?.chatWindow?.maxHeight??"704px",a=e.theme?.chatWindow?.maxWidth??"400px",s="left"===e.theme?.placement?"bottom left":"bottom right",l=u()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",c=t.theme?.chatWindow?.backgroundColor,d=`calc(${b()} + 32px)`,p="fixed rounded-lg w-full"+(u()?" opacity-1":" opacity-0 pointer-events-none")+("left"===e.theme?.placement?" left-5":" sm:right-5 right-0");return o!==n._v$&&(null!=(n._v$=o)?r.style.setProperty("height",o):r.style.removeProperty("height")),i!==n._v$2&&(null!=(n._v$2=i)?r.style.setProperty("max-height",i):r.style.removeProperty("max-height")),a!==n._v$3&&(null!=(n._v$3=a)?r.style.setProperty("max-width",a):r.style.removeProperty("max-width")),s!==n._v$4&&(null!=(n._v$4=s)?r.style.setProperty("transform-origin",s):r.style.removeProperty("transform-origin")),l!==n._v$5&&(null!=(n._v$5=l)?r.style.setProperty("transform",l):r.style.removeProperty("transform")),c!==n._v$6&&(null!=(n._v$6=c)?r.style.setProperty("background-color",c):r.style.removeProperty("background-color")),d!==n._v$7&&(null!=(n._v$7=d)?r.style.setProperty("bottom",d):r.style.removeProperty("bottom")),p!==n._v$8&&be(r,n._v$8=p),n}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),r})()]}})},El=e=>"medium"===e?"48px":"large"===e?"64px":e||"48px",Al=pe("<style>"),Il=pe('<div class="relative" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in" part="overlay"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div>'),Pl=e=>{const[t,n]=X(e,["onOpen","onClose","autoShowDelay","theme","isOpen","defaultOpen"]),[r,o]=_(n.prefilledVariables),[i,a]=_(t.isOpen??!1);C((()=>{(t.defaultOpen||gt()||Xs())&&c(),window.addEventListener("message",l);const e=t.autoShowDelay;Ne(e)&&setTimeout((()=>{c()}),e)})),E((()=>{window.removeEventListener("message",l)})),$((()=>{Me(e.isOpen)||e.isOpen===i()||u()})),$((()=>{e.prefilledVariables&&o((t=>({...t,...e.prefilledVariables})))}));const s=e=>{e.stopPropagation()},l=e=>{const{data:t}=e;t.isFromTypebot&&("open"===t.command&&c(),"close"===t.command&&d(),"toggle"===t.command&&u(),"setPrefilledVariables"===t.command&&o((e=>({...e,...t.variables}))))},c=()=>{a(!0),t.onOpen?.(),document.body.style.setProperty("overflow","hidden","important"),document.addEventListener("pointerdown",d)},d=()=>{a(!1),t.onClose?.(),document.body.style.overflow="auto",document.removeEventListener("pointerdown",d),Js()},u=()=>{i()?d():c()},p=e=>{n.onChatStatePersisted?.(e),e&&Zs()};return V(ne,{get when(){return i()},get children(){return[(()=>{const e=Al();return ye(e,Le),e})(),(()=>{const t=Il(),o=t.firstChild,i=o.nextSibling.nextSibling.firstChild.firstChild;return ye(o,Le),i.addEventListener("pointerdown",s),ye(i,V(_l,J(n,{get prefilledVariables(){return r()},onChatStatePersisted:p}))),k((n=>{const r=e.theme?.zIndex??42424242,o="relative h-[80vh] transform overflow-hidden rounded-lg text-left transition-all sm:my-8 w-full max-w-lg"+(e.theme?.backgroundColor?" shadow-xl":""),a=e.theme?.backgroundColor??"transparent",s=e.theme?.width??"512px";return r!==n._v$&&(null!=(n._v$=r)?t.style.setProperty("z-index",r):t.style.removeProperty("z-index")),o!==n._v$2&&be(i,n._v$2=o),a!==n._v$3&&(null!=(n._v$3=a)?i.style.setProperty("background-color",a):i.style.removeProperty("background-color")),s!==n._v$4&&(null!=(n._v$4=s)?i.style.setProperty("max-width",s):i.style.removeProperty("max-width")),n}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()]}})},Rl=pe("<style>\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n  overflow-y: hidden;\n}\n"),Ll=(e,{element:t})=>{const[n,r]=_(!1),o=new IntersectionObserver((e=>{e.some((e=>e.isIntersecting))&&r(!0)}));C((()=>{window.addEventListener("message",i),o.observe(t)}));const i=e=>{const{data:t}=e;t.isFromTypebot};return E((()=>{o.disconnect()})),[(()=>{const e=Rl(),t=e.firstChild;return ye(e,Le,t),e})(),V(ne,{get when(){return n()},get children(){return V(_l,e)}})]},Ol=()=>{window.postMessage({isFromTypebot:!0,command:"close"})},Nl=()=>{window.postMessage({isFromTypebot:!0,command:"hidePreviewMessage"})},Ml=()=>{window.postMessage({isFromTypebot:!0,command:"open"})},Bl=e=>{const t={isFromTypebot:!0,command:"setPrefilledVariables",variables:e};window.postMessage(t)},zl=e=>{const t={isFromTypebot:!0,command:"showPreviewMessage",message:e};window.postMessage(t)},jl=()=>{window.postMessage({isFromTypebot:!0,command:"toggle"})},Dl=e=>{const t={isFromTypebot:!0,command:"setInputValue",value:e};window.postMessage(t)},Ul=()=>{window.postMessage({isFromTypebot:!0,command:"unmount"})},Fl=e=>{const t=e.id?document.getElementById(e.id):document.querySelector("typebot-standard");if(!t)throw new Error("<typebot-standard> element not found.");Object.assign(t,e)},Hl=e=>{const t=document.createElement("typebot-popup");Object.assign(t,e),document.body.prepend(t)},ql=e=>{const t=document.createElement("typebot-bubble");Object.assign(t,e),document.body.prepend(t)};"undefined"!=typeof window&&(Ae("typebot-standard",Ie,Ll),Ae("typebot-bubble",Re,Cl),Ae("typebot-popup",Pe,Pl));const Gl={initStandard:Fl,initPopup:Hl,initBubble:ql,close:Ol,hidePreviewMessage:Nl,open:Ml,setPrefilledVariables:Bl,showPreviewMessage:zl,toggle:jl,setInputValue:Dl,unmount:Ul};(e=>{"undefined"!=typeof window&&(window.Typebot={...e})})(Gl);export{Gl as default};
